<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-develop/integrate/build-cross-chain/getting-started/credit-processor">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">EVM → Everscale Transactions Using The Credit Processor Contract | Docs of Everscale</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.everscale.network/develop/integrate/build-cross-chain/getting-started/credit-processor/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="EVM → Everscale Transactions Using The Credit Processor Contract | Docs of Everscale"><meta data-rh="true" name="description" content="Credit Process is a special smart contract that exchanges part of the tokens for EVERs to pay for gas, and automatically completes transactions on the Everscale network. It is quite complex, and in order to use it in complex cases, it is advisable to independently study it. This tutorial does not cover all possible cases."><meta data-rh="true" property="og:description" content="Credit Process is a special smart contract that exchanges part of the tokens for EVERs to pay for gas, and automatically completes transactions on the Everscale network. It is quite complex, and in order to use it in complex cases, it is advisable to independently study it. This tutorial does not cover all possible cases."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.everscale.network/develop/integrate/build-cross-chain/getting-started/credit-processor/"><link data-rh="true" rel="alternate" href="https://docs.everscale.network/develop/integrate/build-cross-chain/getting-started/credit-processor" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.everscale.network/develop/integrate/build-cross-chain/getting-started/credit-processor" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JMT2J0B3ZE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JMT2J0B3ZE",{anonymize_ip:!0})</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.d70ed41f.css">
<link rel="preload" href="/assets/js/runtime~main.00aa4648.js" as="script">
<link rel="preload" href="/assets/js/main.57fd1e20.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Everscale Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Everscale Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Everscale Docs</b></a><a class="navbar__item navbar__link" href="/develop/tutorial/getting-started/">Getting Started</a><a class="navbar__item navbar__link" href="/learn/">Learn</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/develop/">Build</a><a class="navbar__item navbar__link" href="/validate/">Validate</a><a class="navbar__item navbar__link" href="/ecosystem/">Ecosystem</a><a class="navbar__item navbar__link" href="/arch/">Architecture</a><a class="navbar__item navbar__link" href="/standard/">Standards</a><a href="https://everscale.guide/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Crash Course<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://blog.everscale.network/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://monitoring.ever.rs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/everscale-org/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gs">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/learn">Learn</a><button aria-label="Toggle the collapsible sidebar category &#x27;Learn&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/arch">Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/develop">Build</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/tutorial">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/smart-contracts">Smart Contracts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Smart Contracts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/develop/integrate">Integrate</a><button aria-label="Toggle the collapsible sidebar category &#x27;Integrate&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/integrate/tutorial">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/integrate/build-cross-chain">Build cross-chain</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build cross-chain&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/integrate/build-cross-chain/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/integrate/build-cross-chain/use-cases">Use cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/integrate/build-cross-chain/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/build-cross-chain/getting-started">Getting started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/integrate/build-cross-chain/getting-started/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/integrate/build-cross-chain/getting-started/transactions-mechanism">Transaction types and their mechanics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/integrate/build-cross-chain/getting-started/evm-everscale">EVM → Everscale transactions of liquid tokens without the credit processor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/integrate/build-cross-chain/getting-started/everscale-evm">Everscale → EVM Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/develop/integrate/build-cross-chain/getting-started/credit-processor">EVM → Everscale Transactions Using The Credit Processor Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/integrate/build-cross-chain/getting-started/contracts">Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/integrate/build-cross-chain/getting-started/samples">Samples</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/integrate/products-api">Ecosystem products APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ecosystem products APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/integrate/integrated-products">Integrated products</a><button aria-label="Toggle the collapsible sidebar category &#x27;Integrated products&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/tools">Tools</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tools&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/cpp-developing">Developing with C++</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developing with C++&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/nodes-clients">Nodes and Clients</a><button aria-label="Toggle the collapsible sidebar category &#x27;Nodes and Clients&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/solidity-developing">Developing with Solidity</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developing with Solidity&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/client-api">Client API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Client API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/from-another-platform">From another platform</a><button aria-label="Toggle the collapsible sidebar category &#x27;From another platform&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/web-frontend">Build the Web Frontend</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build the Web Frontend&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/develop/debots">DeBots</a><button aria-label="Toggle the collapsible sidebar category &#x27;DeBots&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/multisignature-wallet">Multisignature Wallet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/smv-contracts">SMV Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/develop/hackathons-grants">Hackathons &amp; Grants</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/standard">Standards</a><button aria-label="Toggle the collapsible sidebar category &#x27;Standards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/validate">Validate</a><button aria-label="Toggle the collapsible sidebar category &#x27;Validate&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ecosystem">Ecosystem</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ecosystem&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/changelog">Network Changelog</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/develop"><span itemprop="name">Build</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/develop/integrate"><span itemprop="name">Integrate</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/integrate/build-cross-chain"><span itemprop="name">Build cross-chain</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/build-cross-chain/getting-started"><span itemprop="name">Getting started</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">EVM → Everscale Transactions Using The Credit Processor Contract</span><meta itemprop="position" content="5"></li></ul></nav><div class="theme-doc-markdown markdown"><h1>EVM → Everscale Transactions Using The Credit Processor Contract</h1><p>Credit Process is a special smart contract that exchanges part of the tokens for EVERs to pay for gas, and automatically completes transactions on the Everscale network. It is quite complex, and in order to use it in complex cases, it is advisable to independently study it. This tutorial does not cover all possible cases. </p><p><strong>The transaction pipeline is as follows:</strong></p><p>Before proceeding, please be informed that this guide will examine transactions of liquid tokens with the exception of WEVER. For WEVER, the swap will be skipped and there will simply be the uwrap.       </p><p>The beginning is the same as for a regular transaction. Values for <code>deposit type = credit</code> are taken <a href="https://raw.githubusercontent.com/broxus/bridge-assets/master/main.json" target="_blank" rel="noopener noreferrer">from the list</a>.</p><p>The Vault in EVM will most likely be the same, but there will be other values for <code>ethereumConfigurationAddress</code>.</p><p>The credit processor has its own implementation of the configuration contract. It issues tokens to the processor and not to the user, and sends the processor a callback <code>onEventConfirmed</code>.</p><p>All limits should be checked and the amount determined. It is important to mention that transactions are possible only with tokens for which there is a <code>TOKEN/WEVER</code> pair with sufficient liquidity on FlatQube.</p><p>Next, it is needed to decide on the scenarios and parameters that will be transferred to the processor.</p><p>To call the deposit, the following is used <code>depositToFactory function(uint128 amount, int8 wid, uint256 user, uint256 creditor, uint256 recipient, uint128 tokenAmount, uint128 tonAmount, uint8 swapType, uint128 slippageNumerator, uint128 slippageDenominator, bytes memory level3)</code>, where: </p><ul><li><code>Amount</code> - how many tokens are transferred to Everscale and how much the credit the processor will receive for the exchange\release. ERC20 decimals!       </li><li><code>User</code> - is the control address. It can process a stuck transaction if, for example, tokens could not be
exchanged for gas, because at the moment the price went beyond the limits of the slippage set. </li></ul><p>It can also cancel the transaction and unwrap. Pay the debt manually and pick up all the tokens.<br>
<!-- -->With correctly selected transaction parameters, it is used extremely rarely.<br>
<!-- -->Usually, this is just the user&#x27;s wallet address, and if the user transfers tokens to himself, then it coincides with the recipient.<br>
<!-- -->In case tokens are transferred to a Strategy, it is better to specify the user&#x27;s wallet address, even if it is not initialized.</p><p>Creditor - the address of the <code>CreditFactory.sol</code> contract, which will create the <code>CreditProcessor.sol</code> contract itself.<br>
<!-- -->By default, you can use Broxus factory.<br>
<!-- -->The address of the current Factory and the number of tokens that will need to be returned are to be taken <a href="https://github.com/broxus/bridge-assets/blob/master/credit.json" target="_blank" rel="noopener noreferrer">from here</a>.</p><p>Any account can deploy a contract via the Factory. The admin of the Factory can try to push the stuck <code>CreditProcessor</code>, and change the slippage, but with all parameters set correctly, this should not affect the result.</p><p>There is no binding to the <code>CreditFactory.sol</code> contract code, so you can create your own Factory, but <code>CreditProcessor.sol</code> cannot be changed, or deploy your own Factory.</p><ul><li><code>Recipient</code> - the address that will receive tokens + native EVERs. In a normal scenario, this is just the user&#x27;s wallet address, but it can also be a smart contract. There are two options depending on the logic:</li></ul><ol><li>If all tokens on the account balance are exchanged for EVERs, then the Credit Processor will trigger the receiving contract <code>onReceiveTONsFromBridgeCallback(EventData)</code> where all EVERs will be transferred. <code>onbounce: EventData.user != EventData.recipient</code>. That is, if the receiving contract is not the same as the user&#x27;s, then it must be set up in advance or the tokens will be returned.</li><li>If we have to swap Tokens + EVERs, then the contract will simply transfer tokens to this address along with EVERs, and the contract/wallet will receive a call to <code>onAcceptTokensTransfer</code>. The data of the transfer will also be in the payload.</li></ol><ul><li><code>tonAmount</code> is the minimum amount of EVERs together with the tokens that should be received by the recipient, TIP 3 WEVER decimals = 9. </li><li><code>tokenAmount</code> is the minimum amount of tokens that should be received by the recipient. Already in **TIP 3 decimals`!</li><li><code>swapType</code> – that&#x27;s according to what algorithm the contract will try to make the transaction. Generally,
by correctly combining <code>swapType / tokenAmount /tonAmount</code>, you can come up with different use cases of the Credit Processor. After receiving the tokens, the Processor asks the DEX how many tokens it will cost to buy WEVER (tonAmount + debt) + Slippage. That is, if the debt is 6, the number of tokens is 4, and the slippage is 10%, then it will be 11.</li></ul><p>The DEX returns <code>expectedSpentAmount</code> and if it is <code>≤ amount tokenAmount</code>, then it will continue to try
to make an exchange according to <code>swapType</code>, and if <code>expectedSpentAmount</code> is &gt; <code>amount</code> -
<code>tokenAmount</code>, the contract will end up in the <code>SwapFailed</code> status and will wait for further actions from
the user or lender.</p><ol><li>0 - the contract will try to exchange tokens for WEVER for an amount equal to <code>expectedSpentAmount</code>, but no more than amount - <code>tokenAmoun</code>.</li><li>1 - The contract will change to EVERs the exact amount - <code>tokenAmount</code>.</li></ol><p><code>slippageNumerator/slippageDenominator</code> are the parameters of slippage during the exchange.</p><ul><li><code>level3</code> is the payload. It must be a valid TvmCell. If a non-valid cell is passed, then an empty cell te6ccgEBAQEAAgAAAA will come to Everscale. </li></ul><p>Accordingly, before the transfer, we need to calculate which parameters to transfer to <code>depositToFactory</code>, and these calculations strongly depend on what kind of use case we have.        </p><p>Let&#x27;s see how to make the calculations when we want to transfer tokens, and change some of them for
gas using <code>swapType 0</code>:</p><p>Upload <code>creditBody</code> + Factory fee, this is <code>dept</code>. <code>creditBody</code> and we take it <a href="https://github.com/broxus/bridge-assets/blob/master/credit.json" target="_blank" rel="noopener noreferrer">from the same place</a> as the address of the factory.</p><p>The fee is taken from the contract.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const {fee: factoryFee} = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await factoryContract.methods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .getDetails({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            answerId: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .call()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">).value0;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The user enters the amount of tokens that is to be transferred, and either enters how much <code>tonAmount</code> he/she wants to receive, or the application displays how much is needed for it to process the transfer.</p><p>Then, we calculate how many tokens <code>tonAmount</code> + <code>dept</code> will cost. However, please note that the price of Token/Ever pair may change. In the contract below, there will be 1% slippage. However, the count will be like for 10%. Why is this the case? </p><p>The Credit Processor will not be completed successfully without meeting the requirements for <code>tonAmount</code> and <code>tokenAmount</code>.<br>
<!-- -->At the same time, before the exchange, it checks how much it will cost to buy (<code>dept</code> + <code>tonAmount</code>) * <code>slippage</code>, and buys exactly this amount of tokens. If the value of this amount is greater than the <code>amount</code> - <code>tokenAmount</code>, then it will fail and wait for further actions from the user or Factory, because it cannot fulfill the requirements.</p><p>If we just count <code>tokenAmount</code> = <code>amount</code> - ((<code>dept</code> + <code>tonAmount</code>) * 1.01), and transfer such an amount to the contract, then this transfer will fail if the price of EVER increases by at least a bit during the transfer.</p><p>Therefore, we transfer tokenAmount = amount - ((<code>dept</code> + <code>tonAmount</code>) * 1.1) to the contract, and show this number to the user as the number of tokens that is guaranteed to be received. The slippage set for the contract is not 10% but 1%. The contract will try to exchange with 1% slippage. It can make several attempts, and the transaction will be completed successfully if the price has diverged by no more than 10%. It is done to minimize the likelihood of manual actions in case of price volatility. </p><p>In case that everything runs well and the market is calm, then we will get more <code>tokenAmount</code> than indicated in <code>deposit To Factory</code>. Additionally, you can show to the user how many tokens he/she will receive if the price does not change.</p><p>(<code>dept</code> + <code>tonAmount</code>) * <code>slippage</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const tonAmount = new BigNumber(0); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const dept = new BigNumber(CREDIT_BODY).plus(fee);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const defaultNumerator = &#x27;1&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const maximumNumerator = &#x27;10&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const denumenator = &#x27;100&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const minEvers = tonAmount.plus(dept);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const minEversWithSlippage = minEvers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .times(denumenator)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .div(new BigNumber(denumenator).minus(maximumNumerator))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .dp(0, BigNumber.ROUND_UP);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const dexRootContract = new rpc.Contract(DexAbi.Root, DexRootAddress);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const pairAddress = (await dexRootContract.methods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                  .getExpectedPairAddress({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                      answerId: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                      left_root: new Address(fromToken),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                      right_root: new Address(WEVERAddress),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                  .call({})).value0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const pairContract = new rpc.Contract(DexAbi.Pair, pairAddress);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const isActive = (await pairContract.methods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                  .isActive({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                      answerId: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                  .call()).value0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (!isActive)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    throw new Error(&#x27;Pair not active);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const expectedAmount = (await pairContract.methods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            .expectedSpendAmount({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                answerId: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                receive_amount: minEversWithSlippage.toFixed(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                receive_token_root: WEVERRootAddress,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            .call()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ).expected_amoun</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the example above, we saw expectedAmount. This is the maximum amount of tokens that will cost to exchange for <code>dept</code> + <code>tonAmounts</code>. Note that this is in decimals already on Everscale in order to see how many tokens this is in EVM.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const minTransferAmount = new BigNumber(expectedAmount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .plus(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .shiftedBy(evm_decimals - tip3_decimals)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .dp(0, BigNumber.ROUND_DOWN);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Accordingly, the parameters for <code>depositToFactory</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const user  = &#x27;0:0000000000000000000000000000000000000000000000000000000000000000&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const minTokensToRecieve = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        amount.shiftedBy(tip3_decimals - evm_decimals) // tip3 decimals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .minus(necessaryAmountForSwap);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">depositToFactory(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    amount.toFixed(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user.split(&#x27;:&#x27;)[0], // wid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user.split(&#x27;:&#x27;)[1], // address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `0x${CreditFactoryAddress.toString().split(&#x27;:&#x27;)[1]}`, // creditor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user.split(&#x27;:&#x27;)[1], //recipient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    minTokensToRecieve.toFixed(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tonAmount.toFixed(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;0&#x27;, // swap type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    defaultNumerator,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    defaultDenominator,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `0x${Buffer.from(&#x27;te6ccgEBAQEAAgAAAA==&#x27;, &#x27;base64&#x27;).toString(&#x27;hex&#x27;)}`,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After a successful deposit, wait for the Credit Processor contract, and monitor its status. To do this, we  need to get the transaction recipe from Web3 for transaction data (the address of the Credit Processor contract depends on them). Please see how to do it in the frontend demo via following <a href="https://github.com/mnill/octus-bridge-integration-sample" target="_blank" rel="noopener noreferrer">this link</a>.</p><p>It can also be accessed on the open-source frontend of the bridge via following <a href="https://github.com/broxus/octusbridge-frontend" target="_blank" rel="noopener noreferrer">this link</a>:</p><p>It works as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const eventABI = &#x27;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const decodedLogs = decodeLogs(txReceipt?.logs || []);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const depositLog =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    txReceipt.logs[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        decodedLogs.findIndex(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            (log: any) =&gt; log !== undefined &amp;&amp; log.name === &#x27;FactoryDeposit&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const eventData = mapEthBytesIntoTonCell(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Buffer.from(pipeline.eventABI, &#x27;base64&#x27;).toString(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    depositLog.data,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const eventVoteData = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    eventBlock: txReceipt.blockHash,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    eventBlockNumber: txReceipt.blockNumber.toString(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  eventTransaction: txReceipt.transactionHash,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  eventData: eventData,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  eventIndex: depositLog.logIndex.toString(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const factoryContract = new rpc.Contract(TokenAbi.CreditFactory, CreditFactoryAddress);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const creditProcessorAddress = await factoryContract.methods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .getCreditProcessorAddress({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        answerId: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        eventVoteData,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        configuration: EthereumEventConfigurationAddress,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .call()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const creditProcessorContract = new rpc.Contract(TokenAbi.CreditProcessor, creditProcessorAddress);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const currentState = (await creditProcessorContract.methods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .getDetails({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            answerId: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .call()).value0.state;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If everything runs well, then wait for the <code>Processed</code> status.</p><p><strong>What you need to pay attention to:</strong></p><p>In case of more complicated cases than just transferring tokens across the bridge, it is needed to study the Credit Processor contract in detail in order to understand the mechanics of Tokens transferring. </p><p>It is not recommended exchanging a large amount of tokens for EVER on a credit processor (<code>minTonAmount</code>), sooner or later you will be sandwiched. </p><p><strong>Please always remember about different decimals for the same tokens in different networks.</strong></p><p>The approximate scheme of the Credit Processor contract below does not include all possible scenarios
where it could fail. It is given only for general understanding.</p><p><img loading="lazy" src="/assets/images/eve-everscale-credit-processor.drawio-83046c996e3b9722dac668041d131fe8.png" width="1906" height="6097" class="img_ev3q"></p><p>This is the main part of this guide. It doesn&#x27;t look so scary. But in reality, of course, there is quite a lot of
code.</p><p><strong>Some transactions may end up in a waiting queue. It can happen for several reasons:</strong></p><ul><li>Firstly, there may not be enough liquidity in the Vault. When your transaction is initiated, someone could have sent a transaction a little earlier than you or with a larger amount of gas and take the liquidity before you.</li><li>Your withdrawal has exceeded the limit for a single transaction, or the daily limit has been exceeded. In this case, the transaction will not just get into the queue, but will also have to wait until your withdrawal is confirmed by governance or guardian.</li><li>At the same time, if you withdraw money to the account of a smart contract and not a wallet, and, for example, check at the end of the transaction that your balance has increased by a certain amount, you are not immune from getting into the queue, because any wallet can complete the transfer, not just the one to which it is intended.</li><li>To get out of the queue, you will need to make another transaction.</li></ul><p>You can also assign a reward to the one who comes and completes your withdrawal in the form of tokens.</p><p>If you want to integrate the bridge into your website, then it is already very difficult to get into a queue using the UI, but you can always send the user to the frontend of the bridge tosolve any issues that may have arisen. </p><p>When withdrawing tokens from Everscale, the Event contract does not automatically send the change. In order to get the remaining gas, you need to call Close method from the wallet that transferred tokens. Carefully, <strong>DO NOT</strong> call this method in the “<code>Initializing</code>” state. Otherwise, the transaction may fail. </p><ul><li>The contract <code>EverscaleConfiguration.sol</code> is not permanent, and can be replaced by another. So check the <code>endTimestamp</code> parameter if the bridge is integrated into the frontend, and take the configuration address from Proxy.sol if you transfer from the contract. Also, check that the proxy is not on pause.<br>After going through the technical aspects of transactions please follow <a href="/develop/integrate/build-cross-chain/getting-started/transactions-mechanism">this page</a> to see the pros and cons of the Octus Bridge.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/everscale-org/docs/edit/main/.build/website/../../src/develop/integrate/build-cross-chain/getting-started/credit-processor.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-05-03T22:20:19.000Z">May 3, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/develop/integrate/build-cross-chain/getting-started/everscale-evm"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Everscale → EVM Transactions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/develop/integrate/build-cross-chain/getting-started/contracts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Contracts</div></a></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/everscale-org/job/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Jobs and Vacancy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://everscale.network/files/Everscale_Whitepaper.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">White Paper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://everscale.network/files/Everscale_Litepaper.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Lite Paper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@everscale.network/search?query=Digest" target="_blank" rel="noopener noreferrer" class="footer__link-item">Digest<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://everscale.network/about/brand" target="_blank" rel="noopener noreferrer" class="footer__link-item">Visual Brand Identity<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://everscale.network/grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/everscale-org/bounties/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bounties<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/EverscaleSmartContracts" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart Contracts Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/ever_validators" target="_blank" rel="noopener noreferrer" class="footer__link-item">Everscale Validators Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/everscaledebots" target="_blank" rel="noopener noreferrer" class="footer__link-item">DeBots Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/ever_sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDK Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/everscale" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Workshop</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://everscale.guide/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Crash Course<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/develop/tutorial/everdev-sc/">EverDev Tutorial</a></li><li class="footer__item"><a href="https://youtu.be/XKMnroPWXek" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart contract architecture<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://youtu.be/YBIaFeaksMY" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart contract development<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://youtu.be/vFAatJO6cBM" target="_blank" rel="noopener noreferrer" class="footer__link-item">Development of DeBots<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/tonlabs/samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample smart-contracts<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/sdk-samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tonlabs.gitbook.io/appkit-js/" target="_blank" rel="noopener noreferrer" class="footer__link-item">JS Application Kit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/TON-Solidity-Compiler/blob/master/API.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Solidity API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/arch/abi/">ABI Specification</a></li><li class="footer__item"><a class="footer__link-item" href="/standard/TIP-4">NFT</a></li><li class="footer__item"><a href="https://github.com/tonlabs/tonos-cli" target="_blank" rel="noopener noreferrer" class="footer__link-item">CLI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.everos.dev/ever-sdk/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2020—2023
 <a href="https://everscale.network/">Everscale</a> All rights reserved
  <a href="https://t.me/everscale">Touch</a>
 <br>
 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
    <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
 </a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.00aa4648.js"></script>
<script src="/assets/js/main.57fd1e20.js"></script>
</body>
</html>