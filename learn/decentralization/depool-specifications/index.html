<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-learn/decentralization/depool-specifications">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">DePool Specifications | Docs of Everscale</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.everscale.network/learn/decentralization/depool-specifications"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DePool Specifications | Docs of Everscale"><meta data-rh="true" name="description" content="Background"><meta data-rh="true" property="og:description" content="Background"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.everscale.network/learn/decentralization/depool-specifications"><link data-rh="true" rel="alternate" href="https://docs.everscale.network/learn/decentralization/depool-specifications" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.everscale.network/learn/decentralization/depool-specifications" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.2aebb493.css">
<link rel="preload" href="/assets/js/runtime~main.d5c4d33d.js" as="script">
<link rel="preload" href="/assets/js/main.a4ca7bb1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Everscale Documentation" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Everscale Documentation" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">Everscale Documentation</b></a><a class="navbar__item navbar__link" href="/standard">Standards</a><a class="navbar__item navbar__link" href="/develop">Build</a><a class="navbar__item navbar__link" href="/validate">Validate</a><a class="navbar__item navbar__link" href="/develop/integrate">Integrate</a><a class="navbar__item navbar__link" href="/contribute">Contribute</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/learn">Learn</a></div><div class="navbar__items navbar__items--right"><a href="https://blog.everscale.network/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://everos.dev/status" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/everscale-org/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/learn">Learn</a><button aria-label="Toggle the collapsible sidebar category &#x27;Learn&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/learn/everscale-overview">Everscale overview</a><button aria-label="Toggle the collapsible sidebar category &#x27;Everscale overview&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/learn/tutorial">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/learn/decentralization">Decentralization</a><button aria-label="Toggle the collapsible sidebar category &#x27;Decentralization&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/decentralization/end-to-end-decentralization">End-to-end Decentralization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/learn/decentralization/depool-specifications">DePool Specifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/decentralization/debot-specifications">DeBot Specifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/decentralization/debot-consortium">DeBot Consortium</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/faq">Everscale FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/governance">Governance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/history">History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/support">Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/terminology">Terminology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/tvm">TVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/welcome">Welcome</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/standard">Standards</a><button aria-label="Toggle the collapsible sidebar category &#x27;Standards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/validate">Validate</a><button aria-label="Toggle the collapsible sidebar category &#x27;Validate&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/arch">Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/develop">Build</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/contribute">Contribute</a><button aria-label="Toggle the collapsible sidebar category &#x27;Contribute&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/learn"><span itemprop="name">Learn</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/learn/decentralization"><span itemprop="name">Decentralization</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">DePool Specifications</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_l22C">On this page</button></div><div class="theme-doc-markdown markdown"><h1>DePool Specifications</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="background">Background<a class="hash-link" href="#background" title="Direct link to heading">​</a></h2><p>It is quite evident that to achieve high-performance properties, a network needs powerful, reliable servers with fast connectivity. At the same time, to achieve sufficient decentralization, these servers have to belong to as many owners as possible. There seems to be a contradiction between these goals.</p><p>In Proof-of-Work networks, performance is often sacrificed for decentralization. Yet, claims arise that the centralization of Bitcoin, Ethereum etc. mining power is not entirely prevented. Mining Pools centralization remains an issue, as these pools are controlled by particular entities distributing rewards. For example, almost 60% of Bitcoin mining power is concentrated in just 4 pools and around 80% of all mining power originates in China. Just 2 mining pools control 52% of Ethereum hashrate, more than 50% of which originates in China.</p><p>In Proof-of-Stake, the correlation between network performance and concentration of power (money in this case) is even more apparent, as one does not need to buy, set up, and manage complicated mining farms. It can ultimately be claimed that POS is trading performance for decentralization (look no further than EOS centralization, Steemit network overtaking etc.).</p><p>It seems that enabling small token holders to participate in network governance is a very important decentralization property.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="motivation">Motivation<a class="hash-link" href="#motivation" title="Direct link to heading">​</a></h2><p>Everscale blockchain needs all newly created blocks to be validated in order to run correctly. For this it relies on special designated nodes called &quot;Validators&quot;, and offers substantial reward for their work. However, becoming a validator requires a substantial cryptocurrency deposit. The required amount might far exceed an individual validator budget. On the other hand, blockchain users with no validating system might be interested in investing in validation duty. This is where the Decentralized Pool (DePool) smart contract comes in.</p><p>There are two main use cases of DePool:</p><ul><li>User has no Validator capabilities but some free funds. User can support a third-party Validator and receive rewards.</li><li>User has Validator capabilities and but doesn&#x27;t have necessary amount of funds to participate in validator elections and subsequent rewards.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="basic-terms">Basic terms<a class="hash-link" href="#basic-terms" title="Direct link to heading">​</a></h2><ul><li><strong>DePool</strong> — a smart contract that allows other smart contracts to invest stakes into a common pool of funds and after some period of time to receive it back with interest.</li><li><strong>Elector</strong> — a system level smart contract, deployed to masterchain from zero state. Runs validator elections periodically.</li><li><strong>DePool Proxy (proxy)</strong> — a smart contract that delivers messages between DePool and Elector.</li><li><strong>Participant</strong> — a smart contract that invests funds into DePool.</li><li><strong>Validator</strong> — software running blockchain node. Each DePool works with one node only. This node must be a DePool participant.</li><li><strong>Validator wallet</strong> — a smart contract that is used by Validator to send election requests to DePool and receive the Validator reward. Validator wallet should be a Multisig contract with 3 custodians.</li><li><strong>DePool Helper</strong> — a smart contract that stores the address of the actual DePool and works with the Timer contract.</li><li><strong>Global Validators Set (GVS)</strong> — current set of validators chosen in the latest elections.</li><li><strong>Validation period</strong> — period of time for which GVS is elected.</li><li><strong>Investment round</strong> — period of time between Participant investing a stake in DePool and receiving it back (with or without interest).</li><li><strong>Timer</strong> — a smart contract that can call other smart contracts periodically.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="architecture">Architecture<a class="hash-link" href="#architecture" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="DePool Architecture" src="/assets/images/depool-architecture-0457518c7676eb3193a2deb197b5fbe3.svg" width="758" height="482" class="img_E7b_"></p><ol><li>DePool is designed to receive investment stakes from Participants, allocate the pool funds to a validator in order to participate in elections of the GVS and, after the end of the validation cycle, distribute stakes with certain rewards back to the Participants.</li><li>DePool is deployed to basechain. But it cannot communicate with Elector directly, because Elector rejects messages from non-masterchain contracts. Thus there are DePool proxies that are deployed to masterchain and deliver messages from DePool to Elector and back. This is done, because DePool is a large and complex contract, and gas and storage fees are 10 times lower in basechain compared to masterchain. Keeping DePool on masterchain would be unreasonably expensive.</li><li>DePool is open for Participants’ stakes at all times, however, there is a deadline for participation in the upcoming elections. The deadline depends on the timer of the Elector. After the deadline, the incoming stakes will be accumulated for participation in the next elections.</li><li>DePool distinguishes stakes received before the deadline and after the deadline, therefore it stores information on Participant stakes in separate <strong>investment rounds (or rounds)</strong>, one for every elections, to facilitate subsequent distribution of stakes and rewards. To separate Elector communication, DePool uses 2 proxies: one for even rounds, one for odd.</li><li>In order to be time-aware, the DePool should be called from time to time. For this purpose the Timer contract is used. DePool Helper asks Timer to call it periodically and transmits every call from Timer to DePool. Interval between calls is chosen according to the elections interval.</li><li>DePool must be linked to a validator wallet to participate in elections on behalf of the latter. This validator wallet address is specified during DePool deployment and cannot be changed afterwards. When elections start, DePool waits for signed election requests from linked wallet, then attaches round stake to request and transmits it to Elector.</li><li>Validator can validate many DePools with 1 Validator wallet. Reputation of Validator wallet therefore is available and can be analyzed over time.</li><li>To ensure that the validator will perform its functions correctly (be always online and not &quot;lie&quot; to other validators), the validator wallet must itself become a Participant and invest in every investment round at least <strong>m_validatorAssurance</strong>, which is initialized in DePool constructor. This can be achieved with any of the three available types of stakes.</li><li>When Elector unfreezes validator stakes, DePool returns its stake back with round rewards. Part of the total reward is used to top up the DePool&#x27;s own balance to a certain value. The rest is distributed as follows: <strong>m_validatorRewardFraction%</strong> goes to Validator wallet balance. <strong>m_participantRewardFraction%</strong> is distributed among all Participants in investment round (validator is also participant). <strong>m_associationRewardFraction%</strong> (can be equal to zero) goes to <strong>m_association</strong> address.</li><li>DePool keeps a balance for each Participant and can automatically reinvest Participant&#x27;s stake into the next investment round if appropriate flag is enabled.</li><li>Participant can transfer part of its total stake to another Participant&#x27;s stake inside DePool storage. This function allows for collateralization of the stake to provide liquidity to stake holders.</li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="special-kinds-of-stakes">Special kinds of stakes<a class="hash-link" href="#special-kinds-of-stakes" title="Direct link to heading">​</a></h2><p>Along with the basic ordinary stake, that functions according to the rules detailed above, there are 2 types of special stakes: vesting and lock stake.</p><p>While the entire ordinary stake is invested into the current pooling round (and will thus be reinvested every second round), lock and vesting stakes are split into two equal parts upon reception, which are invested into the current pooling round, and the next round. This way they can be continuously reinvested into both odd and even rounds.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="vesting-stake">Vesting Stake<a class="hash-link" href="#vesting-stake" title="Direct link to heading">​</a></h3><p>Any address can make a vesting stake and define a target participant address (<strong>beneficiary</strong>) who will own this stake. But not the whole stake is available to the <strong>beneficiary</strong> at once. Instead it is split into logical parts and the next part of stake becomes available to the participant only when next vesting period is ended. At completion step of every round DePool decides how many vesting parts should be unlocked and subtracted from vesting stake and become available to owner since last unlocking. These funds are added to beneficiary&#x27;s ordinary stake.</p><p>Example: address A makes a vesting stake of 120 tons for 1 year with vesting period of 1 month and defines address B as the stake <strong>beneficiary</strong>. It means that after 1 month 10 tons become available to address B and 110 tons are still locked in the pool. After 1 year vesting stake will be equal to 0 and last 10 tons will become available to owner.</p><p>Vesting for validator beneficiaries is subject to additional rules: At the end of every withdrawal period, the part of the vesting stake to be released is divided proportionally into 2 parts — for rounds in this period when DePool successfully completed validation and received a reward (without slashing) and for rounds when DePool missed elections or was slashed. The portion of the stake corresponding to the successful rounds is sent to the validator, while the portion corresponding to the failed rounds is returned to the vesting stake owner. For example, if there were 100 rounds within the withdrawal period, and DePool successfully completed 80 of them, missed elections in 5 more and was slashed in the remaining 15, the validator will receive 80% of the unlocked part of the vesting stake, and the stake owner will get back 20% of it.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="lock-stake">Lock Stake<a class="hash-link" href="#lock-stake" title="Direct link to heading">​</a></h3><p>Any address can make a lock stake, in which it locks its funds in DePool for a defined period, but rewards from this stake will be payed to another target participant (<strong>beneficiary</strong>). At the end of a period the Lock Stake should be returned to the address which locked it.</p><p>Example: address A makes a lock stake of 120 tons for 1 year with vesting period of 1 month and defines address B as the stake <strong>beneficiary</strong>. It means that after 1 month 10 tons become available to address A (as opposed to vesting, where these 10 tons would become available to address B, the <strong>beneficiary</strong>) and 110 tons are still locked in round. DePool will reinvest the gradually diminishing lock stake for a 1 year and pay rewards to B address. After 1 year DePool will return the remainder of the lock stake to address A.</p><blockquote><p>One Participant can be a <strong>beneficiary</strong> only of one lock and one vesting stake. Once current lock or vesting stake of the participant expires, it can be repeated. When a stake of either of these types is created, it is split equally into two last rounds, which means that the minimal value for such stake is <code>2 * minStake + fee</code>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="specification">Specification<a class="hash-link" href="#specification" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="data-structures">Data Structures<a class="hash-link" href="#data-structures" title="Direct link to heading">​</a></h3><p>DePool contract uses library and inheritance from several simple base contacts to separate functionality and facilitate development and debugging of the contract. The core data set stored by DePool is the following:</p><p><code>DePoolLib.sol</code></p><div class="language-solidity codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-solidity codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Describes contract who deposit stakes in DePool pool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">Participant</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Count of rounds in which participant takes a part</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint8</span><span class="token plain"> roundQty</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Sum of all rewards from completed rounds (for logging)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint64</span><span class="token plain"> reward</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// count of parts of vesting stakes in the rounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint8</span><span class="token plain"> vestingParts</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// count of parts of lock stakes in the rounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint8</span><span class="token plain"> lockParts</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Flag whether to reinvest ordinary stakes and rewards</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">bool</span><span class="token plain"> reinvest</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Target tons that will be transferred to participant after rounds are completed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// After each round this value is decreased</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint64</span><span class="token plain"> withdrawValue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Request for elections from validator wallet.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">Request</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Random query id.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint64</span><span class="token plain"> queryId</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Validator&#x27;s public key that will be used as validator key if validator will win elections.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint256</span><span class="token plain"> validatorKey</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// current election id.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint32</span><span class="token plain"> stakeAt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Validator&#x27;s stake factor.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint32</span><span class="token plain"> maxFactor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Validator&#x27;s address in adnl overlay network.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint256</span><span class="token plain"> adnlAddr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Ed25519 signature of above values.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">bytes</span><span class="token plain"> signature</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>DePoolRounds.sol</code></p><div class="language-solidity codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-solidity codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// roundPre0 = m_rounds[m_roundQty - 1] — pre-pooling. Helper round for adding vesting and lock</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//                                        stakes. When vesting/lock stake is added than stake is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//                                        split into two part. And first part invested into pooling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//                                        round and second part — pre-pooling.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// round0 = m_rounds[m_roundQty - 2] — pooling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// round1 = m_rounds[m_roundQty - 3] — election or validation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// round2 = m_rounds[m_roundQty - 4] — validation or investigation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Algo of round rotation:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     delete round2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     round1         -&gt; round2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     round0         -&gt; round1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     roundPre0      -&gt; round0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     createNewRound -&gt; roundPre0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">mapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint64</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Round</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> m_rounds</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// count of created rounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint64</span><span class="token plain"> m_roundQty </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>DePoolBase.sol</code></p><div class="language-solidity codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-solidity codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Dictionary of participants for rounds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">mapping</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">address</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Participant</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> m_participants</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Address of the validator wallet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">address</span><span class="token plain"> m_validatorWallet</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Array of proxies addresses.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">address</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> m_proxies</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>DePool.sol</code></p><div class="language-solidity codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-solidity codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Indicates that pool is closed. Closed pool doesn&#x27;t accept stakes from other contracts.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">bool</span><span class="token plain"> m_poolClosed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Min stake accepted to the pool in nTon (for gas efficiency reasons): 10 tons is recommended.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint64</span><span class="token plain"> m_minStake</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Minimum validator stake in each round</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint64</span><span class="token plain"> m_validatorAssurance</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// % of participant rewards</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> m_participantRewardFraction</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// % of validator rewards</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> m_validatorRewardFraction</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// % of dePool association rewards</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> m_associationRewardFraction</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Association address</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">address</span><span class="token plain"> m_association</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Minimum balance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint64</span><span class="token plain"> m_minimumBalance</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="depool-initialization">DePool Initialization<a class="hash-link" href="#depool-initialization" title="Direct link to heading">​</a></h3><p>When deployed, the DePool constructor is called with the following parameters:</p><div class="language-solidity codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-solidity codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/// @dev DePool&#x27;s constructor.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// @param minStake Min stake that participant may have in one round.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// @param validatorAssurance Min validator stake.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// @param proxyCode Code of proxy contract.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// @param validatorWallet Address of validator wallet.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// @param participantRewardFraction % of reward that distributed among participants.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint64</span><span class="token plain"> minStake</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint64</span><span class="token plain"> validatorAssurance</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TvmCell proxyCode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">address</span><span class="token plain"> validatorWallet</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint8</span><span class="token plain"> participantRewardFraction</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At initialization the variable <code>m_balanceThreshold</code> is set as current DePool account balance — 5 tokens. DePool will replenish its balance from validation rewards to this value every round it receives rewards.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="participant-functions">Participant functions<a class="hash-link" href="#participant-functions" title="Direct link to heading">​</a></h2><p>DePool stores some participant information in a dictionary (<code>m_participants</code>) where key — Participant&#x27;s address and value — <code>Participant</code> structure.</p><p>Functions used by participants perform checks and send <code>receiveAnswer</code> message back to the caller with an error code and a comment in case of failure. If all conditions are met, DePool sends a confirmation message (<code>receiveAnswer</code> with status <code>0</code>) back to the caller.</p><p>All functions can be called by internal messages only.</p><ol><li><code>addOrdinaryStake(uint64 stake)</code> — allows to make an ordinary stake in the current pooling round. The source address of the message is taken as Participant&#x27;s address. The Participant&#x27;s total stake is increased by stake amount.</li></ol><p>Parameters:</p><ul><li><code>stake</code> — value of participant&#x27;s stake in nanotons.</li></ul><p>Function checks that:</p><ul><li>inbound message value is at least <code>(stake + ADD_STAKE_FEE)</code>;</li><li><code>stake</code> is at least min stake;</li><li>pool is not closed.</li></ul><p>Function returns change (part of unused <code>ADD_STAKE_FEE</code>).</p><ol start="2"><li><code>addVestingStake(uint64 stake, address beneficiary, uint32 withdrawalPeriod, uint32 totalPeriod)</code> — allows to add a vesting stake for another participant (<strong>beneficiary</strong>). The source address of the message is saved as the vesting stake owner.</li></ol><p>Parameters:</p><ul><li><code>stake</code> — value of participant&#x27;s stake in nanotons (Note: this value is divided into 2 parts and is added to 2 rounds).</li><li><code>beneficiary</code> — address of target participant (beneficiary);</li><li><code>withdrawalPeriod</code> — the period in seconds after which the part of the vesting becomes available for beneficiary;</li><li><code>totalPeriod</code> — total period of vesting in seconds after which beneficiary becomes owner of the whole stake.</li></ul><p>Function checks that:</p><ul><li>DePool is not closed (<code>m_poolClosed</code> ≠ true);</li><li><code>beneficiary</code> is an <code>addr_std</code>. It&#x27;s not zero address. It&#x27;s not the message sender (not self vesting);</li><li>inbound <code>msg.value ≥ (m_minStake + ADD_STAKE_FEE)</code>;</li><li>Message value is at least <code>stake + STAKE_FEE</code>;</li><li><code>stake / 2</code> is at least min stake;</li><li><code>withdrawalPeriod ≤ totalPeriod</code>;</li><li><code>totalPeriod &lt; 18 years</code>;</li><li><code>withdrawalPeriod ≠ 0</code>;</li><li><code>totalPeriod % withdrawalPeriod = 0</code>;</li><li><code>beneficiary</code> doesn&#x27;t have a vesting stake.</li></ul><ol start="3"><li><code>addLockStake(uint64 stake, address beneficiary, uint32 withdrawalPeriod, uint32 totalPeriod)</code> — allows to add a stake that will bring rewards to another participant (<strong>beneficiary</strong>). The source address of the message is saved as the lock stake owner.</li></ol><p>It has the same parameters and checks as <code>addVestingStake</code>, but it checks that participant doesn&#x27;t have a lock stake instead of a vesting stake.</p><ol start="4"><li><code>withdrawFromPoolingRound(uint64 withdrawValue)</code> — allows to remove Participant&#x27;s stake from the current pooling round.</li></ol><p>Parameters:</p><ul><li><code>withdrawValue</code> — desired amount of stake to be removed.</li></ul><p>Function checks that:</p><ul><li>inbound <code>msg.sender</code> address is address of an existing participant.</li></ul><p>If real ordinary stake is less than <code>withdrawValue</code>, then DePool returns the whole stake from pooling round.</p><p>If the remaining stake in the pooling round is less than <code>m_minStake</code>, then the whole stake is transferred to Participant.</p><p>If the remaining total stake of Participant is 0, then it is removed from the <code>m_stakeholders</code> dictionary.</p><ol start="5"><li><code>withdrawPart(uint64 withdrawValue)</code> — Allows a participant to withdraw some value from DePool. This function withdraws withdrawValue nanotons when rounds are completed. If participant stake becomes less than minStake, then the whole stake is sent to participant.</li></ol><p>Parameters:</p><ul><li><code>withdrawValue</code> — desired amount of stake to be removed.</li></ul><p>Function checks that:</p><ul><li>pool is not closed (<code>m_poolClosed ≠ true</code>);</li><li>inbound <code>msg.sender</code> address is address of an existing participant.</li></ul><blockquote><p>If the remaining stake in the round is less than <code>m_minStake</code>, then the whole stake will be transferred to Participant (after completing round).
If the remaining total stake of Participant is 0, then it is removed from the <code>m_stakeholders</code> dictionary.
6. <code>withdrawAll()</code> — Set global flag for the participant that indicates to return participant&#x27;s ordinary stake after completing rounds.</p></blockquote><p>Function checks that:</p><ul><li>pool is not closed (<code>m_poolClosed ≠ true</code>);</li><li>inbound msg.sender address is address of an existing participant.<blockquote><p>After transferring all Participant&#x27;s stake, the Participant will be removed from the m_stakeholders dictionary.</p></blockquote></li></ul><ol start="7"><li><p><code>cancelWithdrawal()</code> — Cancel effect of calls of functions <code>withdrawAll</code> and <code>withdrawPart</code>.</p></li><li><p><code>transferStake(address dest, uint64 amount)</code> — allows to move amount of stake from <code>msg.sender</code> Participant to <code>dest</code> Participant inside DePool storage.</p></li></ol><p>Parameters:</p><ul><li><code>dest</code> — stake beneficiary;</li><li><code>amount</code> — stake value transferred to dest in nanotons.</li></ul><p>Function checks that:</p><ul><li>pool is not closed (<code>m_poolClosed ≠ true</code>);</li><li><code>destination</code> is a non-zero <code>addr_std</code>;</li><li><code>msg.sender ≠ dest</code>;</li><li>neither <code>destination</code> nor <code>msg.sender</code> is the validator wallet;</li><li>inbound <code>msg.sender</code> address is address of an existing participant;</li><li>desired <code>amount</code> can be transferred and transfer doesn&#x27;t leave stake less than <code>m_minStake</code> in any round.<blockquote><p>In case of success DePool sends back a notification via onTransfer function calling to beneficiary.</p></blockquote></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="functions-of-interface-depoolinfogetter">Functions of interface DePoolInfoGetter:<a class="hash-link" href="#functions-of-interface-depoolinfogetter" title="Direct link to heading">​</a></h3><p><code>function getLastRoundInfo() public</code></p><p>If there is no completed round yet, call callback function <code>receiveDePoolInfo</code> with struct containing default values, else send call with struct containing info about last completed round.</p><div class="language-solidity codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-solidity codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Represent info about last completed round</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">LastRoundInfo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint32</span><span class="token plain"> supposedElectedAt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint8</span><span class="token plain"> participantRewardFraction</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint8</span><span class="token plain"> validatorRewardFraction</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint32</span><span class="token plain"> participantQty</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint64</span><span class="token plain"> roundStake</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">address</span><span class="token plain"> validatorWallet</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint256</span><span class="token plain"> validatorPubkey</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint64</span><span class="token plain"> validatorAssurance</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="participant-callback-functions">Participant callback functions:<a class="hash-link" href="#participant-callback-functions" title="Direct link to heading">​</a></h3><p>These functions are called by DePool to send notifications to Participant.</p><ol><li><code>receiveAnswer(uint32 errcode, uint64 comment)</code> — function, which is called as an answer from DePool to Participant.</li></ol><p>Arguments:</p><ul><li><code>errcode</code> — error code. List of codes:</li></ul><div class="language-solidity codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-solidity codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_SUCCESS                                        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_STAKE_TOO_SMALL                                </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_DEPOOL_CLOSED                                  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_NO_PARTICIPANT                                 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_PARTICIPANT_HAVE_ALREADY_VESTING               </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_WITHDRAWAL_PERIOD_GREATER_TOTAL_PERIOD         </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_TOTAL_PERIOD_MORE_18YEARS                      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_WITHDRAWAL_PERIOD_IS_ZERO                      </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_TOTAL_PERIOD_IS_NOT_DIVED_BY_WITHDRAWAL_PERIOD </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_PERIOD_PAYMENT_IS_ZERO                         </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_REMAINING_STAKE_LESS_THAN_MINIMAL              </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_PARTICIPANT_HAVE_ALREADY_LOCK                  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_TRANSFER_AMOUNT_IS_TOO_BIG                     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_TRANSFER_SELF                                  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">19</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_TRANSFER_TO_OR_FROM_VALIDATOR                  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_FEE_TOO_SMALL                                  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_INVALID_ADDRESS                                </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_INVALID_BENEFICIARY                            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_NO_ELECTION_ROUND                              </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">24</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constant</span><span class="token plain"> STATUS_INVALID_ELECTION_ID                            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>comment</code> — some value attached to error code.</li></ul><ol start="2"><li><code>onTransfer(address source, uint128 amount)</code> — function, which is called after successful <code>transferStake</code> to inform beneficiary.</li></ol><p>Arguments:</p><ul><li><code>source</code> — address of Participant who made transfer;</li><li><code>amount</code> — funds that were transferred.</li></ul><ol start="3"><li><code>onRoundComplete(uint64 roundId, uint64 reward, uint64 ordinaryStake, uint64 vestingStake, uint64 lockStake, bool reinvest, uint8 reason)</code> — send a notification from DePool to Participant when round is completed:</li></ol><ul><li><code>roundId</code> — Id of completed round;</li><li><code>reward</code> — Participant&#x27;s reward in completed round in nanotons;</li><li><code>ordinaryStake</code> — ordinary stake in completed round;</li><li><code>vestingStake</code> — vesting stake in completed round;</li><li><code>lockStake</code> — lock stake in completed round;</li><li><code>reinvest</code> — are ordinary stakes automatically reinvested (prolonged)?</li><li><code>reason</code> — reason why round is completed (See enum CompletionReason).</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="depool-owner-functions">DePool owner functions:<a class="hash-link" href="#depool-owner-functions" title="Direct link to heading">​</a></h2><p>These functions can be called only by the DePool owner, <strong>as they have to be signed with the deploy keypair</strong>.</p><ol><li><code>terminator()</code> <!-- -->[external msg only]<!-- --> — a method to close DePool. All stakes from all rounds are returned in several phases:</li></ol><p>a. first of all, stakes from pooling round are returned immediately.
b.<code>m_poolClosed = true</code>;
c. All other rounds will return stakes after their &quot;completed&quot; step.</p><blockquote><p><strong>Important:</strong> remaining parts of vesting/lock stakes will be sent to owners of those stakes (not to beneficiaries)</p></blockquote><ol start="2"><li><code>setValidatorRewardFraction(uint8 fraction)</code> <strong>[external msg only]</strong></li></ol><p>Sets new validator&#x27;s reward fraction and calculates new participants&#x27; reward fraction. New validator&#x27;s reward fraction must be less than current one and be not zero.</p><p><code>fraction</code> — new validator&#x27;s reward fraction.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="events">Events<a class="hash-link" href="#events" title="Direct link to heading">​</a></h3><ul><li><code>DePoolClosed()</code> — event emitted when pool is closed by terminator() function.</li><li><code>RoundStakeIsAccepted(uint64 queryId, uint32 comment)</code> — event is emitted on accepting stake by elector.</li><li><code>RoundStakeIsRejected(uint64 queryId, uint32 comment)</code> — event is emitted on rejecting stake by elector.</li><li><code>ProxyHasRejectedTheStake(uint64 queryId)</code> — event is emitted if stake is returned by proxy (IProxy.process_new_stake) because too low balance of proxy contract.</li><li><code>ProxyHasRejectedRecoverRequest(uint64 roundId)</code> — event is emitted if stake cannot be returned from elector (IProxy.recover_stake) because too low balance of proxy contract.</li><li><code>RoundCompleted(TruncatedRound round)</code> — event is emitted on completing round.</li><li><code>StakeSigningRequested(uint32 electionId, address proxy)</code> — Event emitted when round is switched from pooling to election. DePool is waiting for signed election request from validator wallet.</li><li><code>TooLowDePoolBalance(uint replenishment)</code> — event emitted when pure DePool&#x27;s balance becomes too low. replenishment minimal value that must be sent to DePool via receiveFunds function.</li><li><code>RewardFractionsChanged(uint8 validator, uint8 participants)</code> — event emitted when contract owner changes reward fractions. validator — validator&#x27;s reward fraction. participants — participants&#x27; reward fraction.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="get-methods">Get-methods<a class="hash-link" href="#get-methods" title="Direct link to heading">​</a></h2><p>These get-methods are used for local run.</p><ol><li><code>getParticipantInfo(address addr)</code> — returns participant&#x27;s information about stakes in every rounds;</li><li><code>getDePoolInfo()</code> — returns DePool configuration parameters and constants;</li><li><code>getParticipants()</code> — return list of all participants;</li><li><code>getRounds()</code> — returns information about all rounds.</li><li><code>getDePoolBalance()</code> — returns DePool&#x27;s own balance in nanotokens.</li></ol><blockquote><p>The DePool does not store validator public keys or ADNL address, because, according to the official Everscale guide, the Validator generates a new keypair and ADNL for every elections. The contract stores only Validator wallet address.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="state-update-function">State update function<a class="hash-link" href="#state-update-function" title="Direct link to heading">​</a></h2><p><code>ticktock()</code> — this function is the &quot;engine&quot; of DePool. This function rotates rounds: creates a new round if necessary and removes an old one. Switches steps of rounds and calls various internal functions if certain conditions are satisfied and so on.</p><p><code>ticktock()</code> — does not <code>accept</code> external inbound messages and can be called only from other contracts <code>ticktock</code> returns unspent message value (change) back to caller.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="multi-round-elections">Multi-Round elections<a class="hash-link" href="#multi-round-elections" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Multi-Round elections" src="/assets/images/multi-round-elections-18455b71b86973aa66b9b03aa8a095c6.png" width="1033" height="144" class="img_E7b_"></p><p>Every round goes through several steps:</p><ol><li><strong>&quot;PrePooling&quot;</strong> step (RoundStep.PrePooling) — it&#x27;s an imaginary round introduced to store half of vesting/lock stake from participants. See <code>addVestingStake/addLockStake</code> functions.</li><li><strong>&quot;Pooling&quot;</strong> step (RoundStep.Pooling) — round is ready to accept stakes from Participants. This round receives ordinary, vesting and lock stakes.</li><li><strong>&quot;waiting for election requests&quot;</strong> step (RoundStep.WaitingValidatorRequest) — round is switched to this step when validator elections begin. DePool is waiting for signed election request from validator wallet. See <code>process_new_stake</code> function of <a href="https://github.com/tonlabs/ton-1/blob/master/crypto/smartcont/elector-code.fc" target="_blank" rel="noopener noreferrer">Elector</a> to properly generate election request.<blockquote><p><strong>Important:</strong> Validator wallet must also be a Participant and invest at least <code>m_validatorAssurance</code> stake in the round. If it doesn&#x27;t, round is completed and stakes are reinvested in another round or are returned to participants.</p></blockquote></li><li><strong>&quot;Waiting if stake is accepted by elector&quot;</strong> (RoundStep.WaitingIfStakeAccepted) — DePool has received the validator signed election request. DePool has sent the whole round stake to elector through one of its proxies. Now DePool is waiting for elector answer. Note: elector will call DePool&#x27;s <code>onStakeAccept</code> function if election request is accepted successfully or <code>onStakeReject</code> in case of an error.</li><li><strong>&quot;waiting for validation start&quot;</strong> (RoundStep.WaitingValidationStart) — round stake was accepted by elector. Validator is a candidate. DePool now is waiting for the start of the validation to find out if validator won the elections.</li><li><strong>&quot;waiting for election result&quot;</strong> (RoundStep.WaitingIfValidatorWinElections) — DePool has tried to recover stake in validation period to find out if validator won elections. Waiting for elector answer. Note: If validator won the elections, elector returns no stake. If Validator lost the elections, elector returns the whole stake.</li><li><strong>&quot;waiting stake unfreeze&quot;</strong> (RoundStep.WaitingUnfreeze) — If <code>CompletionReason != Undefined</code>, the round is waiting round rotation to return/reinvest funds because elections were lost. Else validator won elections. DePool is waiting for ending of unfreeze period to recover funds from elector.</li><li><strong>&quot;waiting for a reward&quot;</strong> (RoundStep.WaitingReward) — Unfreeze period has been ended. Request to recover stake has been sent to elector. DePool is waiting for answer from elector.</li><li><strong>&quot;completing&quot;</strong> step (RoundStep.Completing) — DePool receives reward and replenishes its balance from it. Then it returns or reinvests participant&#x27;s stakes. Also on this step DePool recounts vesting and lock stakes and modifies them if necessary.</li><li><strong>&quot;completed&quot;</strong> (RoundStep.Completed) — round switches to this step after processing all the Participants in the round. In next <code>ticktock</code> this round will be deleted.</li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="round-completion">Round completion<a class="hash-link" href="#round-completion" title="Direct link to heading">​</a></h2><p>When a round switches to &quot;completing&quot; step (<code>completeRound</code> function), the DePool replenishes its balance from received rewards and then starts to cycle through all stakes in the round. If Participant&#x27;s reinvestment flag is <code>false</code>, DePool sends it back to the Participant, otherwise — adds it to the pooling round. Also DePool sends notification message (<code>onRoundComplete</code>) to Participant.</p><p>DePool goes through all vesting and lock stakes of the completing round and checks whether a withdrawal period has finished for the current stake. If it has, DePool modifies the stake via transferring part of it to Participants ordinary stake (in case of Vesting) and/or transferring part of the stake back to the owner (in case of Lock or in case of Vesting for validator which was slashed or lost elections over the course of the completed withdrawal period).</p><blockquote><p><strong>Remark:</strong> if there are 15000 stakes in round, then the contract should split completion to 375 transactions sending 375 <code>completePendingRound</code> messages to itself. All these transactions can fit in 1-2 blocks and the whole operation will take about 5-20 seconds.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="depool-decentralization">DePool decentralization<a class="hash-link" href="#depool-decentralization" title="Direct link to heading">​</a></h2><ol><li>No inherent way to replace the contract code (no SETCODE);</li><li>No inherent way to transfer an arbitrary amount of currency from the DePool;</li><li>Any contract can call the <code>ticktock()</code> function to update the state of the DePool;</li><li>No one has special privileges, except for deployer of DePool who can only close DePool and start a procedure of returning all stakes back to Participants;</li><li>Fees cannot be changed after the contract is deployed;</li><li>Validator wallet must be a Participant as well to share risks with other Participants.</li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="depool-contract-fee">DePool contract fee<a class="hash-link" href="#depool-contract-fee" title="Direct link to heading">​</a></h2><p>Caller of DePool&#x27;s <code>ticktock</code> function must pay for consumed gas. Unused message value is returned back when <code>ticktock</code> is finished.
At the beginning of completing step DePool first takes from the total reward an amount of tokens to replenish it&#x27;s balance to <code>m_balanceThreshold</code>, and then additionally <code>RET_OR_REINV_FEE * (N + 1)</code>, where <code>N</code> is the number of participants, to cover the costs of stake processing.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="links">Links<a class="hash-link" href="#links" title="Direct link to heading">​</a></h2><p>DePool contract is available on <a href="https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/depool" target="_blank" rel="noopener noreferrer">github</a>.</p><p>DePool deployment instructions can be found <a href="https://docs.ton.dev/86757ecb2/v/0/p/37a848-run-depool" target="_blank" rel="noopener noreferrer">here</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/everscale-org/docs/edit/main/.build/website/../../src/learn/decentralization/depool-specifications.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-06-01T11:31:16.000Z">6/1/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/learn/decentralization/end-to-end-decentralization"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">End-to-end Decentralization</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/learn/decentralization/debot-specifications"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DeBot Specifications</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#basic-terms" class="table-of-contents__link toc-highlight">Basic terms</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#special-kinds-of-stakes" class="table-of-contents__link toc-highlight">Special kinds of stakes</a><ul><li><a href="#vesting-stake" class="table-of-contents__link toc-highlight">Vesting Stake</a></li><li><a href="#lock-stake" class="table-of-contents__link toc-highlight">Lock Stake</a></li></ul></li><li><a href="#specification" class="table-of-contents__link toc-highlight">Specification</a><ul><li><a href="#data-structures" class="table-of-contents__link toc-highlight">Data Structures</a></li><li><a href="#depool-initialization" class="table-of-contents__link toc-highlight">DePool Initialization</a></li></ul></li><li><a href="#participant-functions" class="table-of-contents__link toc-highlight">Participant functions</a><ul><li><a href="#functions-of-interface-depoolinfogetter" class="table-of-contents__link toc-highlight">Functions of interface DePoolInfoGetter:</a></li><li><a href="#participant-callback-functions" class="table-of-contents__link toc-highlight">Participant callback functions:</a></li></ul></li><li><a href="#depool-owner-functions" class="table-of-contents__link toc-highlight">DePool owner functions:</a><ul><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a></li></ul></li><li><a href="#get-methods" class="table-of-contents__link toc-highlight">Get-methods</a></li><li><a href="#state-update-function" class="table-of-contents__link toc-highlight">State update function</a></li><li><a href="#multi-round-elections" class="table-of-contents__link toc-highlight">Multi-Round elections</a></li><li><a href="#round-completion" class="table-of-contents__link toc-highlight">Round completion</a></li><li><a href="#depool-decentralization" class="table-of-contents__link toc-highlight">DePool decentralization</a></li><li><a href="#depool-contract-fee" class="table-of-contents__link toc-highlight">DePool contract fee</a></li><li><a href="#links" class="table-of-contents__link toc-highlight">Links</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://everscale-org.github.io/Calendar/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Event Calendar<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/everscale-org/job/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Jobs and Vacancy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://mitja.gitbook.io/everscale-white-paper/" target="_blank" rel="noopener noreferrer" class="footer__link-item">White Paper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://mitja.gitbook.io/everscale-lite-paper/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Lite Paper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/Everscale_community/search?query=Weekly%20Meetup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Weekly Meetup<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://everscale.network/about/brand" target="_blank" rel="noopener noreferrer" class="footer__link-item">Visual Brand Identity<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gov.gramkit.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subgovernances<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://everscale.network/developers/grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/EverscaleGuild/bounties/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bounties<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/EverscaleSmartContracts" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart Contracts Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/ever_validators" target="_blank" rel="noopener noreferrer" class="footer__link-item">Everscale Validators Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/EverscaleIncubator" target="_blank" rel="noopener noreferrer" class="footer__link-item">Incubator Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/everscaledebots" target="_blank" rel="noopener noreferrer" class="footer__link-item">DeBots Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/ever_sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDK Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/everscale" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Workshop</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/develop/smart-contract/getting-started/">Tutorial</a></li><li class="footer__item"><a href="https://youtu.be/XKMnroPWXek" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart contract-architecture<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://youtu.be/YBIaFeaksMY" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart-contract development<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/playlist?list=PLPj4C8ti8UaSPAP6afsy0wQ53lihBT5l1" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Course<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://youtu.be/vFAatJO6cBM" target="_blank" rel="noopener noreferrer" class="footer__link-item">Development of DeBots<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/EverVoice" target="_blank" rel="noopener noreferrer" class="footer__link-item">Voice Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/tonlabs/samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample smart-contracts<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/sdk-samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tonlabs.gitbook.io/appkit-js/" target="_blank" rel="noopener noreferrer" class="footer__link-item">JS Application Kit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/TON-Solidity-Compiler/blob/master/API.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Solidity API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.ton.dev/86757ecb2/p/40ba94-abi-specification-v2" target="_blank" rel="noopener noreferrer" class="footer__link-item">ABI Specification<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/True-NFT" target="_blank" rel="noopener noreferrer" class="footer__link-item">NFT<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/tonos-cli" target="_blank" rel="noopener noreferrer" class="footer__link-item">CLI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tonlabs.gitbook.io/ton-sdk/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2020—2022
 <a href="https://everscale.network/">Everscale</a> All rights reserved
  <a href="https://t.me/everscale">Touch</a>
 <br>
 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
    <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
 </a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.d5c4d33d.js"></script>
<script src="/assets/js/main.a4ca7bb1.js"></script>
</body>
</html>