"use strict";(self.webpackChunkeverscale_docs_website=self.webpackChunkeverscale_docs_website||[]).push([[8173],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return f}});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var r=n.createContext({}),d=function(e){var t=n.useContext(r),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(r.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,l=e.originalType,r=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(a),f=o,m=u["".concat(r,".").concat(f)]||u[f]||p[f]||l;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function f(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=a.length,i=new Array(l);i[0]=u;var s={};for(var r in t)hasOwnProperty.call(t,r)&&(s[r]=t[r]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var d=2;d<l;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9369:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return r},default:function(){return f},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return p}});var n=a(7462),o=a(3366),l=(a(7294),a(3905)),i=["components"],s={sidebar_position:9},r="TONOS-CLI",d={unversionedId:"develop/api-tools/everdev/tonos-cli",id:"develop/api-tools/everdev/tonos-cli",title:"TONOS-CLI",description:"Referenced repository//github.com/tonlabs/tonos-cli",source:"@site/../../src/develop/api-tools/everdev/tonos-cli.md",sourceDirName:"develop/api-tools/everdev",slug:"/develop/api-tools/everdev/tonos-cli",permalink:"/develop/api-tools/everdev/tonos-cli",draft:!1,editUrl:"https://github.com/everscale-org/docs/edit/main/.build/website/../../src/develop/api-tools/everdev/tonos-cli.md",tags:[],version:"current",lastUpdatedAt:1654263185,formattedLastUpdatedAt:"6/3/2022",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Ever Cloud",permalink:"/develop/api-tools/everdev/ever-cloud"},next:{title:"TON Wallet Api",permalink:"/develop/api-tools/everdev/ton-wallet-api"}},c={},p=[{value:"About TONOS-CLI",id:"about-tonos-cli",level:2},{value:"Install compiled executable",id:"install-compiled-executable",level:2},{value:"Install through EVERDEV",id:"install-through-everdev",level:2},{value:"Build from source",id:"build-from-source",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Build from source on Linux and Mac OS",id:"build-from-source-on-linux-and-mac-os",level:3},{value:"Build from source on Windows",id:"build-from-source-on-windows",level:3},{value:"Windows debug build troubleshooting",id:"windows-debug-build-troubleshooting",level:3},{value:"Tails OS secure environment",id:"tails-os-secure-environment",level:3},{value:"Put TONOS-CLI into system environment",id:"put-tonos-cli-into-system-environment",level:3},{value:"Check version",id:"check-version",level:2},{value:"A note on Windows syntax",id:"a-note-on-windows-syntax",level:2},{value:"2.1. Set the network and parameter values",id:"21-set-the-network-and-parameter-values",level:2},{value:"2.2. Check configuration",id:"22-check-configuration",level:2},{value:"2.3. Clear configuration",id:"23-clear-configuration",level:2},{value:"2.4. Configure endpoints map",id:"24-configure-endpoints-map",level:2},{value:"2.5. Override configuration file location",id:"25-override-configuration-file-location",level:2},{value:"2.6. Override network settings",id:"26-override-network-settings",level:2},{value:"2.7. Force json output",id:"27-force-json-output",level:2},{value:"2.8. Debug on fail option",id:"28-debug-on-fail-option",level:2},{value:"3.1. Create seed phrase",id:"31-create-seed-phrase",level:2},{value:"3.2. Generate public key",id:"32-generate-public-key",level:2},{value:"3.3. Generate key pair file",id:"33-generate-key-pair-file",level:2},{value:"4.1. Generate contract address",id:"41-generate-contract-address",level:2},{value:"4.2. Deploy contract",id:"42-deploy-contract",level:2},{value:"4.3. Generate deploy message offline",id:"43-generate-deploy-message-offline",level:2},{value:"4.3. Get contract status",id:"43-get-contract-status",level:2},{value:"4.4. Call method",id:"44-call-method",level:2},{value:"4.4.1. Call contract on the blockchain",id:"441-call-contract-on-the-blockchain",level:3},{value:"4.4.2. Alternative command to call contract in the blockchain",id:"442-alternative-command-to-call-contract-in-the-blockchain",level:3},{value:"4.4.3. Run contract method locally",id:"443-run-contract-method-locally",level:3},{value:"4.4.4. Run funC get-method",id:"444-run-func-get-method",level:3},{value:"4.4.5. Run contract method locally for saved account BOC",id:"445-run-contract-method-locally-for-saved-account-boc",level:3},{value:"4.5. Generate encrypted message offline",id:"45-generate-encrypted-message-offline",level:2},{value:"4.6. Broadcast previously generated message",id:"46-broadcast-previously-generated-message",level:2},{value:"4.7. Broadcast previously generated message from a file",id:"47-broadcast-previously-generated-message-from-a-file",level:2},{value:"4.8. Decode commands",id:"48-decode-commands",level:2},{value:"4.8.1. Decode BOC file",id:"481-decode-boc-file",level:3},{value:"4.8.2. Decode message body",id:"482-decode-message-body",level:3},{value:"4.8.3. Decode account commands",id:"483-decode-account-commands",level:3},{value:"4.8.3.1. Decode account data fields",id:"4831-decode-account-data-fields",level:4},{value:"4.8.3.2. Decode data from the account BOC file",id:"4832-decode-data-from-the-account-boc-file",level:4},{value:"4.8.4. Decode stateInit fields",id:"484-decode-stateinit-fields",level:3},{value:"4.9. Generate payload for internal function call",id:"49-generate-payload-for-internal-function-call",level:2},{value:"4.10. Alternative syntax for call, deploy and run commands",id:"410-alternative-syntax-for-call-deploy-and-run-commands",level:2},{value:"6.1. Send tokens",id:"61-send-tokens",level:2},{value:"7.1. Configure TONOS-CLI for DePool operations",id:"71-configure-tonos-cli-for-depool-operations",level:2},{value:"7.2. Deposit stakes",id:"72-deposit-stakes",level:2},{value:"7.2.1. Ordinary stake",id:"721-ordinary-stake",level:3},{value:"7.2.2. Vesting stake",id:"722-vesting-stake",level:3},{value:"7.2.3. Lock stake",id:"723-lock-stake",level:3},{value:"7.3. Remove stakes",id:"73-remove-stakes",level:2},{value:"7.4. Transfer stakes",id:"74-transfer-stakes",level:2},{value:"7.5. Withdraw Stakes",id:"75-withdraw-stakes",level:2},{value:"7.5.1. Withdraw entire stake",id:"751-withdraw-entire-stake",level:3},{value:"7.5.2. Withdraw part of the stake",id:"752-withdraw-part-of-the-stake",level:3},{value:"7.6. Reinvest Stakes",id:"76-reinvest-stakes",level:2},{value:"7.7. Read DePool answers",id:"77-read-depool-answers",level:2},{value:"7.8. View DePool events",id:"78-view-depool-events",level:2},{value:"7.9. Replenish DePool balance",id:"79-replenish-depool-balance",level:2},{value:"7.10. Send ticktock to DePool",id:"710-send-ticktock-to-depool",level:2},{value:"8.1. Create proposal and cast the first vote",id:"81-create-proposal-and-cast-the-first-vote",level:2},{value:"8.2. Vote for proposal",id:"82-vote-for-proposal",level:2},{value:"8.3. Decode proposal comment",id:"83-decode-proposal-comment",level:2},{value:"9.1. Convert tokens to nanotokens",id:"91-convert-tokens-to-nanotokens",level:2},{value:"9.2. Get global config",id:"92-get-global-config",level:2},{value:"9.3. NodeID",id:"93-nodeid",level:2},{value:"9.4. Dump blockchain config",id:"94-dump-blockchain-config",level:2},{value:"9.5. Dump several account states",id:"95-dump-several-account-states",level:2},{value:"9.6. Wait for account change",id:"96-wait-for-account-change",level:2},{value:"9.7. Make a raw GraphQL query",id:"97-make-a-raw-graphql-query",level:2},{value:"10. Fetch and replay",id:"10-fetch-and-replay",level:2},{value:"10.1. How to unfreeze account",id:"101-how-to-unfreeze-account",level:3},{value:"11.1. Debug transaction",id:"111-debug-transaction",level:2},{value:"11.2. Debug call",id:"112-debug-call",level:2},{value:"11.3. Debug run",id:"113-debug-run",level:2},{value:"11.4. Debug replay transaction on the saved account state",id:"114-debug-replay-transaction-on-the-saved-account-state",level:2},{value:"11.5 Debug deploy",id:"115-debug-deploy",level:2}],u={toc:p};function f(e){var t=e.components,a=(0,o.Z)(e,i);return(0,l.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"tonos-cli"},"TONOS-CLI"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Referenced repository: ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/tonos-cli"},"https://github.com/tonlabs/tonos-cli"))),(0,l.kt)("h2",{id:"about-tonos-cli"},"About TONOS-CLI"),(0,l.kt)("p",null,"TONOS-CLI is a multi-platform command line interface for EVER OS. It allows you to work with keys and seed phrases, deploy contracts, call any of their methods, generate and broadcast messages. It supports specific commands for DeBot, DePool and Multisig contracts, as well as a number of supplementary functions."),(0,l.kt)("p",null,"To access built-in help, use ",(0,l.kt)("inlineCode",{parentName:"p"},"--help")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"-h")," flag:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli --help\ntonos-cli <subcommand> -h\n")),(0,l.kt)("h1",{id:"1-installation"},"1. Installation"),(0,l.kt)("h2",{id:"install-compiled-executable"},"Install compiled executable"),(0,l.kt)("p",null,"Create a folder. Download the ",(0,l.kt)("inlineCode",{parentName:"p"},".zip")," file from the latest release from here: ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/tonos-cli/releases"},"https://github.com/tonlabs/tonos-cli/releases")," to this folder. Extract it."),(0,l.kt)("h2",{id:"install-through-everdev"},"Install through EVERDEV"),(0,l.kt)("p",null,"You can use ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/everdev"},"EVERDEV")," to install the latest version of TONOS-CLI."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"everdev tonos-cli install\n")),(0,l.kt)("p",null,"The installer requires ",(0,l.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/downloading-and-installing-node-js-and-npm"},"NPM")," to be installed, so it can install packages globally without using sudo. In case of error, manually set environment variable ",(0,l.kt)("inlineCode",{parentName:"p"},"PATH=$PATH:$HOME./everdev/solidity")),(0,l.kt)("p",null,"This command updates TONOS-CLI installed through EVERDEV to the latest version:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"everdev tonos-cli update\n")),(0,l.kt)("p",null,"This command specifies TONOS-CLI version to use and downloads it if needed:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"everdev tonos-cli set --version 0.8.0\n")),(0,l.kt)("h2",{id:"build-from-source"},"Build from source"),(0,l.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.rust-lang.org/tools/install"},"Rust")," latest version"),(0,l.kt)("li",{parentName:"ul"},"OpenSSL")),(0,l.kt)("p",null,"For Linux:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt-get install libssl-dev (openssl-devel on Fedora)\nsudo apt-get install pkg-config\n")),(0,l.kt)("h3",{id:"build-from-source-on-linux-and-mac-os"},"Build from source on Linux and Mac OS"),(0,l.kt)("p",null,"Install Cargo: ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/rust-lang/cargo#compiling-from-source"},"https://github.com/rust-lang/cargo#compiling-from-source")),(0,l.kt)("p",null,"Build TONOS-CLI tool from source:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/tonlabs/tonos-cli.git\ncd tonos-cli\ncargo update\ncargo build --release\ncd target/release\n")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli")," executable is built in the ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli/target/release")," folder. Create a folder elsewhere. Copy the ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli")," executable into the new folder you have created."),(0,l.kt)("h3",{id:"build-from-source-on-windows"},"Build from source on Windows"),(0,l.kt)("p",null,"Install Cargo: ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/rust-lang/cargo#compiling-from-source"},"https://github.com/rust-lang/cargo#compiling-from-source")),(0,l.kt)("p",null,"Build TONOS-CLI tool from source:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"> git clone https://github.com/tonlabs/tonos-cli.git\n> cd tonos-cli\n> cargo update\n> cargo build --release\n> cd target/release\n")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli")," executable is built in the ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli/target/release")," folder. Create a folder elsewhere. Copy the ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli")," executable into the new folder you have created."),(0,l.kt)("h3",{id:"windows-debug-build-troubleshooting"},"Windows debug build troubleshooting"),(0,l.kt)("p",null,"Default debug executable built after ",(0,l.kt)("inlineCode",{parentName:"p"},"cargo build")," command may have an issue with binary default stack size:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"> cargo build\nFinished dev [unoptimized + debuginfo] target(s) in 0.66s\n> .\\target\\debug\\tonos-cli.exe --version\nthread 'main' has overflowed its stack\n")),(0,l.kt)("p",null,"User can fix this issue by using ",(0,l.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/ru-ru/cpp/build/reference/editbin-reference?view=msvc-170"},"editbin tool from MSVC Tools"),". This tool allows user to\nincrease binary stack reserve. Increase it by 2 times will help to fix tonos-cli:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"> editbin /STACK:2097152 tonos-cli.exe\nMicrosoft (R) COFF/PE Editor Version 14.28.29914.0\nCopyright (C) Microsoft Corporation.  All rights reserved.\n> tonos-cli.exe --version\ntonos_cli 0.26.7\nCOMMIT_ID: 1e1397b5561ea79d2fd7cce47cd033450b123f25\nBUILD_DATE: Unknown\nCOMMIT_DATE: 2022-05-13 14:15:47 +0300\nGIT_BRANCH: master\n")),(0,l.kt)("h3",{id:"tails-os-secure-environment"},"Tails OS secure environment"),(0,l.kt)("p",null,"For maximum security while working with offline TONOS-CLI features (such as cryptographic commands or encrypted message generation), you can use the ",(0,l.kt)("a",{parentName:"p",href:"https://tails.boum.org/"},"Tails OS"),"."),(0,l.kt)("h3",{id:"put-tonos-cli-into-system-environment"},"Put TONOS-CLI into system environment"),(0,l.kt)("p",null,"Optional, Linux/Mac OS. Use the following command to put the utility into system environment:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'export PATH="<tonos_folder_path>:$PATH"\n')),(0,l.kt)("p",null,"This step can be skipped, if TONOS-CLI was installed through EVERDEV. Otherwise, if you skip this step, make sure you always run the utility from folder containing the utility:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"./tonos-cli <command> <options>\n")),(0,l.kt)("h2",{id:"check-version"},"Check version"),(0,l.kt)("p",null,"You can check version of the current TONOS-CLI installation with the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli version\n")),(0,l.kt)("p",null,"Output example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli version\nConfig: default\ntonos-cli 0.2.0\nCOMMIT_ID: 21ebd53c35bf22696bf1eb434e408ed33318136a\nBUILD_DATE: 2021-01-26 15:06:18 +0300\nCOMMIT_DATE: 2021-01-14 16:13:32 +0300\nGIT_BRANCH: master\n")),(0,l.kt)("h2",{id:"a-note-on-windows-syntax"},"A note on Windows syntax"),(0,l.kt)("p",null,"When using Windows command line, the following syntax should be used for all TONOS-CLI commands:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Never use the ",(0,l.kt)("inlineCode",{parentName:"li"},"./")," symbols before ",(0,l.kt)("inlineCode",{parentName:"li"},"tonos-cli"),":")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"> tonos-cli <command_name> <options>\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"For all commands with nested quotes, the outer single quotes should be changed to double quotes, and the inner double quotes should be shielded by a preceding ",(0,l.kt)("inlineCode",{parentName:"li"},"\\"),". Example:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'> tonos-cli deploy SafeMultisigWallet.tvc "{\\"owners\\":[\\"0x723b2f0fa217cd10fe21326634e66106678f15d5a584babe4f576dffe9dcbb1b\\",\\"0x127e3ca223ad429ddaa053a39fecd21131df173bb459a4438592493245b695a3\\",\\"0xc2dd3682ffa9df97a968bef90b63da90fc92b22163f558b63cb7e52bfcd51bbb\\"],\\"reqConfirms\\":2}" --abi SafeMultisigWallet.abi.json --sign deploy.keys.json\n')),(0,l.kt)("p",null,"If this is not done, ",(0,l.kt)("inlineCode",{parentName:"p"},"arguments are not in json format: key must be a string at line 1 column")," error may occur."),(0,l.kt)("h1",{id:"2-configuration"},"2. Configuration"),(0,l.kt)("h2",{id:"21-set-the-network-and-parameter-values"},"2.1. Set the network and parameter values"),(0,l.kt)("p",null,"TONOS-CLI can remember some parameter values and use it automatically in various subcommands."),(0,l.kt)("p",null,"After that you can omit the corresponding parameters in subsequent subcommands."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli.config.json")," configuration file will be created in the current working directory. All subsequent calls of the utility will use this file."),(0,l.kt)("p",null,"Use the following command to create a configuration file:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli config <--option> <option_value>\n")),(0,l.kt)("p",null,"All other TONOS-CLI commands will indicate the configuration file currently used."),(0,l.kt)("p",null,"List of available options:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'--abi <ABI> -  -  -         Path to the contract ABI file.\n--addr <ADDR> -  -  -       Contract address.\n--async_call <ASYNC_CALL> -  -    Disables wait for transaction to appear in the network after call command.\n--balance_in_tons <BALANCE_IN_TONS> -   Print balance for account command in tons. If false balance is printed in nanotons.\n--debug_fail <DEBUG_FAIL> -  -    When enabled tonos-cli executes debug command on fail of run or call command. Can be enabled with values \'full\' or \'minimal\' which set the trace level for debug run and disabled with value \'none\'.\n--depool_fee <DEPOOL_FEE> -  -    Value added to the message sent to depool to cover its fees (change will be returned).\n--keys <KEYS> -  -  -       Path to the file with keypair.\n--lifetime <LIFETIME> -  -        Period of time in seconds while message is valid. Change of this parameter may affect "out_of_sync" parameter, because "lifetime" should be at least 2 times greater than "out_of_sync".\n--local_run <LOCAL_RUN> -  -      Enable preliminary local run before deploy and call commands.\n--message_processing_timeout <MSG_TIMEOUT>    Network message processing timeout in ms.\n--no-answer <NO_ANSWER> -  -      Flag whether to wait for depool answer when calling a depool function.\n--out_of_sync <OUT_OF_SYNC> -  -  Network connection "out_of_sync_threshold" parameter in seconds. Mind that it cant exceed half of the "lifetime" parameter.\n--pubkey <PUBKEY> -  -  -   User public key. Used by DeBot Browser.\n--retries <RETRIES> -  -  - Number of attempts to call smart contract function if previous attempt was unsuccessful.\n--timeout <TIMEOUT> -  -  - Network `wait_for` timeout in ms.\n--url <URL> -  -  -         Url to connect.\n--wallet <WALLET> -  -  -   Multisig wallet address.\n--wc <WC> -  -  -  -  Workchain id.\n')),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli config --url https://main.ton.dev --wc -1 --keys key.json --abi SafeMultisigWallet.abi.json --lifetime 3600 --local_run true --retries 3 --timeout 600 \nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nSucceeded.\n{\n  "url": "main.ton.dev",\n  "wc": -1,\n  "addr": null,\n  "wallet": null,\n  "pubkey": null,\n  "abi_path": "SafeMultisigWallet.abi.json",\n  "keys_path": "key.json",\n  "retries": 3,\n  "timeout": 600,\n  "message_processing_timeout": 40000,\n  "out_of_sync_threshold": 15,\n  "is_json": false,\n  "depool_fee": 0.5,\n  "lifetime": 3600,\n  "no_answer": true,\n  "balance_in_tons": false,\n  "local_run": true,\n  "async_call": false,\n  "debug_fail": "None",\n  "endpoints": [\n    "https://eri01.main.everos.dev",\n    "https://gra01.main.everos.dev",\n    "https://gra02.main.everos.dev",\n    "https://lim01.main.everos.dev",\n    "https://rbx01.main.everos.dev"\n  ]\n}\n')),(0,l.kt)("p",null,"Some frequently used networks:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"https://net.ever.live")," - developer sandbox for testing. TONOS-CLI connects to it by default."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"https://ever.live")," - main Everscale network."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"https://rustnet.ever.live")," - test network running on Rust nodes."),(0,l.kt)("p",null,"TONOS-CLI supports the use of multiple endpoints for networks: if several endpoints are ",(0,l.kt)("a",{parentName:"p",href:"#24-configure-endpoints-map"},"specified in the endpoint map")," for a network, TONOS-CLI will use them all when accessing it. Otherwise, the network URL will be treated as the only endpoint."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"main.ton.dev")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"net.ton.dev")," networks already have their current endpoints specified in the default endpoint map.\nSee ",(0,l.kt)("a",{parentName:"p",href:"#24-configure-endpoints-map"},"section 2.4 below")," on how to edit and add endpoints to the endpoint map."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note"),": This change was introduced in version 0.16.1 and is fully compatible with scripts written for previous versions, where main.ton.dev and net.ton.dev networks were specified with a single url. TONOS-CLI will simply use the default endpoint map to access these networks.")),(0,l.kt)("p",null,"Network configuration can be ",(0,l.kt)("a",{parentName:"p",href:"#26-override-network-settings"},"overridden")," for any single subcommand."),(0,l.kt)("p",null,"To connect to a ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/TON-OS-DApp-Server"},"DApp Server")," you are running, it should have domain name and a DNS record. Then its URL may be used to access it with TONOS-CLI:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli config --url <dapp_server_url>\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: Either run tonos-cli utility only from the directory where tonos-cli.config.json is placed, or use one of the available methods (see ",(0,l.kt)("a",{parentName:"p",href:"#25-override-configuration-file-location"},"section 2.5"),") to make the utility look for the file elsewhere.")),(0,l.kt)("h2",{id:"22-check-configuration"},"2.2. Check configuration"),(0,l.kt)("p",null,"You can check the current configuration parameters with the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli config --list\n")),(0,l.kt)("h2",{id:"23-clear-configuration"},"2.3. Clear configuration"),(0,l.kt)("p",null,"Use the following command to reset configuration to default values:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli config clear\n")),(0,l.kt)("h2",{id:"24-configure-endpoints-map"},"2.4. Configure endpoints map"),(0,l.kt)("p",null,"TONOS-CLI config file also stores an endpoints map that can be updated by the user.\nEach time user ",(0,l.kt)("a",{parentName:"p",href:"#21-set-the-network-and-parameter-values"},"changes the url"),", endpoints also change in accordance to endpoints map.\nTo print the map use the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli config endpoint print\n")),(0,l.kt)("p",null,"User can reset map to the default state:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli config endpoint reset\n")),(0,l.kt)("p",null,"Default state of the map:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'{\n  "net.ton.dev": [\n    "https://eri01.net.everos.dev",\n    "https://rbx01.net.everos.dev"\n    "https://gra01.net.everos.dev"\n  ],\n  "main.ton.dev": [\n    "https://eri01.main.everos.dev",\n    "https://gra01.main.everos.dev",\n    "https://gra02.main.everos.dev",\n    "https://lim01.main.everos.dev",\n    "https://rbx01.main.everos.dev"\n  ],\n  "http://127.0.0.1/": [\n    "http://0.0.0.0/",\n    "http://127.0.0.1/",\n    "http://localhost/"\n  ]\n}\n')),(0,l.kt)("p",null,"Map can be changed with ",(0,l.kt)("inlineCode",{parentName:"p"},"remove")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"add")," subcommands:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli config endpoint remove <url>\ntonos-cli config endpoint add <url> <list_of_endpoints>\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli config endpoint remove main.ton.dev\ntonos-cli config endpoint add main.ton.dev "https://eri01.main.everos.dev","https://gra01.main.everos.dev","https://gra02.main.everos.dev","https://lim01.main.everos.dev","https://rbx01.main.everos.dev"\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note"),": If url used in add command already exists, endpoints lists will be merged.")),(0,l.kt)("p",null,"If a network that doesn't have mapped endpoints is ",(0,l.kt)("a",{parentName:"p",href:"#21-set-the-network-and-parameter-values"},"specified in the config file"),", its url will be automatically treated as the only endpoint. For example, configuring TONOS-CLI to connect to RustNet with the command ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli config --url https://rustnet.ton.dev")," will result in TONOS-CLI using this url as a single endpoint, without the user having to specify it in the endpoints map additionally."),(0,l.kt)("h2",{id:"25-override-configuration-file-location"},"2.5. Override configuration file location"),(0,l.kt)("p",null,"You can move the ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli.config.json")," configuration file to any other convenient location and/or rename it. There are several ways you can point the utility to the new location of the file:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"define environment variable")," ",(0,l.kt)("inlineCode",{parentName:"li"},"TONOSCLI_CONFIG")," with the path to your configuration file:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"export TONOSCLI_CONFIG=<path_to_config_file>\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"export TONOSCLI_CONFIG=/home/user/config.json\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"define global option")," ",(0,l.kt)("inlineCode",{parentName:"li"},"--config <path_to_config_file>")," before any other subcommand:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli --config <path_to_config_file> <any_subcommand>\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli --config /home/user/config.json account <address>\n")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"--config")," global option has higher priority than the ",(0,l.kt)("inlineCode",{parentName:"p"},"TONOSCLI_CONFIG")," environment variable."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: You cannot use the config subcommand to create or edit a configuration file located outside the current working directory. It should either be called from the directory containing the file, or the file should be manually copied to the desired directory later.")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"However, config --list subcommand displays the parameters of the currently used configuration file, wherever it is located.")),(0,l.kt)("h2",{id:"26-override-network-settings"},"2.6. Override network settings"),(0,l.kt)("p",null,"You can also separately override ",(0,l.kt)("a",{parentName:"p",href:"#21-set-the-network-and-parameter-values"},"preconfigured network settings")," for a single subcommand. Use the ",(0,l.kt)("inlineCode",{parentName:"p"},"--url <network_url>")," global option for this purpose:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli --url <network_url> <any_subcommand>\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli --url https://main.ton.dev account <address>\n")),(0,l.kt)("h2",{id:"27-force-json-output"},"2.7. Force json output"),(0,l.kt)("p",null,"You can force TONOS-CLi to print output in json format. To do so, add ",(0,l.kt)("inlineCode",{parentName:"p"},"--json")," flag before a subcommand:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli --json <any_subcommand>\n")),(0,l.kt)("h2",{id:"28-debug-on-fail-option"},"2.8. Debug on fail option"),(0,l.kt)("p",null,"You can force TONOS-CLi to debug call and run executions if they fail with error code 414.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli config --debug_fail <trace_level>\n")),(0,l.kt)("p",null,"Possible <trace_level> values:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"'full'"),(0,l.kt)("li",{parentName:"ul"},"'minimal'"),(0,l.kt)("li",{parentName:"ul"},"'none'")),(0,l.kt)("h1",{id:"3-cryptographic-commands"},"3. Cryptographic commands"),(0,l.kt)("h2",{id:"31-create-seed-phrase"},"3.1. Create seed phrase"),(0,l.kt)("p",null,"To generate a mnemonic seed phrase enter the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli genphrase\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli genphrase\nConfig: /home/user/tonos-cli.conf.json\nSucceeded.\nSeed phrase: "rule script joy unveil chaos replace fox recipe hedgehog heavy surge online"\n')),(0,l.kt)("h2",{id:"32-generate-public-key"},"3.2. Generate public key"),(0,l.kt)("p",null,"To generate a public key from a seed phrase enter the following command with the seed phrase in quotes:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli genpubkey "rule script joy unveil chaos replace fox recipe hedgehog heavy surge online"\n')),(0,l.kt)("p",null,"The generated QR code also contains the public key."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli genpubkey "rule script joy unveil chaos replace fox recipe hedgehog heavy surge online"\nConfig: /home/user/tonos-cli.conf.json\nSucceeded.\nPublic key: 88c541e9a1c173069c89bcbcc21fa2a073158c1bd21ca56b3eb264bba12d9340\n\n<QR code with key>\n\n')),(0,l.kt)("h2",{id:"33-generate-key-pair-file"},"3.3. Generate key pair file"),(0,l.kt)("p",null,"To create a key pair file from a seed phrase use the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli getkeypair [-o <keyfile.json>] [-p "<seed_phrase>"]\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<keyfile.json>")," - the file the key pair will be written to. If not specified keys will be printed to the stdout.\n",(0,l.kt)("inlineCode",{parentName:"p"},'"<seed_phrase>"')," - seed phrase or secret key. If not specified a new phrase will be generated.\nExample:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli getkeypair -o key.json -p "rule script joy unveil chaos replace fox recipe hedgehog heavy surge online"\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\nkey_file: key.json\n  phrase: rule script joy unveil chaos replace fox recipe hedgehog heavy surge online\nKeypair successfully saved to key.json.\nSucceeded.\n\n$ tonos-cli getkeypair -o key.json \nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\nkey_file: key.json\n  phrase: None\nGenerating seed phrase.\nSeed phrase: "elephant tone error jazz scrap wise kick walk panda snake right feature"\nKeypair successfully saved to key.json.\nSucceeded.\n\n\n$ tonos-cli getkeypair \nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\nkey_file: None\n  phrase: None\nGenerating seed phrase.\nSeed phrase: "behave early mammal cart grape wolf pulse once helmet shop kit this"\nKeypair: {\n  "public": "d5218be1502c98019a2c08ae588f73abd56b4c72411e8d2ee37e5c2d821e075f",\n  "secret": "842bd2b9df2ec4ed07b6b66d6d0c2858769ba4ed9005ffe58cba26783504a3ff"\n}\nSucceeded.\n\n$ tonos-cli -j getkeypair\n{\n  "public": "09889cd2f085a693ef04a6dad4b6533c7019014a7e0ca9b5b146e66e550973d9",\n  "secret": "021196259435d54dfb5c41970db5bcfc2306d59877665c3b573486d441cf021a"\n}\n')),(0,l.kt)("h1",{id:"4-smart-contract-commands"},"4. Smart contract commands"),(0,l.kt)("p",null,"When working with smart contracts, TONOS-CLI requires the following files:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ABI file")," - a .json file that describes the contract interface, the methods and parameters used to interact with it."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"TVC file")," - the compiled smart contract file. Used only when generating contract address and deploying contract code to the blockchain."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Key pair file")," - used in contracts with implemented authorization. It is the file containing ",(0,l.kt)("a",{parentName:"li",href:"#3-cryptographic-commands"},"private and public keys")," authorized to access the contract. In ",(0,l.kt)("inlineCode",{parentName:"li"},"--sign")," parameter the corresponding seed phrase may be used instead of it.")),(0,l.kt)("p",null,"By default, the utility looks for these files in the current working directory."),(0,l.kt)("h2",{id:"41-generate-contract-address"},"4.1. Generate contract address"),(0,l.kt)("p",null,"Contract address uniquely identifies the contract on the blockchain. Contract balance is attached to its address, the address is used for any interactions with the contract, such as calling contract functions, sending messages, etc."),(0,l.kt)("p",null,"Contract address is generated based on contract TVC file and selected keys. To get a different address for the same type of contract, use different keys."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note"),": If your contract has static variables, they can be initialized through ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/TVM-linker#5-initialize-static-variables-in-compiled-contract"},"TVM linker")," before deployment.")),(0,l.kt)("p",null,"Use the following command to generate the contract address:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli genaddr [--genkey|--setkey <keyfile.json>] [--wc <int8>] [--abi <contract.abi.json>] <contract.tvc>\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--genkey <keyfile.json>")," - generate new ",(0,l.kt)("inlineCode",{parentName:"li"},"keyfile.json")," key pair file and use it to calculate the contract address.")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: if you use --genkey, the corresponding seed phrase will be displayed. Write it down, if you mean to keep using this key pair.")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"--abi <contract.abi.json>")," - contract ABI interface file. If not specified tonos-cli can use ABI path from config of obtained from tvc path (for ",(0,l.kt)("inlineCode",{parentName:"p"},"<contrac>.tvc")," checks ",(0,l.kt)("inlineCode",{parentName:"p"},"<contract>.abi.json"),").")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"--setkey <keyfile.json>")," - use already ",(0,l.kt)("a",{parentName:"p",href:"#33-generate-key-pair-file"},"existing")," ",(0,l.kt)("inlineCode",{parentName:"p"},"keyfile.json")," key pair file to calculate the contract address. Seed phrase cannot be used instead of the file.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"--wc <int8>"),"  ID of the workchain the contract will be deployed to (",(0,l.kt)("inlineCode",{parentName:"p"},"-1")," for masterchain, ",(0,l.kt)("inlineCode",{parentName:"p"},"0")," for basechain). By default, this value is set to 0."),(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"<contract.tvc>")," - compiled smart contract file."))),(0,l.kt)("p",null,"As result the utility displays the new contract address (",(0,l.kt)("inlineCode",{parentName:"p"},"Raw address"),")."),(0,l.kt)("p",null,"Example (",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig"},"multisignature wallet")," address generation for the masterchain):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli genaddr --genkey key.json --wc -1 SafeMultisigWallet.tvc --abi SafeMultisigWallet.abi.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n     tvc: SafeMultisigWallet.tvc\n      wc: -1\n    keys: key.json\ninit_data: None\nis_update_tvc: None\n\nSeed phrase: "chimney nice diet engage hen sing vocal upgrade column address consider word"\nRaw address: -1:a021414a79539001ed35d615a646dc8b89df29ccccf143c30df15c7fbcaff086\ntestnet:\nNon-bounceable address (for init): 0f-gIUFKeVOQAe011hWmRtyLid8pzMzxQ8MN8Vx_vK_whkeM\nBounceable address (for later access): kf-gIUFKeVOQAe011hWmRtyLid8pzMzxQ8MN8Vx_vK_whhpJ\nmainnet:\nNon-bounceable address (for init): Uf-gIUFKeVOQAe011hWmRtyLid8pzMzxQ8MN8Vx_vK_whvwG\nBounceable address (for later access): Ef-gIUFKeVOQAe011hWmRtyLid8pzMzxQ8MN8Vx_vK_whqHD\nSucceeded\n')),(0,l.kt)("h2",{id:"42-deploy-contract"},"4.2. Deploy contract"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note"),": If your contract has static variables, they can be initialized through ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/TVM-linker#5-initialize-static-variables-in-compiled-contract"},"TVM linker")," before deployment.")),(0,l.kt)("p",null,"Use the following command to deploy a contract:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli deploy [--sign <deploy_seed_or_keyfile>] [--wc <int8>] [--abi <contract.abi.json>] <contract.tvc> <params>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<deploy_seed_or_keyfile>")," - can either be the seed phrase used to generate the deployment key pair file or the key pair file itself. If seed phrase is used, enclose it in double quotes."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"'))),(0,l.kt)("p",null,"or"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--sign deploy.keys.json")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--wc <int8>")," ID of the workchain the wallet will be deployed to (",(0,l.kt)("inlineCode",{parentName:"li"},"-1")," for masterchain, ",(0,l.kt)("inlineCode",{parentName:"li"},"0")," for basechain). By default, this value is set to 0.")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.tvc>")," - compiled smart contract file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - deploy command parameters, depend on the contract."),(0,l.kt)("p",null,"Example (",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig"},"multisignature wallet")," contract deployment to the masterchain):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli deploy --sign key.json --wc -1 --abi SafeMultisigWallet.abi.json SafeMultisigWallet.tvc \'{"owners":["0x88c541e9a1c173069c89bcbcc21fa2a073158c1bd21ca56b3eb264bba12d9340"],"reqConfirms":1}\'\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n     tvc: SafeMultisigWallet.tvc\n  params: {"owners":["0x88c541e9a1c173069c89bcbcc21fa2a073158c1bd21ca56b3eb264bba12d9340"],"reqConfirms":1}\n     abi: SafeMultisigWallet.abi.json\n    keys: key.json\n      wc: -1\nConnecting to net.ton.dev\nDeploying...\nTransaction succeeded.\nContract deployed at address: -1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6\n')),(0,l.kt)("h2",{id:"43-generate-deploy-message-offline"},"4.3. Generate deploy message offline"),(0,l.kt)("p",null,"If needed, signed deploy message can be generated without immediately broadcasting it to the blockchain. Generated message can be broadcasted later."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli deploy_message [--raw] [--output <path_to_file>] [--sign <deploy_seed_or_keyfile>] [--wc <int8>] [--abi <contract.abi.json>] <contract.tvc> <params>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--raw")," - use to create raw message boc."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--output <path_to_file>")," - specify path to file where the raw message should be written to, instead of printing it to terminal."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<deploy_seed_or_keyfile>")," - can either be the seed phrase used to generate the deployment key pair file or the key pair file itself. If seed phrase is used, enclose it in double quotes."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"'))),(0,l.kt)("p",null,"or"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--sign deploy.keys.json")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--wc <int8>")," ID of the workchain the wallet will be deployed to (",(0,l.kt)("inlineCode",{parentName:"li"},"-1")," for masterchain, ",(0,l.kt)("inlineCode",{parentName:"li"},"0")," for basechain). By default, this value is set to 0.")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.tvc>")," - compiled smart contract file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - deploy command parameters, depend on the contract."),(0,l.kt)("p",null,"Example (saving to a file ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig"},"multisignature wallet")," contract deployment message to the masterchain):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli deploy_message --raw --output deploy.boc --sign key.json --wc -1 --abi SafeMultisigWallet.abi.json SafeMultisigWallet.tvc \'{"owners":["0x88c541e9a1c173069c89bcbcc21fa2a073158c1bd21ca56b3eb264bba12d9340"],"reqConfirms":1}\'\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n     tvc: SafeMultisigWallet.tvc\n  params: {"owners":["0x88c541e9a1c173069c89bcbcc21fa2a073158c1bd21ca56b3eb264bba12d9340"],"reqConfirms":1}\n     abi: SafeMultisigWallet.abi.json\n    keys: key.json\n      wc: -1\n\nMessageId: 51da1b8840bd12f9ef5152639bd1fe9062d77ed91829301043bb85b4a4d610ea\nExpire at: unknown\nMessage saved to file deploy.boc\nContract\'s address: -1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6\nSucceeded.\n')),(0,l.kt)("h2",{id:"43-get-contract-status"},"4.3. Get contract status"),(0,l.kt)("p",null,"You may use the following command to check the current status of a contract:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli account <list_of_addresses> [--dumptvc <tvc_path>] [--dumpboc <boc_path>]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<list_of_addresses>")," - contract ",(0,l.kt)("a",{parentName:"p",href:"#41-generate-contract-address"},"addresses"),".\n",(0,l.kt)("inlineCode",{parentName:"p"},"--dumptvc <tvc_path>")," - this flag can be specified to dump account StateInit to the <tvc_path> file.\n",(0,l.kt)("inlineCode",{parentName:"p"},"--dumpboc <boc_path>")," - this flag can be specified to dump account boc to the <boc_path> file."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli  account 0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13 0:14014af4a374bdd13dae2379063ea2597634c2c2fc8e99ca9eab431a7ab6f566  0:f89d946b5b4b8a06f01dc20dceef30caff844d5285abea8a21ad3730c0f3dd12\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\naddresses: 0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13, 0:14014af4a374bdd13dae2379063ea2597634c2c2fc8e99ca9eab431a7ab6f566, 0:f89d946b5b4b8a06f01dc20dceef30caff844d5285abea8a21ad3730c0f3dd12\nConnecting to net.ton.dev\nProcessing...\nSucceeded.\naddress:       0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13\nacc_type:      Active\nbalance:       11466383488239689 nanoton\nlast_paid:     1640619135\nlast_trans_lt: 0x530197a143\ndata(boc):     b5ee9c720101060100b000014195c06aa743d1f9000dd64b75498f106af4b7e7444234d7de67ea26988f6181dfe001020120050202012004030052bf874da2f56d034e11773c58331900e0e1e91a137e1b4c2ca15607634c2d63e1af0000000061c9dca50052bfbddf9156dc04cca88cf25d9c766b1bd2f1ab7d0878c4d761862fc524758767f10000000061c9dc820053bfd627d55f960de2235b3f1537884d5968e5e486c58c581bc9ea4068c8da164ce18000000030e4ee49c0\ncode_hash:     ccbfc821853aa641af3813ebd477e26818b51e4ca23e5f6d34509215aa7123d9\n\naddress:       0:14014af4a374bdd13dae2379063ea2597634c2c2fc8e99ca9eab431a7ab6f566\nacc_type:      Active\nbalance:       2082745497066 nanoton\nlast_paid:     1640619517\nlast_trans_lt: 0x530a3c2782\ndata(boc):     b5ee9c7201020c0100022e000373000000befe45557e0000000000000000000000000002faf04e577e5cf5b28c2a81afc5ae534a0f3f494cc4ee62ef675ca8e36af911a3c8767a400b0a010183801f13b28d6b697140de03b841b9dde6195ff089aa50b57d514435a6e6181e7baba318b50f6f18c9d307d500216c80d6ecd77d13e437bdfcaf0b4fa6b9204b7847500203a1c00b620939e214cadb7481682034e58a853a77874f473c69cc7d3b1ad9da7f0bafa0000000280000000c0000000bddcfa66622a7b9c955271c779b92448cff442b8efead77d43bd7f50b07a45f380030010706030203cca005040045b41bda168cd2322b5dcd28989176a9eae590288db4d548f2b6948d214de0c9bdb372700045b6554f714ca768f21ad18cff20c7af62091e9fc2d40c06d32d1ace7495f5dd1605781000bda90017d76e405363a8a494a3a8d8c38fcadd4f2c7fb550244fd6d2a77ac12eb029bce000000000000255400000000000000000000000000000034c3babc06000000000000000000000000000000000000000000000000000000000000000100201200908009bbfe85a3348c8ad7734a26245daa7ab9640a236d35523cada523485378326f6cdc9800000000000106f0000000000000000000000000002035ac0000000000000000000000000000000187c4b00e0007bbffdc5329da3c86b4633fc831ebd88247a7f0b50301b4cb46b39d257d7745815e0000000000000095500000000000000000000000002f8eb24987c490760000454310010546f6b656e202331\ncode_hash:     eee7d3331153dce4aa938e3bcdc922467fa215c77f56bbea1debfa8583d22f9c\n\n0:f89d946b5b4b8a06f01dc20dceef30caff844d5285abea8a21ad3730c0f3dd12 not found\n\n\n$ tonos-cli  account 0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\naddresses: 0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13\nConnecting to net.ton.dev\nProcessing...\nSucceeded.\naddress:       0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13\nacc_type:      Active\nbalance:       11463682795615708 nanoton\nlast_paid:     1640624439\nlast_trans_lt: 0x5379939282\ndata(boc):     b5ee9c7201010401008100014195c06aa743d1f9000dd64b75498f106af4b7e7444234d7de67ea26988f6181dfe00102012003020053bfde8d98393e5db0ea2f609ed9266cf61a7487759d679ea9792adbdcfc137f6caf8000000030e4f89dc00053bfc8658b6b027767d9addd720a0bf8b157379a9b0e9208bab53ad4ee54358c6ce98000000030e4f89dc0\ncode_hash:     ccbfc821853aa641af3813ebd477e26818b51e4ca23e5f6d34509215aa7123d9\n\n")),(0,l.kt)("h2",{id:"44-call-method"},"4.4. Call method"),(0,l.kt)("h3",{id:"441-call-contract-on-the-blockchain"},"4.4.1. Call contract on the blockchain"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli call [--abi <contract.abi.json>] [--sign <seed_or_keyfile>] <address> <method> <params>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<seed_or_keyfile>")," - can either be the seed phrase or the corresponding key pair file. If seed phrase is used, enclose it in double quotes."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"'))),(0,l.kt)("p",null,"or"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--sign keyfile.json"))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<address>")," - contract ",(0,l.kt)("a",{parentName:"p",href:"#41-generate-contract-address"},"address"),"."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<method>")," - the method being called."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - parameters of the called method."),(0,l.kt)("p",null,"Example (transaction creation in a ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig"},"multisignature wallet")," contract):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli call 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc submitTransaction \'{"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":234000000,"bounce":false,"allBalance":false,"payload":""}\' --abi SetcodeMultisigWallet.abi.json --sign k1.keys.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: submitTransaction\n  params: {"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":234000000,"bounce":false,"allBalance":false,"payload":""}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: k1.keys.json\nlifetime: None\n  output: None\nConnecting to net.ton.dev\nGenerating external inbound message...\n\nMessageId: c6baac843fefe6b9e8dc3609487a63ef21207e4fdde9ec253b9a47f7f5a88d01\nExpire at: Sat, 08 May 2021 14:52:23 +0300\nProcessing...\nSucceeded.\nResult: {\n  "transId": "6959885776551137793"\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Note"),": If your function is marked as ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/TON-Solidity-Compiler/blob/master/API.md#external-function-calls"},"responsible"),", TONOS-CLI expects ",(0,l.kt)("inlineCode",{parentName:"p"},"_answer_id")," field, and you may encounter errors, if it's missing."),(0,l.kt)("h3",{id:"442-alternative-command-to-call-contract-in-the-blockchain"},"4.4.2. Alternative command to call contract in the blockchain"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli callex <method> [<address>] [<contract.abi.json>] [<seed_or_keyfile>] params...\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Note:")," this command is deprecated, use ",(0,l.kt)("a",{parentName:"p",href:"#410-alternative-syntax-for-call-deploy-and-run-commands"},(0,l.kt)("inlineCode",{parentName:"a"},"callx"))," instead."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<method>")," - the method being called."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<address>")," - contract ",(0,l.kt)("a",{parentName:"p",href:"#41-generate-contract-address"},"address"),"."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<seed_or_keyfile>")," - can either be the seed phrase or the corresponding key pair file. If seed phrase is used, enclose it in double quotes."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"'))),(0,l.kt)("p",null,"or"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--sign keyfile.json"))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"params...")," - one or more parameters of the called method in the form of ",(0,l.kt)("inlineCode",{parentName:"p"},"--name value"),"."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"address"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"abi"),", and ",(0,l.kt)("inlineCode",{parentName:"p"},"keys")," parameters can be omitted. In this case default values will be used from config file."),(0,l.kt)("p",null,"Integer and address types can be supplied without quotes."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--value 1.5T")," - suffix ",(0,l.kt)("inlineCode",{parentName:"li"},"T")," converts integer to nanotokens -> ",(0,l.kt)("inlineCode",{parentName:"li"},"1500000000"),". The same as ",(0,l.kt)("inlineCode",{parentName:"li"},"--value 1500000000"),".")),(0,l.kt)("p",null,"Arrays can be used without ",(0,l.kt)("inlineCode",{parentName:"p"},"[]")," brackets."),(0,l.kt)("p",null,"Example of transaction creation in a ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig"},"multisignature wallet")," contract, equivalent to the example in section 4.4.1. above:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli callex submitTransaction 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc SetcodeMultisigWallet.abi.json k1.keys.json --dest -1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6 --value 0.234T --bounce false --allBalance false --payload ""\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: submitTransaction\n  params: {"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":"0234000000","bounce":"false","allBalance":"false","payload":""}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: k1.keys.json\nConnecting to net.ton.dev\nGenerating external inbound message...\n\nMessageId: a38f37bfbe3c7427c869b3ee97c3b2d7f4421ca1427ace4e7a92f1a61d7ef234\nExpire at: Sat, 08 May 2021 15:10:15 +0300\nProcessing...\nSucceeded.\nResult: {\n  "transId": "6959890394123980993"\n}\n')),(0,l.kt)("h3",{id:"443-run-contract-method-locally"},"4.4.3. Run contract method locally"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli run [--abi <contract.abi.json>] <address> <method> <params>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<address>")," - contract ",(0,l.kt)("a",{parentName:"p",href:"#41-generate-contract-address"},"address"),"."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<method>")," - the method being called."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - parameters of the called method."),(0,l.kt)("p",null,"Example of a transaction list request in a ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig"},"multisignature wallet"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli run 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc getTransactions {} --abi SafeMultisigWallet.abi.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: getTransactions\n  params: {}\n     abi: SafeMultisigWallet.abi.json\n    keys: None\nlifetime: None\n  output: None\nConnecting to net.ton.dev\nGenerating external inbound message...\n\nMessageId: ff8b8a73b1a7803a735eb4f620cade78ed45fd1530992fd3bedb91f3c66eacc5\nExpire at: Sat, 08 May 2021 15:16:59 +0300\nRunning get-method...\nSucceeded.\nResult: {\n  "transactions": [\n    {\n      "id": "6959890394123980993",\n      "confirmationsMask": "1",\n      "signsRequired": "4",\n      "signsReceived": "1",\n      "creator": "0x849ee401fde65ad8cda6d937bdc81e2beba0f36ba2f87115f4a2d24a15568203",\n      "index": "0",\n      "dest": "-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6",\n      "value": "234000000",\n      "sendFlags": "3",\n      "payload": "te6ccgEBAQEAAgAAAA==",\n      "bounce": false\n    }\n  ]\n}\n')),(0,l.kt)("h3",{id:"444-run-func-get-method"},"4.4.4. Run funC get-method"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli runget [--boc] [--tvc] <address> <method> [<params>...] [--bc_config <config_path>]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<address>")," - contract ",(0,l.kt)("a",{parentName:"p",href:"#41-generate-contract-address"},"address")," or path to the file with:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"account boc (It can be obtained from the TON Live) if ",(0,l.kt)("inlineCode",{parentName:"li"},"--boc")," option is used;"),(0,l.kt)("li",{parentName:"ul"},"account state init if flag ",(0,l.kt)("inlineCode",{parentName:"li"},"--tvc")," is used.")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<method>")," - the method being called."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - parameters of the called method. Can have multiple values: one for each function parameter.\nParameters should be specified separately without json wrap and argument names."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--bc_config <config_path>")," - this option can be used with ",(0,l.kt)("inlineCode",{parentName:"p"},"--boc")," option to specify the file with the blockchain config\nBOC. It can be obtained with ",(0,l.kt)("a",{parentName:"p",href:"#94-dump-blockchain-config"},"dump blockchain config")," command."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli runget -1:3333333333333333333333333333333333333333333333333333333333333333 active_election_id\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n address: -1:3333333333333333333333333333333333333333333333333333333333333333\n  method: active_election_id\n  params: None\nConnecting to net.ton.dev\nRunning get-method...\nSucceded.\nResult: ["1619901678"]\n\n$ tonos-cli runget --boc acc.boc compute_returned_stake 0x0166d0181a19f87af9397040a68671e1b239f12152824f7d987fd6897d6a9587\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\n address: acc.boc\n  method: compute_returned_stake\n  params: ["0x0166d0181a19f87af9397040a68671e1b239f12152824f7d987fd6897d6a9587"]\nConnecting to main.ton.dev\nRunning get-method...\nSucceeded.\nResult: ["125387107580525"]\n\n$ tonos-cli runget --tvc acc.tvc compute_returned_stake 0x0166d0181a19f87af9397040a68671e1b239f12152824f7d987fd6897d6a9587\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\n address: acc.boc\n  method: compute_returned_stake\n  params: ["0x0166d0181a19f87af9397040a68671e1b239f12152824f7d987fd6897d6a9587"]\nConnecting to main.ton.dev\nRunning get-method...\nSucceeded.\nResult: ["125387107580525"]\n')),(0,l.kt)("h3",{id:"445-run-contract-method-locally-for-saved-account-boc"},"4.4.5. Run contract method locally for saved account BOC"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli run [--boc] [--tvc] [--abi <contract.abi.json>] <account> <method> <params> [--bc_config <config_path>]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<account>")," - path to the file with account boc for flag ",(0,l.kt)("inlineCode",{parentName:"p"},"--boc")," or account state init for flag ",(0,l.kt)("inlineCode",{parentName:"p"},"--tvc"),"\n(they can be obtained from the network with ",(0,l.kt)("inlineCode",{parentName:"p"},"account")," command)."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<method>")," - the method being called."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - parameters of the called method."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--bc_config <config_path>")," - this option can be used with ",(0,l.kt)("inlineCode",{parentName:"p"},"--boc")," option to specify the file with the blockchain config\nBOC. It can be obtained with ",(0,l.kt)("a",{parentName:"p",href:"#94-dump-blockchain-config"},"dump blockchain config")," command."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli run --boc tests/depool_acc.boc getData \'{}\' --abi tests/samples/fakeDepool.abi.json\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\n account: tests/depool_acc.boc\n  method: getData\n  params: {}\n     abi: tests/samples/fakeDepool.abi.json\nGenerating external inbound message...\nSucceeded.\nResult: {\n  "stake": "65535",\n  "sender": "0:1e0739795a20263747ba659785a791fc2761295593a694f53116ab53439cc0a4",\n  "receiver": "0:0123456789012345012345678901234501234567890123450123456789012346",\n  "withdrawal": "172800",\n  "total": "172800",\n  "reinvest": false,\n  "value": "1000000000"\n}\n\n$ tonos-cli run --tvc tests/depool_acc.tvc getData \'{}\' --abi tests/samples/fakeDepool.abi.json\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\n account: tests/depool_acc.boc\n  method: getData\n  params: {}\n     abi: tests/samples/fakeDepool.abi.json\nGenerating external inbound message...\nSucceeded.\nResult: {\n  "stake": "65535",\n  "sender": "0:1e0739795a20263747ba659785a791fc2761295593a694f53116ab53439cc0a4",\n  "receiver": "0:0123456789012345012345678901234501234567890123450123456789012346",\n  "withdrawal": "172800",\n  "total": "172800",\n  "reinvest": false,\n  "value": "1000000000"\n}\n\n')),(0,l.kt)("h2",{id:"45-generate-encrypted-message-offline"},"4.5. Generate encrypted message offline"),(0,l.kt)("p",null,"An internet connection is not required to create an encrypted message. Use the following command to do it:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli message [--raw] [--output <path_to_file>] [--abi <contract.abi.json>] [--sign <seed_or_keyfile>] <address> <method> <params> [--lifetime <seconds>]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--raw")," - use to create raw message boc."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--output <path_to_file>")," - specify path to file where the raw message should be written to, instead of printing it to terminal."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<seed_or_keyfile>")," - can either be the seed phrase or the corresponding key pair file. If seed phrase is used, enclose it in double quotes."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"'))),(0,l.kt)("p",null,"or"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--sign keyfile.json"))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<address>")," - contract ",(0,l.kt)("a",{parentName:"p",href:"#41-generate-contract-address"},"address"),"."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<method>")," - the method being called."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - parameters of the called method."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"lifetime")," \u2013 message lifetime in seconds. Once this time elapses, the message will not be accepted by the contract."),(0,l.kt)("p",null,"The TONOS-CLI utility displays encrypted message text and a QR code that also contains the message.Copy the message text or scan the QR code and broadcast the message online."),(0,l.kt)("p",null,"Example (raw boc of create new multisig transaction message with a lifetime of 1 hour saved to file):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli message --raw --output message.boc --sign k1.keys.json --abi SafeMultisigWallet.abi.json 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc submitTransaction \'{"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":234000000,"bounce":false,"allBalance":false,"payload":""}\' --lifetime 3600\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: submitTransaction\n  params: {"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":234000000,"bounce":false,"allBalance":false,"payload":""}\n     abi: SafeMultisigWallet.abi.json\n    keys: k1.keys.json\nlifetime: 3600\n  output: message.boc\nGenerating external inbound message...\n\nMessageId: 59d698efe871cf9ffa8f6eb4c784b294538cd2223b4c876bb4e999a8edf8d410\nExpire at: Sat, 08 May 2021 16:42:03 +0300\nMessage saved to file message.boc\n')),(0,l.kt)("h2",{id:"46-broadcast-previously-generated-message"},"4.6. Broadcast previously generated message"),(0,l.kt)("p",null,"Use the following command to broadcast a previously generated message, that is not in raw format, and not in a file:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli send [--abi <contract.abi.json>] "<message_text>"\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Message")," \u2013 the content of the message generated by the TONOS-CLI utility during message creation. It should be enclosed in double quotes."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli send --abi SafeMultisigWallet.abi.json "7b226d7367223a7b226d6573736167655f6964223a2266363364666332623030373065626264386365643265333865373832386630343837326465643036303735376665373430376534393037646266663338626261222c226d657373616765223a227465366363674542424145413051414252596742534d553677767679593746624464704a365a5748706b4c7846304545726f4b4a36775165555369536633674d41514868757856507a324c5376534e663344454a2f374866653165562f5a78324d644e6b4b727770323865397a7538376a4d6e7275374c48685965367642523141756c48784b44446e4e62344f47686768386e6b6b7a48386775456e7551422f655a61324d326d32546539794234723636447a61364c34635258306f744a4b465661434177414141586c4d464e7077594a61616b524d64677332414341574f663459757151715976325233654e776d49655834517048686e37537a75624c76524838657931425a6a617a6a414141414141414141414141414141414a4d61735142414d4141413d3d222c22657870697265223a313632303438323730352c2261646472657373223a22303a61343632396436313764663933316438616438366564323466346361633364333231373838626130383235373431343466353832306632383934343933666263227d2c226d6574686f64223a227375626d69745472616e73616374696f6e227d"\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n message: 7b226d7367223a7b226d6573736167655f6964223a2266363364666332623030373065626264386365643265333865373832386630343837326465643036303735376665373430376534393037646266663338626261222c226d657373616765223a227465366363674542424145413051414252596742534d553677767679593746624464704a365a5748706b4c7846304545726f4b4a36775165555369536633674d41514868757856507a324c5376534e663344454a2f374866653165562f5a78324d644e6b4b727770323865397a7538376a4d6e7275374c48685965367642523141756c48784b44446e4e62344f47686768386e6b6b7a48386775456e7551422f655a61324d326d32546539794234723636447a61364c34635258306f744a4b465661434177414141586c4d464e7077594a61616b524d64677332414341574f663459757151715976325233654e776d49655834517048686e37537a75624c76524838657931425a6a617a6a414141414141414141414141414141414a4d61735142414d4141413d3d222c22657870697265223a313632303438323730352c2261646472657373223a22303a61343632396436313764663933316438616438366564323466346361633364333231373838626130383235373431343466353832306632383934343933666263227d2c226d6574686f64223a227375626d69745472616e73616374696f6e227d\n     abi: SafeMultisigWallet.abi.json\nConnecting to net.ton.dev\n\nMessageId: f63dfc2b0070ebbd8ced2e38e7828f04872ded060757fe7407e4907dbff38bba\nExpire at: Sat, 08 May 2021 17:05:05 +0300\nCalling method submitTransaction with parameters:\n{\n  "dest": "-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6",\n  "value": "1234000000",\n  "bounce": false,\n  "allBalance": false,\n  "payload": "te6ccgEBAQEAAgAAAA=="\n}\nProcessing...\nProcessing...\nSucceded.\nResult: {\n  "transId": "6959904904053506881"\n}\n')),(0,l.kt)("h2",{id:"47-broadcast-previously-generated-message-from-a-file"},"4.7. Broadcast previously generated message from a file"),(0,l.kt)("p",null,"Use the following command to broadcast a previously generated message, that is stored in a .boc file:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli sendfile <path_to_boc_file>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<path_to_boc_file>")," \u2013 path to the file where the message was saved."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli sendfile /home/user/ton/message.boc\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n     boc: /home/user/ton/message.boc\nConnecting to net.ton.dev\nSending message to account 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\nSucceded.\n")),(0,l.kt)("h2",{id:"48-decode-commands"},"4.8. Decode commands"),(0,l.kt)("h3",{id:"481-decode-boc-file"},"4.8.1. Decode BOC file"),(0,l.kt)("p",null,"Use the following command to decode previously generated messages in .boc files."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli decode msg --abi <contract.abi.json> <path_to_boc_file>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<path_to_boc_file>")," \u2013 path to the file where the message was saved."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli decode msg --abi SafeMultisigWallet.abi.json /home/user/ton/message.boc\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n     msg: /home/user/ton/message.boc\n     abi: SafeMultisigWallet.abi.json\n "Type": "external inbound message",\n "Header": {\n   "source": "",\n   "destination": "0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc",\n   "import_fee": "0"\n },\n "Body": "te6ccgEBAwEAqwAB4diOBnSVls3D8/zEb/Uj6hIfwKrdG2uRyCWmWx+mpFtdbaZNBcTW3yS3QiwLR8NgoqLcqoDsGwDA/RbrJLen+wXhJ7kAf3mWtjNptk3vcgeK+ug82ui+HEV9KLSShVWggMAAAF5S//FEWCWlSsTHYLNgAQFjn+GLqkKmL9kd3jcJiHl+EKR4Z+0s7my70R/HstQWY2s4wAAAAAAAAAAAAAAAAb5R0AQCAAA=",\nsubmitTransaction: {\n  "dest": "-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6",\n  "value": "234000000",\n  "bounce": false,\n  "allBalance": false,\n  "payload": "te6ccgEBAQEAAgAAAA=="\n}\n')),(0,l.kt)("h3",{id:"482-decode-message-body"},"4.8.2. Decode message body"),(0,l.kt)("p",null,"Use the following command to decode previously generated message body (can be obtained by decoding message .boc file)."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli decode body --abi <contract.abi.json> "<message_body>"\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<message_body>")," - Message body encoded as base64."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli decode body --abi SafeMultisigWallet.abi.json "te6ccgEBAwEAqwAB4diOBnSVls3D8/zEb/Uj6hIfwKrdG2uRyCWmWx+mpFtdbaZNBcTW3yS3QiwLR8NgoqLcqoDsGwDA/RbrJLen+wXhJ7kAf3mWtjNptk3vcgeK+ug82ui+HEV9KLSShVWggMAAAF5S//FEWCWlSsTHYLNgAQFjn+GLqkKmL9kd3jcJiHl+EKR4Z+0s7my70R/HstQWY2s4wAAAAAAAAAAAAAAAAb5R0AQCAAA="\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n    body: te6ccgEBAwEAqwAB4diOBnSVls3D8/zEb/Uj6hIfwKrdG2uRyCWmWx+mpFtdbaZNBcTW3yS3QiwLR8NgoqLcqoDsGwDA/RbrJLen+wXhJ7kAf3mWtjNptk3vcgeK+ug82ui+HEV9KLSShVWggMAAAF5S//FEWCWlSsTHYLNgAQFjn+GLqkKmL9kd3jcJiHl+EKR4Z+0s7my70R/HstQWY2s4wAAAAAAAAAAAAAAAAb5R0AQCAAA=\n     abi: SafeMultisigWallet.abi.json\nsubmitTransaction: {\n  "dest": "-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6",\n  "value": "234000000",\n  "bounce": false,\n  "allBalance": false,\n  "payload": "te6ccgEBAQEAAgAAAA=="\n}\n')),(0,l.kt)("h3",{id:"483-decode-account-commands"},"4.8.3. Decode account commands"),(0,l.kt)("h4",{id:"4831-decode-account-data-fields"},"4.8.3.1. Decode account data fields"),(0,l.kt)("p",null,"Use the following command to decode data fields of the contract."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli decode account data --abi <contract.abi.json> --addr <contract_address>\ntonos-cli decode account data --abi <contract.abi.json> --tvc <contract_file>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,"Contract address on blockchain or path to the file with contract's StateInit can be specified\nwith options ",(0,l.kt)("inlineCode",{parentName:"p"},"--addr")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"--tvc")," respectively."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli decode account data --abi tests/test_abi_v2.1.abi.json --tvc tests/decode_fields.tvc\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\n     tvc: tests/decode_fields.tvc\n     abi: tests/test_abi_v2.1.abi.json\nTVC fields:\n{\n  "__pubkey": "0xe8b1d839abe27b2abb9d4a2943a9143a9c7e2ae06799bd24dec1d7a8891ae5dd",\n  "__timestamp": "1626254942358",\n  "fun": "22",\n  "opt": "48656c6c6f",\n  "big": {\n    "value0": "0x0000000000000000000000000000000000000000000000000000000000000002",\n    "value1": "0x0000000000000000000000000000000000000000000000000000000000000008",\n    "value2": "0x0000000000000000000000000000000000000000000000000000000000000002",\n    "value3": "0x0000000000000000000000000000000000000000000000000000000000000000"\n  },\n  "a": "I like it.",\n  "b": "",\n  "length": "0x000000000000000000000000000000000000000000000000000000000000000f"\n}\n')),(0,l.kt)("h4",{id:"4832-decode-data-from-the-account-boc-file"},"4.8.3.2. Decode data from the account BOC file"),(0,l.kt)("p",null,"Use the following command to decode data from the file with BOC of the account and save\nStateInit to a separate file if needed."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli decode account boc <boc_file> [--dumptvc <tvc_path>]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<boc_file>")," - path to the file with BOC of the account. E.g. it can be obtained from\nthe TON Live.\n",(0,l.kt)("inlineCode",{parentName:"p"},"--dumptvc <tvc_path>")," - this flag can be specified to dump account StateInit to the <tvc_path> file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli decode account boc tests/account.boc --dumptvc acc.tvc\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\n     boc: tests/account.boc\ntvc_path: acc.tvc\naddress:       0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13\nacc_type:      Active\nbalance:       908097175476967754\nlast_paid:     1626706323\nlast_trans_lt: 246923000003\ncode_hash:     4e92716de61d456e58f16e4e867e3e93a7548321eace86301b51c8b80ca6239b\nstate_init:\n split_depth: None\n special: None\n data: te6ccgEBAgEAUAABQZXAaqdD0fkADdZLdUmPEGr0t+dEQjTX3mfqJpiPYYHf4AEAU6AFqBJgJG7Ncw9arsqLrQ5Aoeenp6RgXcbQ7vUibecz0mAAAAAMHrI00A==\n code: te6ccgECFAEAA6EAAib/APSkICLAAZL0oOGK7VNYMPShAwEBCvSkIPShAgAAAgEgBgQB/P9/Ie1E0CDXScIBn9P/0wD0Bfhqf/hh+Gb4Yo4b9AVt+GpwAYBA9A7yvdcL//hicPhjcPhmf/hh4tMAAY4SgQIA1xgg+QFY+EIg+GX5EPKo3iP4QvhFIG6SMHDeuvLgZSHTP9MfNDH4IyEBvvK5IfkAIPhKgQEA9A4gkTHeswUATvLgZvgAIfhKIgFVAcjLP1mBAQD0Q/hqIwRfBNMfAfAB+EdukvI83gIBIAwHAgFYCwgBCbjomPxQCQH++EFujhLtRNDT/9MA9AX4an/4Yfhm+GLe0XBtbwL4SoEBAPSGlQHXCz9/k3BwcOKRII43IyMjbwJvIsgizwv/Ic8LPzExAW8iIaQDWYAg9ENvAjQi+EqBAQD0fJUB1ws/f5NwcHDiAjUzMehfA8iCEHdEx+KCEIAAAACxzwsfIQoAom8iAssf9ADIglhgAAAAAAAAAAAAAAAAzwtmgQOYIs8xAbmWcc9AIc8XlXHPQSHN4iDJcfsAWzDA/44S+ELIy//4Rs8LAPhKAfQAye1U3n/4ZwDFuRar5/8ILdHG3aiaBBrpOEAz+n/6YB6Avw1P/ww/DN8MUcN+gK2/DU4AMAgegd5XuuF//wxOHwxuHwzP/ww8W98I0l5Gcm4/DNxfABo/CFkZf/8I2eFgHwlAPoAZPaqP/wzwAgEgDw0B17sV75NfhBbo4S7UTQ0//TAPQF+Gp/+GH4Zvhi3vpA1w1/ldTR0NN/39cMAJXU0dDSAN/RIiIic8hxzwsBIs8KAHPPQCTPFiP6AoBpz0Byz0AgySL7AF8F+EqBAQD0hpUB1ws/f5NwcHDikSCA4Ako4t+CMiAbuf+EojASEBgQEA9FswMfhq3iL4SoEBAPR8lQHXCz9/k3BwcOICNTMx6F8DXwP4QsjL//hGzwsA+EoB9ADJ7VR/+GcCASAREADHuORhh18ILdHCXaiaGn/6YB6Avw1P/ww/DN8MW9qaPwhfCKQN0kYOG9deXAy/AB8IWRl//wjZ4WAfCUA+gBk9qp8B5B9ghBodo92qfgBGHwhZGX//CNnhYB8JQD6AGT2qj/8M8AIC2hMSAC2vhCyMv/+EbPCwD4SgH0AMntVPgP8gCAB1pwIccAnSLQc9ch1wsAwAGQkOLgIdcNH5LyPOFTEcAAkODBAyKCEP////28sZLyPOAB8AH4R26S8jzeg=\n lib:\n\n")),(0,l.kt)("h3",{id:"484-decode-stateinit-fields"},"4.8.4. Decode stateInit fields"),(0,l.kt)("p",null,"StateInit can be decoded for network account or file with account BOC or TVC."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli decode stateinit [--tvc] [--boc] <input>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<input>")," - depending on the flags this parameter should contain:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"path to the file with account BOC if ",(0,l.kt)("inlineCode",{parentName:"li"},"--boc")," flag is specified;"),(0,l.kt)("li",{parentName:"ul"},"path to the TVC file if ",(0,l.kt)("inlineCode",{parentName:"li"},"--tvc")," flag is specified;"),(0,l.kt)("li",{parentName:"ul"},"contract network address otherwise.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli decode stateinit --boc account.boc\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\n   input: account.boc\nDecoded data:\n{\n  "split_depth": "None",\n  "special": "None",\n  "data": "te6ccgEBAgEAkQABowWvkA5qHmFvsIUxqyOHGegsw+mhvvuZc5taNDPm+bI8AAABfFtnzLOAAAAAAAAAAEAMpbXqnWxVq2MH9mu2c3ABPAlgHxYzBcVVGea3KTKb6UgBAHOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAO5rKAI",\n  "code": "te6ccgECKwEABs0ABCSK7VMg4wMgwP/jAiDA/uMC8gsoAgEqAuDtRNDXScMB+GaNCGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT4aSHbPNMAAZ+BAgDXGCD5AVj4QvkQ8qje0z8B+EMhufK0IPgjgQPoqIIIG3dAoLnytPhj0x8B+CO88rnTHwHbPPI8CwMDUu1E0NdJwwH4ZiLQ0wP6QDD4aak4ANwhxwDjAiHXDR/yvCHjAwHbPPI8JycDAiggghB7lnbGu+MCIIIQf7YUIrrjAgYEAh4w+Eby4EzT/9HbPOMA8gAFJQAKcrYJ8vAEUCCCEBM3c0q74wIgghBJt6tBu+MCIIIQaETH67vjAiCCEHuWdsa74wIcEwwHBFAgghBotV8/uuMCIIIQcXluqLrjAiCCEHTvWym64wIgghB7lnbGuuMCChYICAMoMPhG8uBM+EJu4wDTP9HbPNs88gAjCSUAcPhJ+Gtopv5g+HD4anAg+EnIz4WIzo0FkB1vNFQAAAAAAAAAAAAAAAAAH4hPIkDPFssfyz/JcPsAAiIw+EJu4wD4RvJz0fgA2zzyAAslAfTtRNDXScIBio5vcO1E0PQFcPhqjQhgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE+GuNCGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT4bHD4bXD4bnD4b3D4cIBA9A7yvdcL//hicPhj4iMEUCCCEE5mPkG64wIgghBX1CDIuuMCIIIQaBC/TrrjAiCCEGhEx+u64wIRFA8NAyQw+Eby4Ez4Qm7jANHbPNs88gAjDiUAFPhJ+Gtopv5g+HADSjD4RvLgTPhCbuMA+kGV1NHQ+kDf1w0/ldTR0NM/39HbPNs88gAjECUAdPhJ+Gtopv5g+HD4avhscCD4ScjPhYjOjQWQHW80VAAAAAAAAAAAAAAAAAAfiE8iQM8Wyx/LP8lw+wACGjD4RvLgTNHbPOMA8gASJQAybXCVIIEnD7ueVHABWMjL/1mBAQD0QzLoWwRQIIIQKICYI7rjAiCCEDsU9ku64wIgghBAegYiuuMCIIIQSberQbrjAhoYFhQDNjD4RvLgTPhCbuMA+kGV1NHQ+kDf0ds82zzyACMVJQBc+GxwIPhJyM+FiM6NBZAdbzRUAAAAAAAAAAAAAAAAAB+ITyJAzxbLH8s/yXD7AANiMPhG8uBM+EJu4wDTP/pBldTR0PpA39cNH5XU0dDTH9/XDR+V1NHQ0x/f0ds82zzyACMXJQCE+En4a2im/mD4cFUC+GpY+GwB+G34bnAg+EnIz4WIzo0FkB1vNFQAAAAAAAAAAAAAAAAAH4hPIkDPFssfyz/JcPsAA5Aw+Eby4Ez4Qm7jANHbPCeOLynQ0wH6QDAxyM+HIM5xzwthXmDIz5LsU9kuyz/OVUDIzssfyx/KAMt/zc3JcPsAkl8H4uMA8gAjGSUAHPhK+Ev4TPhN+E74T/hQAyQw+Eby4Ez4Qm7jANHbPNs88gAjGyUA1vhJ+Gtopv5g+HD4ScjPhYjOi/F7AAAAAAAAAAAAAAAAABDPFslx+wCNCGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABSNBXAAAAAAAAAAAAAAAAARRY3EgAAAAGDIzs7JcPsABE4ggghUryu64wIgghAKrBj9uuMCIIIQEvQDcLrjAiCCEBM3c0q64wIkIR8dAyQw+Eby4Ez4Qm7jANHbPNs88gAjHiUAcvhJ+Gtopv5g+HB/+G9wIPhJyM+FiM6NBZAdbzRUAAAAAAAAAAAAAAAAAB+ITyJAzxbLH8s/yXD7AAMkMPhG8uBM+EJu4wDR2zzbPPIAIyAlAHL4SfhraKb+YPhwcPhvcCD4ScjPhYjOjQWQHW80VAAAAAAAAAAAAAAAAAAfiE8iQM8Wyx/LP8lw+wADKDD4RvLgTPhCbuMA0z/R2zzbPPIAIyIlAHb4avhJ+Gtopv5g+HCBAN6AC/hJyM+FiM6NBZAdbzRUAAAAAAAAAAAAAAAAAB+ITyJAzxbLH8s/yXD7AABc7UTQ0//TP9MAMdM/+kDU0dD6QNMf0x/SANN/0fhw+G/4bvht+Gz4a/hq+GP4YgIaMPhG8uBM0ds84wDyACYlAFj4UPhP+E74TfhM+Ev4SvhD+ELIy//LP8+Dyz/OVUDIzssfyx/KAMt/zcntVABcgQDegAv4ScjPhYjOjQVOYloAAAAAAAAAAAAAAAAAAB+ITyJAzxbLH8s/yXD7AAAK+Eby4EwCCvSkIPShKikAFHNvbCAwLjUxLjAAAA==",\n  "code_hash": "82236b6062da156069b3cbf5020daf1a17b76869d676df216177fca950ab37df",\n  "data_hash": "7197d8544363ac2b2718240a84448584a675727ec8d42efd3726e82a4c8a3853",\n  "code_depth": "7",\n  "data_depth": "1",\n  "version": "sol 0.51.0",\n  "lib":  ""\n}\n\n$ tonos-cli decode stateinit --tvc fakeDepool.tvc\nConfig: default\nInput arguments:\n   input: fakeDepool.tvc\nDecoded data:\n{\n  "split_depth": "None",\n  "special": "None",\n  "data": "te6ccgEBAgEAKAABAcABAEPQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAg",\n  "code": "te6ccgECKwEABs0ABCSK7VMg4wMgwP/jAiDA/uMC8gsoAgEqAuDtRNDXScMB+GaNCGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT4aSHbPNMAAZ+BAgDXGCD5AVj4QvkQ8qje0z8B+EMhufK0IPgjgQPoqIIIG3dAoLnytPhj0x8B+CO88rnTHwHbPPI8CwMDUu1E0NdJwwH4ZiLQ0wP6QDD4aak4ANwhxwDjAiHXDR/yvCHjAwHbPPI8JycDAiggghB7lnbGu+MCIIIQf7YUIrrjAgYEAh4w+Eby4EzT/9HbPOMA8gAFJQAKcrYJ8vAEUCCCEBM3c0q74wIgghBJt6tBu+MCIIIQaETH67vjAiCCEHuWdsa74wIcEwwHBFAgghBotV8/uuMCIIIQcXluqLrjAiCCEHTvWym64wIgghB7lnbGuuMCChYICAMoMPhG8uBM+EJu4wDTP9HbPNs88gAjCSUAcPhJ+Gtopv5g+HD4anAg+EnIz4WIzo0FkB1vNFQAAAAAAAAAAAAAAAAAH4hPIkDPFssfyz/JcPsAAiIw+EJu4wD4RvJz0fgA2zzyAAslAfTtRNDXScIBio5vcO1E0PQFcPhqjQhgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE+GuNCGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT4bHD4bXD4bnD4b3D4cIBA9A7yvdcL//hicPhj4iMEUCCCEE5mPkG64wIgghBX1CDIuuMCIIIQaBC/TrrjAiCCEGhEx+u64wIRFA8NAyQw+Eby4Ez4Qm7jANHbPNs88gAjDiUAFPhJ+Gtopv5g+HADSjD4RvLgTPhCbuMA+kGV1NHQ+kDf1w0/ldTR0NM/39HbPNs88gAjECUAdPhJ+Gtopv5g+HD4avhscCD4ScjPhYjOjQWQHW80VAAAAAAAAAAAAAAAAAAfiE8iQM8Wyx/LP8lw+wACGjD4RvLgTNHbPOMA8gASJQAybXCVIIEnD7ueVHABWMjL/1mBAQD0QzLoWwRQIIIQKICYI7rjAiCCEDsU9ku64wIgghBAegYiuuMCIIIQSberQbrjAhoYFhQDNjD4RvLgTPhCbuMA+kGV1NHQ+kDf0ds82zzyACMVJQBc+GxwIPhJyM+FiM6NBZAdbzRUAAAAAAAAAAAAAAAAAB+ITyJAzxbLH8s/yXD7AANiMPhG8uBM+EJu4wDTP/pBldTR0PpA39cNH5XU0dDTH9/XDR+V1NHQ0x/f0ds82zzyACMXJQCE+En4a2im/mD4cFUC+GpY+GwB+G34bnAg+EnIz4WIzo0FkB1vNFQAAAAAAAAAAAAAAAAAH4hPIkDPFssfyz/JcPsAA5Aw+Eby4Ez4Qm7jANHbPCeOLynQ0wH6QDAxyM+HIM5xzwthXmDIz5LsU9kuyz/OVUDIzssfyx/KAMt/zc3JcPsAkl8H4uMA8gAjGSUAHPhK+Ev4TPhN+E74T/hQAyQw+Eby4Ez4Qm7jANHbPNs88gAjGyUA1vhJ+Gtopv5g+HD4ScjPhYjOi/F7AAAAAAAAAAAAAAAAABDPFslx+wCNCGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABSNBXAAAAAAAAAAAAAAAAARRY3EgAAAAGDIzs7JcPsABE4ggghUryu64wIgghAKrBj9uuMCIIIQEvQDcLrjAiCCEBM3c0q64wIkIR8dAyQw+Eby4Ez4Qm7jANHbPNs88gAjHiUAcvhJ+Gtopv5g+HB/+G9wIPhJyM+FiM6NBZAdbzRUAAAAAAAAAAAAAAAAAB+ITyJAzxbLH8s/yXD7AAMkMPhG8uBM+EJu4wDR2zzbPPIAIyAlAHL4SfhraKb+YPhwcPhvcCD4ScjPhYjOjQWQHW80VAAAAAAAAAAAAAAAAAAfiE8iQM8Wyx/LP8lw+wADKDD4RvLgTPhCbuMA0z/R2zzbPPIAIyIlAHb4avhJ+Gtopv5g+HCBAN6AC/hJyM+FiM6NBZAdbzRUAAAAAAAAAAAAAAAAAB+ITyJAzxbLH8s/yXD7AABc7UTQ0//TP9MAMdM/+kDU0dD6QNMf0x/SANN/0fhw+G/4bvht+Gz4a/hq+GP4YgIaMPhG8uBM0ds84wDyACYlAFj4UPhP+E74TfhM+Ev4SvhD+ELIy//LP8+Dyz/OVUDIzssfyx/KAMt/zcntVABcgQDegAv4ScjPhYjOjQVOYloAAAAAAAAAAAAAAAAAAB+ITyJAzxbLH8s/yXD7AAAK+Eby4EwCCvSkIPShKikAFHNvbCAwLjUxLjAAAA==",\n  "code_hash": "82236b6062da156069b3cbf5020daf1a17b76869d676df216177fca950ab37df",\n  "data_hash": "55a703465a160dce20481375de2e5b830c841c2787303835eb5821d62d65ca9d",\n  "code_depth": "7",\n  "data_depth": "1",\n  "version": "sol 0.51.0",\n  "lib":  ""\n}\n\n$ tonos-cli decode stateinit 989439e29664a71e57a21bff0ff9896b5e58018fcac32e83fade913c4f43479e\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\n   input: 989439e29664a71e57a21bff0ff9896b5e58018fcac32e83fade913c4f43479e\nConnecting to http://127.0.0.1/\nDecoded data:\n{\n  "split_depth": "None",\n  "special": "None",\n  "data": "te6ccgEBAQEASwAAkWOlCuhADbJ3v+8vaQu9RUczWADX7uP05UFjmpt/sOAVAAABfF7iC8SAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMsA=",\n  "code": "te6ccgECDwEAAakABCSK7VMg4wMgwP/jAiDA/uMC8gsMAgEOApztRNDXScMB+GYh2zzTAAGOEoECANcYIPkBWPhCIPhl+RDyqN7TPwH4QyG58rQg+COBA+iogggbd0CgufK0+GPTHwH4I7zyudMfAds88jwFAwNK7UTQ10nDAfhmItDXCwOpOADcIccA4wIh1w0f8rwh4wMB2zzyPAsLAwM8IIIQJe+yCLrjAiCCEETv7Oy64wIgghBotV8/uuMCBwYEAkgw+EJu4wD4RvJz0fhC8uBl+EUgbpIwcN74Qrry4Gb4ANs88gAFCAFK7UTQ10nCAYqOGnDtRND0BXD4aoBA9A7yvdcL//hicPhjcPhq4goBUDDR2zz4SiGOHI0EcAAAAAAAAAAAAAAAADE7+zsgyM7L/8lw+wDe8gAKAygw+Eby4Ez4Qm7jANP/0ds82zzyAAoJCAAk+Er4Q/hCyMv/yz/Pg8v/ye1UACr4RSBukjBw3vhCuvLgZvgA+Eqg+GoAJu1E0NP/0z/TADHT/9H4avhj+GIACvhG8uBMAgr0pCD0oQ4NABRzb2wgMC41MS4wAAA=",\n  "code_hash": "d840258803b9d7472f2d959a5db7bb42d246f5e8f0dc6a94bb459ebb730a0e01",\n  "data_hash": "0ea45bfc864790ee1d66301059fa2cbdaba7a75e9e4f4bc1d2fbffd8401ee798",\n  "code_depth": "5",\n  "data_depth": "0",\n  "version": "sol 0.51.0",\n  "lib":  ""\n}\n')),(0,l.kt)("h2",{id:"49-generate-payload-for-internal-function-call"},"4.9. Generate payload for internal function call"),(0,l.kt)("p",null,"Use the following command to generate payload for internal function call:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli body [--abi <contract.abi.json>] <method> <params>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<method>")," - the method being called."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - parameters of the called method."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli body submitTransaction \'{"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":234000000,"bounce":false,"allBalance":false,"payload":""}\' --abi SetcodeMultisigWallet.abi.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n  method: submitTransaction\n  params: {"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":234000000,"bounce":false,"allBalance":false,"payload":""}\n     abi: SetcodeMultisigWallet.abi.json\n  output: None\nMessage body: te6ccgEBAgEAOwABaxMdgs2f4YuqQqYv2R3eNwmIeX4QpHhn7SzubLvRH8ey1BZjazjAAAAAAAAAAAAAAAABvlHQBAEAAA==\n')),(0,l.kt)("h2",{id:"410-alternative-syntax-for-call-deploy-and-run-commands"},"4.10. Alternative syntax for call, deploy and run commands"),(0,l.kt)("p",null,"To facilitate usage of tonos-cli use commands ",(0,l.kt)("inlineCode",{parentName:"p"},"callx"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"runx")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"deployx")," instead of ",(0,l.kt)("inlineCode",{parentName:"p"},"call"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"run")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"deploy"),".\nThese alternative syntax commands have almost the same syntax as classic, but allow to specify address, abi and keys\noptions in the config file. Also, this commands allow to skip params option if command doesn't need it.\nExamples:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# specify options manually\ntonos-cli callx --keys giver.key --abi giver.abi.json --addr 0:841288ed3b55d9cdafa806807f02a0ae0c169aa5edfe88a789a6482429756a94 sendGrams --dest 841288ed3b55d9cdafa806807f02a0ae0c169aa5edfe88a789a6482429756a94 --amount 1000000000\n\n# options are taken from the config\ntonos-cli config --abi giver.abi.json --addr 0:841288ed3b55d9cdafa806807f02a0ae0c169aa5edfe88a789a6482429756a94 --keys giver.key\ntonos-cli callx sendGrams --dest 841288ed3b55d9cdafa806807f02a0ae0c169aa5edfe88a789a6482429756a94 --amount 1000000000\n\n# if contract function or constructor doesn't take arguments, parameters can be skipped\ntonos-cli deployx contract.tvc\ntonos-cli runx getParameters\n")),(0,l.kt)("h1",{id:"5-debot-commands"},"5. DeBot commands"),(0,l.kt)("p",null,"TONOS-CLI has a built-in ",(0,l.kt)("a",{parentName:"p",href:"/develop/smart-contract/debots/getting-started"},"DeBot")," browser, which is regularly updated with the most recent versions of DEngine."),(0,l.kt)("p",null,"To call a DeBot, use the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli debot fetch <--debug> <debot_address>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<debot_address>")," - address of the DeBot contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<--debug>")," - runs DeBot in verbose mode."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli debot fetch 0:09403116d2d04f3d86ab2de138b390f6ec1b0bc02363dbf006953946e807051e\nConfig: /home/user/tonos-cli.conf.json\nConnecting to net.ton.dev\nDeBot Info:\nName   : Multisig\nVersion: 1.2.0\nAuthor : TON Labs\nPublisher: TON Labs\nSupport: 0:66e01d6df5a8d7677d9ab2daf7f258f1e2a7fe73da5320300395f99e01dc3b5f\nDescription: DeBot for multisig wallets\nHi, I will help you work with multisig wallets that can have multiple custodians.\nRun the DeBot (y/n)?\ny\n\nWhich wallet do you want to work with?\n")),(0,l.kt)("p",null,"Further input depends on the DeBot, which usually explains any actions it offers you to perform."),(0,l.kt)("h1",{id:"6-multisig-commands"},"6. Multisig commands"),(0,l.kt)("p",null,"Multisig commands allow you to work with any existing ",(0,l.kt)("a",{parentName:"p",href:"/develop/smart-contract/multisignature-wallet"},"Multisig wallets")," in a more convenient way and with no need of ABI files."),(0,l.kt)("h2",{id:"61-send-tokens"},"6.1. Send tokens"),(0,l.kt)("p",null,"Use the following command to send tokens to any recipient:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli multisig send --addr <sender_address> --dest <recipient_address> --purpose <"text_in_quotes"> --sign <path_to_keys_or_seed_phrase> --value *number*\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<sender_address>")," - address of the multisig wallet that tokens are sent from."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<recipient_address>")," - address of the account tokens are sent to."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},'<"text_in_quotes">')," - accompanying message. Only the recipient will be able to decrypt and read it."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<path_to_keys_or_seed_phrase>")," - path to sender wallet key file or the corresponding seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--value *number*")," - value to be transferred (in tokens)."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli multisig send --addr 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3 --dest 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc --purpose "test transaction" --sign key.json --value 6\nConfig: /home/user/tonos-cli.conf.json\nConnecting to net.ton.dev\nGenerating external inbound message...\n\nMessageId: 62b1420ac98e586f29bf79bc2917a0981bb3f15c4757e8dca65370c19146e327\nExpire at: Thu, 13 May 2021 13:26:06 +0300\nProcessing...\nSucceeded.\nResult: {\n  "transId": "0"\n}.\n')),(0,l.kt)("h1",{id:"62-deploy-wallet"},"6.2. Deploy wallet"),(0,l.kt)("p",null,"Use the following command to deploy a multisignature wallet:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli multisig deploy [--setcode] [--owners <owners_list>] [--confirms <confirms_cnt>] [--local <local_giver_value>] --keys <path_to_keys_or_seed_phrase>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--setcode")," - flag that changes type of the wallet to the SetcodeMultisigWallet. If not specified, a SafeMultisigWallet is deployed."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--owners <owners_list>")," - option that sets wallet owners. If not specified, the only owner is deploy signed (set with --keys option).\nList of owners must be specified by their public keys in hex format, split by the ",(0,l.kt)("inlineCode",{parentName:"p"},","),"."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--confirms <confirms_cnt>")," - option that sets required number of confirmations. If not specified, is set to 1."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--local <local_giver_value>")," - value that should be transferred from the local giver if wallet is deployed onto the Node SE (in nanotons)."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--keys <path_to_keys_or_seed_phrase>")," - path to the wallet key file or the corresponding seed phrase in quotes."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli multisig deploy -k "young tell target alter sport dignity enforce improve pottery fashion alert genuine" --local 1_000_000_000\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nWallet address: 0:4d892e63989c1c0ad64b0bbe22e8d036b0da271c19b6686d01bd29a99dcbc86d\nConnecting to http://127.0.0.1/\nExpire at: Mon, 13 Sep 2021 14:55:29 +0300\nMessageId: 3c3537e36e2a4a4018b7463db2bf57efad5dc0dc0233b040c2f5e165cb43e887\nMessageId: 8102067efc190b2e728d91d632c985634fc4717b7ae1137a4bbcf756c4cf8705\nWallet successfully deployed\nWallet address: 0:4d892e63989c1c0ad64b0bbe22e8d036b0da271c19b6686d01bd29a99dcbc86d\n\n# deploy with owners\ntonos-cli multisig deploy -l 5000000000 -c 2 -o 8b445b0feab10b9abf4e039d649348ec8662e3673fe9c37b7208c4d9d04c9b3f,ddc5bc7198c90feb75d9ce09e1b1f25a7e14a252fef31b50fac048c6ac3ee46c -k test.key\n')),(0,l.kt)("h1",{id:"7-depool-commands"},"7. DePool commands"),(0,l.kt)("h2",{id:"71-configure-tonos-cli-for-depool-operations"},"7.1. Configure TONOS-CLI for DePool operations"),(0,l.kt)("p",null,"For all commands listed below, the DePool address, the wallet making the stake, the amount of fee to pay for DePool's services and the path to the keyfile/seed phrase may be specified in the TONOS-CLI config file in advance:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli config --addr <address> --wallet <address> --no-answer true | false --keys <path_to_keys or seed_phrase> --depool_fee <depool_fee>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--addr <address>")," - the address of the DePool"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wallet <address>")," - the address of the wallet making the stake"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--no-answer true | false")," - no-answer flag, which determines, whether TONOS-CLI waits for DePool answer when performing various actions and prints it out, or simply generates and sends a transaction through the specified multisig wallet, without monitoring transaction results in the DePool. By default is set to ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),". Setting to false can be useful for catching rejected stakes or other errors on the DePool side."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<path_to_keys or seed_phrase>")," - either the keyfile for the wallet making the stake, or the seed phrase in quotes"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--depool_fee <depool_fee>")," - value in tons, that is additionally attached to the message sent to the DePool to cover its fees. Change is returned to the sender. The default value, used if this option isn't configured, is 0.5 tons. It should be increased only if it proves insufficient and DePool begins to run out of gas on execution."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli config --addr 0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace --wallet 0:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --no-answer false --keys "dizzy modify exotic daring gloom rival pipe disagree again film neck fuel" --depool_fee 0.8\n')),(0,l.kt)("p",null,"In this case all DePool commands allow to omit ",(0,l.kt)("inlineCode",{parentName:"p"},"--addr"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--wallet"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"--sign")," options."),(0,l.kt)("p",null,"Below is an example of similar DePool commands with and without waiting for DePool answer."),(0,l.kt)("p",null,"With waiting for DePool answer:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli depool --addr 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf stake ordinary --value 25 --wallet 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3 --sign key.json --wait-answer\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n  depool: 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf\n  wallet: 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3\n   stake: 25\n    keys: key.json\nConnecting to https://net.ton.dev\nGenerating external inbound message...\n\nMessageId: bf3cfc02dd8eff3edbd7a70e63ce3e91e61340676bf46c43cf534ccbebc9865a\nExpire at: unknown\nMultisig message processing...\n\nMessage was successfully sent to the multisig, waiting for message to be sent to the depool...\n\nRequest was successfully sent to depool.\n\nWaiting for depool answer...\n\nAnswer:\nId: 453c03c3ad4985330237ed16998e3f7a5b6936c717b2aac753967fd9c03f2926\nValue: 25.489215000\nCreated at: 1620907654 (2021-05-13 12:07:34.000)\nDecoded body:\nreceiveAnswer {"errcode":"1","comment":"100000000000"}\n\nAnswer status: STAKE_TOO_SMALL\nComment: 100000000000\n\nDone\n')),(0,l.kt)("p",null,"Same command without waiting for DePool answer:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli depool --addr 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf stake ordinary --value 25 --wallet 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3 --sign key.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n  depool: 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf\n  wallet: 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3\n   stake: 25\n    keys: key.json\nConnecting to https://net.ton.dev\nGenerating external inbound message...\n\nMessageId: e1b0aba39233e07daf6a65c2426e273e9d68a75e3b440893251fbce56c6a756d\nExpire at: Thu, 13 May 2021 15:09:43 +0300\nProcessing...\nSucceeded.\nResult: {\n  "transId": "0"\n}\n')),(0,l.kt)("p",null,"In both cases the stake is rejected for being too small, but with ",(0,l.kt)("inlineCode",{parentName:"p"},"no-answer")," set to ",(0,l.kt)("inlineCode",{parentName:"p"},"false")," it isn't immediately apparent, as only the results of the sussecful multisig transaction are displayed."),(0,l.kt)("h2",{id:"72-deposit-stakes"},"7.2. Deposit stakes"),(0,l.kt)("h3",{id:"721-ordinary-stake"},"7.2.1. Ordinary stake"),(0,l.kt)("p",null,"Ordinary stake is the most basic type of stake. It and the rewards from it belong to the wallet that made it."),(0,l.kt)("p",null,"It is invested completely in the current pooling round, and can be reinvested every second round (as odd and even rounds are handled by DePool separately). Thus to participate in every DePool round, an ordinary stake should be invested in two consecutive rounds, so it can later be reinvested in odd and even rounds both."),(0,l.kt)("p",null,"Ordinary stake must exceed DePool minimum stake. Check DePool's page on ",(0,l.kt)("a",{parentName:"p",href:"https://ton.live/dePools"},"ton.live")," to find out the minimum stake."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] stake ordinary [--wallet <msig_address>] --value <number> [--sign <key_file or seed_phrase>] [--wait-answer]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of the wallet making a stake."),(0,l.kt)("p",null,"all --value parameters must be defined in tons, like this: ",(0,l.kt)("inlineCode",{parentName:"p"},"--value 10.5"),", which means the value is 10,5 tons."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<key_file or seed_phrase>")," - either the keyfile for the wallet making the stake, or the seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," - optional flag, which forces TONOS-CLI to wait for DePool answer when performing the action and print out the resulting message. Without it only the results of the multisig transaction to DePool will be displayed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli depool --addr 0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake ordinary --wallet 0:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value 100.5 --sign "dizzy modify exotic daring gloom rival pipe disagree again film neck fuel"\n')),(0,l.kt)("h3",{id:"722-vesting-stake"},"7.2.2. Vesting stake"),(0,l.kt)("p",null,"A wallet can make a vesting stake and define a target participant address (beneficiary) who will own this stake, provided the beneficiary has previously indicated the donor as its vesting donor address. This condition prevents unauthorized vestings from blocking the beneficiary from receiving an expected vesting stake from a known address."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"To receive a vesting stake beneficiary must"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"already have an ordinary stake of any amount in the DePool"),(0,l.kt)("li",{parentName:"ul"},"set the donor address with the following command:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] donor vesting [--wallet <beneficiary_address>] --donor <donor_address> [--sign <key_file or seed_phrase>] [--wait-answer]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<beneficiary_address>")," - address of the beneficiary wallet ."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<donor_address>")," - address of the donor wallet."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<key_file or seed_phrase>")," - either the keyfile for the beneficiary wallet, or the seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," - optional flag, which forces TONOS-CLI to wait for DePool answer when performing the action and print out the resulting message. Without it only the results of the multisig transaction to DePool will be displayed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli depool --addr 0:3187b4d738d69776948ca8543cb7d250c042d7aad1e0aa244d247531590b9147 donor vesting --wallet 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3 --donor 0:279afdbd7b2cbf9e65a5d204635a8630aec2baec60916ffdc9c79a09d2d2893d --sign "deal hazard oak major glory meat robust teach crush plastic point edge"\n')),(0,l.kt)("p",null,"Not the whole stake is available to the beneficiary at once. Instead it is split into parts and the next part of stake becomes available to the beneficiary (is transformed into beneficiary's ordinary stake) at the end of the round that coincides with the end of the next withdrawal period. Rewards from vesting stake are always added to the beneficiary's ordinary stake. To withdraw these funds, beneficiary should use use one of the ",(0,l.kt)("a",{parentName:"p",href:"#75-withdraw-stakes"},"withdrawal functions"),"."),(0,l.kt)("p",null,"Please note, that the vesting stake is split into two equal parts by the DePool, to be used in both odd and even rounds, so to ensure DePool can participate in elections with just one vesting stake where validator wallet is beneficiary, the stake should exceed ",(0,l.kt)("inlineCode",{parentName:"p"},"validatorAssurance")," ",(0,l.kt)("em",{parentName:"p"},"2. Similarly, to ensure any vesting stake is accepted, make sure it exceeds ",(0,l.kt)("inlineCode",{parentName:"em"},"minStake")," "),"2."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Donor uses the following command to make a vesting stake:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] stake vesting [--wallet <msig_address>] --value <number> --total <days> --withdrawal <days> --beneficiary <address> [--sign <key_file or seed_phrase>] [--wait-answer]\n")),(0,l.kt)("p",null,"Where"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of the donor wallet making a stake."),(0,l.kt)("p",null,"all ",(0,l.kt)("inlineCode",{parentName:"p"},"--value")," parameters must be defined in tons, like this: ",(0,l.kt)("inlineCode",{parentName:"p"},"--value 10.5"),", which means the value is 10,5 tons."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"total <days>")," - total period, for which the stake is made."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"withdrawal <days>")," - withdrawal period (each time a withdrawal period ends, a portion of the stake is released to the beneficiary)."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"There are limitations for period settings: withdrawalPeriod should be <= totalPeriod, totalPeriod cannot exceed 18 years or be <=0, totalPeriod should be exactly divisible by withdrawalPeriod.")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"beneficiary <address>")," - address of the beneficiary (wallet that will receive rewards from the stake and, in parts over time, the vesting stake itself). Cannot be the same as the wallet making the stake."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<key_file or seed_phrase>")," - either the keyfile for the donor wallet making the stake, or the seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," - optional flag, which forces TONOS-CLI to wait for DePool answer when performing the action and print out the resulting message. Without it only the results of the multisig transaction to DePool will be displayed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli depool --addr 0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake vesting --wallet 0:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value 1000 --total 360 --withdrawal 30 --beneficiary 0:f22e02a1240dd4b5201f8740c38f2baf5afac3cedf8f97f3bd7cbaf23c7261e3 --sign "dizzy modify exotic daring gloom rival pipe disagree again film neck fuel"\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: Each participant can concurrently be the beneficiary of only one vesting stake. Once the current vesting stake expires, another can be made for the participant.")),(0,l.kt)("h3",{id:"723-lock-stake"},"7.2.3. Lock stake"),(0,l.kt)("p",null,"A wallet can make a lock stake, in which it locks its funds in DePool for a defined period, but rewards from this stake will be payed to another target participant (beneficiary). As with vesting, the beneficiary has to indicate the donor as its lock donor address before receiving a lock stake. This condition prevents unauthorized lock stakes from blocking the beneficiary from receiving an expected lock stake from a known address."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"To receive a lock stake beneficiary must"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"already have an ordinary stake of any amount in the DePool"),(0,l.kt)("li",{parentName:"ul"},"set the donor address with the following command:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] donor lock [--wallet <beneficiary_address>] --donor <donor_address> [--sign <key_file or seed_phrase>] [--wait-answer]\n")),(0,l.kt)("p",null,"Where"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<beneficiary_address>")," - address of the beneficiary wallet ."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<donor_address>")," - address of the donor wallet."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<key_file or seed_phrase>")," - either the keyfile for the beneficiary wallet, or the seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," - optional flag, which forces TONOS-CLI to wait for DePool answer when performing the action and print out the resulting message. Without it only the results of the multisig transaction to DePool will be displayed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli depool --addr 0:3187b4d738d69776948ca8543cb7d250c042d7aad1e0aa244d247531590b9147 donor lock --wallet 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3 --donor 0:279afdbd7b2cbf9e65a5d204635a8630aec2baec60916ffdc9c79a09d2d2893d --sign "deal hazard oak major glory meat robust teach crush plastic point edge"\n')),(0,l.kt)("p",null,"Like vesting stake, lock stake can be configured to be unlocked in parts at the end of each round that coincides with the end of the next withdrawal period. At the end of each period the Lock Stake is returned to the wallet which locked it. The rewards of a lock stake are always added to the ordinary stake of the beneficiary. To withdraw these funds, beneficiary should use use one of the ",(0,l.kt)("a",{parentName:"p",href:"#75-withdraw-stakes"},"withdrawal functions"),"."),(0,l.kt)("p",null,"Please note that the lock stake is split into two equal parts by the DePool, to be used in both odd and even rounds, so to ensure DePool can participate in elections with just one lock stake where validator wallet is beneficiary, the stake should equal ",(0,l.kt)("inlineCode",{parentName:"p"},"validatorAssurance")," ",(0,l.kt)("em",{parentName:"p"},"2. Similarly, to ensure any vesting stake is accepted, make sure it exceeds ",(0,l.kt)("inlineCode",{parentName:"em"},"minStake")," "),"2."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Donor uses the following command to make a lock stake:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] stake lock [--wallet <msig_address>] --value <number> --total <days> --withdrawal <days> --beneficiary <address> [--sign <key_file or seed_phrase>] [--wait-answer]\n")),(0,l.kt)("p",null,"Where"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of the donor wallet making a stake."),(0,l.kt)("p",null,"all ",(0,l.kt)("inlineCode",{parentName:"p"},"--value")," parameters must be defined in tons, like this: ",(0,l.kt)("inlineCode",{parentName:"p"},"--value 10.5"),", which means the value is 10,5 tons."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"total <days>")," - total period, for which the stake is made."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"withdrawal <days>")," - withdrawal period (each time a withdrawal period ends, a portion of the stake is returned to the wallet that made the stake)."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"There are limitations for period settings: withdrawalPeriod should be <= totalPeriod, totalPeriod cannot exceed 18 years or be <=0, totalPeriod should be exactly divisible by withdrawalPeriod.")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"beneficiary <address>"),"address of the beneficiary (wallet that will receive rewards from the stake). Cannot be the same as the wallet making the stake."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"key_file or seed_phrase")," - either the keyfile for the donor wallet making the stake, or the seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," - optional flag, which forces TONOS-CLI to wait for DePool answer when performing the action and print out the resulting message. Without it only the results of the multisig transaction to DePool will be displayed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli depool --addr 0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake lock --wallet 0:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value 1000 --total 360 --withdrawal 30 --beneficiary 0:f22e02a1240dd4b5201f8740c38f2baf5afac3cedf8f97f3bd7cbaf23c7261e3 --sign "dizzy modify exotic daring gloom rival pipe disagree again film neck fuel"\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: Each participant can concurrently be the beneficiary of only one lock stake. Once the current lock stake expires, another can be made for the participant.")),(0,l.kt)("h2",{id:"73-remove-stakes"},"7.3. Remove stakes"),(0,l.kt)("p",null,"This command removes an ordinary stake from a pooling round (while it has not been staked in the Elector yet):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] stake remove [--wallet <msig_address>] --value <number> [--sign <key_file or seed_phrase>] [--wait-answer]\n")),(0,l.kt)("p",null,"Where"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of the wallet that made the stake."),(0,l.kt)("p",null,"all ",(0,l.kt)("inlineCode",{parentName:"p"},"--value")," parameters must be defined in tons, like this: ",(0,l.kt)("inlineCode",{parentName:"p"},"--value 10.5"),", which means the value is 10,5 tons."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<key_file or seed_phrase>")," - either the keyfile for the wallet making the stake, or the seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," - optional flag, which forces TONOS-CLI to wait for DePool answer when performing the action and print out the resulting message. Without it only the results of the multisig transaction to DePool will be displayed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli depool --addr 0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake remove --wallet 0:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value 100 --sign "dizzy modify exotic daring gloom rival pipe disagree again film neck fuel"\n')),(0,l.kt)("h2",{id:"74-transfer-stakes"},"7.4. Transfer stakes"),(0,l.kt)("p",null,"The following command assigns an existing ordinary stake or its part to another participant wallet. If the entirety of the stake is transferred, the transferring wallet is removed from the list of participants in the DePool. If the receiving wallet isn't listed among the participants, it will become a participant as the result of the command."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] stake transfer [--wallet <msig_address>] --value <number> --dest <address> [--sign <key_file or seed_phrase>] [--wait-answer]\n")),(0,l.kt)("p",null,"Where"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of the wallet that made the stake."),(0,l.kt)("p",null,"all ",(0,l.kt)("inlineCode",{parentName:"p"},"--value")," parameters must be defined in tons, like this: ",(0,l.kt)("inlineCode",{parentName:"p"},"--value 10.5"),", which means the value is 10,5 tons."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"dest <address>")," - address of the new owner of the stake."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<key_file or seed_phrase>")," - either the keyfile for the wallet making the stake, or the seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," - optional flag, which forces TONOS-CLI to wait for DePool answer when performing the action and print out the resulting message. Without it only the results of the multisig transaction to DePool will be displayed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli depool --addr 0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake transfer --wallet 0:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value 1000 --dest 0:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --sign "dizzy modify exotic daring gloom rival pipe disagree again film neck fuel"\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: Stakes cannot be transferred from or to DePool's validator wallet, and between any wallets during round completion step.")),(0,l.kt)("h2",{id:"75-withdraw-stakes"},"7.5. Withdraw Stakes"),(0,l.kt)("h3",{id:"751-withdraw-entire-stake"},"7.5.1. Withdraw entire stake"),(0,l.kt)("p",null,"The following command allows to withdraw an ordinary stake to the wallet that owns it, as soon as the stake becomes available. Use ",(0,l.kt)("inlineCode",{parentName:"p"},"withdraw on")," to receive the stake, once it's unlocked. If you then make another stake, and want to keep reinvesting it every round, run the command with ",(0,l.kt)("inlineCode",{parentName:"p"},"withdraw off"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] withdraw on | off [--wallet <msig_address>] [--sign <key_file or seed_phrase>] [--wait-answer]\n")),(0,l.kt)("p",null,"Where"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of the wallet that made the stake."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<key_file or seed_phrase>")," - either the keyfile for the wallet that made the stake, or the seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," - optional flag, which forces TONOS-CLI to wait for DePool answer when performing the action and print out the resulting message. Without it only the results of the multisig transaction to DePool will be displayed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli depool --addr 0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace withdraw on --wallet 0:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --sign "dizzy modify exotic daring gloom rival pipe disagree again film neck fuel"\n')),(0,l.kt)("h3",{id:"752-withdraw-part-of-the-stake"},"7.5.2. Withdraw part of the stake"),(0,l.kt)("p",null,"The following command allows to withdraw part of an ordinary stake to the wallet that owns it, as soon as the stake becomes available. If, as result of this withdrawal, participant's ordinary stake becomes less than ",(0,l.kt)("inlineCode",{parentName:"p"},"minStake"),", then participant's whole stake is sent to participant."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] stake withdrawPart [--wallet <msig_address>] --value <number> [--sign <key_file or seed_phrase>] [--wait-answer]\n")),(0,l.kt)("p",null,"Where"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of the wallet that made the stake."),(0,l.kt)("p",null,"all ",(0,l.kt)("inlineCode",{parentName:"p"},"--value")," parameters must be defined in tons, like this: ",(0,l.kt)("inlineCode",{parentName:"p"},"--value 10.5"),", which means the value is 10,5 tons."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<key_file or seed_phrase>")," - either the keyfile for the wallet that made the stake, or the seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," - optional flag, which forces TONOS-CLI to wait for DePool answer when performing the action and print out the resulting message. Without it only the results of the multisig transaction to DePool will be displayed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli depool --addr 0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake withdrawPart --wallet 0:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value 1000 --sign "dizzy modify exotic daring gloom rival pipe disagree again film neck fuel"\n')),(0,l.kt)("h2",{id:"76-reinvest-stakes"},"7.6. Reinvest Stakes"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"#721-ordinary-stake"},"Ordinary")," stake reinvestment is controlled by the DePool reinvest flag. By default this flag is set to ",(0,l.kt)("inlineCode",{parentName:"p"},"yes"),", and the the participant's available ordinary stake will be reinvested every round, no additional action required. It gets set to ",(0,l.kt)("inlineCode",{parentName:"p"},"no")," when ",(0,l.kt)("a",{parentName:"p",href:"#751-withdraw-entire-stake"},"withdrawing the entire stake"),". After stake withdrawal it remains set to ",(0,l.kt)("inlineCode",{parentName:"p"},"no"),". To re-enable ordinary stake reinvesting after withdrawing a stake, run the withdraw command with option ",(0,l.kt)("inlineCode",{parentName:"p"},"off"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] withdraw off [--wallet <msig_address>] [--sign <key_file or seed_phrase>] [--wait-answer]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of the wallet that made the stake."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<key_file or seed_phrase>")," - either the keyfile for the wallet that made the stake, or the seed phrase in quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wait-answer")," - optional flag, which forces TONOS-CLI to wait for DePool answer when performing the action and print out the resulting message. Without it only the results of the multisig transaction to DePool will be displayed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli depool --addr 0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace withdraw off --wallet 0:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --sign "dizzy modify exotic daring gloom rival pipe disagree again film neck fuel"\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Note:")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"#752-withdraw-part-of-the-stake"},"Withdrawing a part of the stake")," does not affect the reinvest flag."),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"#723-lock-stake"},"Lock")," and ",(0,l.kt)("a",{parentName:"p",href:"#722-vesting-stake"},"vesting")," stakes are reinvested according to their initial settings for the full duration of the staking period. There is no way to change these settings once lock and vesting stakes are made."),(0,l.kt)("h2",{id:"77-read-depool-answers"},"7.7. Read DePool answers"),(0,l.kt)("p",null,"Every time anything happens with the participant stake in the DePool, e.g. a round completes and rewards are distributed, DePool sends the participant a message with the relevant details. Use the following command to read these messages:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool --addr <depool_address> answers --wallet <msig_address> [--since <unixtime>]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of the wallet that made the stake."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<unixtime>")," - unixtime, since which you want to view DePool answers. If ",(0,l.kt)("inlineCode",{parentName:"p"},"--since")," is omitted, all DePool answers are printed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli depool --addr 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf answers --wallet 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3\nConfig: /home/user/tonos-cli.conf.json\nConnecting to net.ton.dev\n34 answers found\nAnswer:\nId: 7cacf43d2e748a5c9209e93c41c0aeccc71a5b05782dbfb3c8ac538948b67c49\nValue: 0.000000001\nCreated at: 1619803878 (2021-04-30 17:31:18.000)\nDecoded body:\nonRoundComplete {"roundId":"104","reward":"2907725565","ordinaryStake":"211269425171","vestingStake":"0","lockStake":"0","reinvest":true,"reason":"5"}\n')),(0,l.kt)("h2",{id:"78-view-depool-events"},"7.8. View DePool events"),(0,l.kt)("p",null,"Various events occurring in the DePool are broadcasted to the blockchain and can be monitored. use the following command to view them:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] events [--since <unixtime>]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<unixtime>")," - unixtime, since which you want to view DePool events. If ",(0,l.kt)("inlineCode",{parentName:"p"},"--since")," is omitted, all DePool events are printed."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli depool --addr 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf events --since 1619803870\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n  depool: 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf\n   since: 1619803870\nConnecting to net.ton.dev\n3 events found\nevent ba71ce0889adb4740515dd714c0ce5757373448abe20835990a7c19910bcedaf\nRoundStakeIsAccepted 1619803936 (2021-04-30 17:32:16.000)\n{"queryId":"1619803887","comment":"0"}\n\nevent 9c5fca5548a57809cadac1b8943ac5c60f24cf8132cf6221023e7076373764e1\nStakeSigningRequested 1619803878 (2021-04-30 17:31:18.000)\n{"electionId":"1619836142","proxy":"-1:ed1976efa2bc727e49079de13620881fb63a1d1ca688cb9e6300da9c157e4a19"}\n\nevent b705534fed098b49897591cedc76a71c6d0c71988454dd34730be97c0cfbf604\nRoundCompleted 1619803878 (2021-04-30 17:31:18.000)\n{"round":{"id":"104","supposedElectedAt":"1619705070","unfreeze":"1619803374","stakeHeldFor":"32768","vsetHashInElectionPhase":"0x000000000000000000000000000000000000000000000000000000006089bcee","step":"8","completionReason":"5","stake":"412362311390363","recoveredStake":"95976319560878","unused":"322363311390363","isValidatorStakeCompleted":false,"participantReward":"5675390246734","participantQty":"7","validatorStake":"328635369379831","validatorRemainingStake":"0","handledStakesAndRewards":"0"}}\n\nDone\n')),(0,l.kt)("p",null,"To wait for a new event, use the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] events --wait-one\n")),(0,l.kt)("p",null,"TONOS-CLI waits until new event will be emitted and then prints it to terminal."),(0,l.kt)("h2",{id:"79-replenish-depool-balance"},"7.9. Replenish DePool balance"),(0,l.kt)("p",null,"To operate correctly, DePool needs to maintain a balance over 20 tokens. Normally, this happens automatically, but in some cases, when normal operation is interrupted, DePool balance may drop lower. Use the following command to replenish DePool balance (this is not counted towards any stake):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] replenish --value *number* [--wallet <msig_address>] [--sign <key_file_or_seed_phrase>]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<depool_address>")," - address of the DePool contract."),(0,l.kt)("p",null,"all ",(0,l.kt)("inlineCode",{parentName:"p"},"--value")," parameters must be defined in tons, like this: ",(0,l.kt)("inlineCode",{parentName:"p"},"--value 150.5"),", which means the value is 150,5 tons."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of the wallet that made the stake."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<key_file_or_seed_phrase>")," - either the keyfile for the wallet, or the seed phrase in quotes."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli depool --addr 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf replenish --value 5 --wallet 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3 --sign key.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n  depool: 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf\n  wallet: 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3\n   stake: 5\n    keys: key.json\nConnecting to net.ton.dev\nGenerating external inbound message...\n\nMessageId: 43f45f2590ba3c7afec1974f3a2bcc726f98d8ed0bcf216656ea321606f5bf60\nExpire at: Thu, 13 May 2021 14:17:44 +0300\nProcessing...\nSucceeded.\nResult: {\n  "transId": "0"\n}\n')),(0,l.kt)("h2",{id:"710-send-ticktock-to-depool"},"7.10. Send ticktock to DePool"),(0,l.kt)("p",null,"To operate correctly, DePool needs to receive regular ticktock (state update) calls. One way to set them up, is through a TONOS-CLI with the use of a multisig wallet. Use the following command to send a ticktock call (you may set up a script to run this command regularly):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli depool [--addr <depool_address>] ticktock [--wallet <msig_address>] [--sign <path_to_keys_or_seed_phrase>]\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--addr <depool_address>")," - the address of the DePool"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--wallet <msig_address>")," - the address of the multisig wallet used to call DePool"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"--sign <path_to_keys_or_seed_phrase>")," - either the keyfile for the wallet, or the seed phrase in quotes")),(0,l.kt)("p",null,"1 token is always attached to this call. Change will be returned."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli depool --addr 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf ticktock --wallet 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3 --sign key.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n  depool: 0:127ae93241278304fff6b7e5b7b182fd382b6e95b200551061a7354e032e50bf\n  wallet: 0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3\n    keys: key.json\nConnecting to https://net.ton.dev\nGenerating external inbound message...\n\nMessageId: 903bb44b8286fc679e4cd08178fcaac1fb126519ecf6f7cea5794db7337645c4\nExpire at: Thu, 20 May 2021 12:59:25 +0300\nProcessing...\nSucceeded.\nResult: {\n  "transId": "0"\n}\n')),(0,l.kt)("h1",{id:"8-proposal-commands"},"8. Proposal commands"),(0,l.kt)("p",null,"The following commands are used when voting for various FreeTON proposals at ",(0,l.kt)("a",{parentName:"p",href:"https://gov.freeton.org/"},"https://gov.freeton.org/")),(0,l.kt)("h2",{id:"81-create-proposal-and-cast-the-first-vote"},"8.1. Create proposal and cast the first vote"),(0,l.kt)("p",null,"Use the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli proposal create <msig_address> <proposal_address> "<comment>" <path_to_keyfile_or_seed_phrase>\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," -  address of judge wallet."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<proposal_address>")," - address of proposal contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},'"<comment>"')," - proposal description (max symbols: 382). Should be enclosed in double quotes."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<path_to_keyfile_or_seed_phrase>")," - path to key file or seed phrase for the judge wallet. Seed phrase should be enclosed in double quotes."),(0,l.kt)("p",null,"The utility generates the proposal transaction ID and casts the first vote for the proposal."),(0,l.kt)("p",null,"The proposal transaction ID can be used to vote for the proposal by all other wallet custodians and should be communicated to them."),(0,l.kt)("h2",{id:"82-vote-for-proposal"},"8.2. Vote for proposal"),(0,l.kt)("p",null,"Receive proposal transaction ID and use the following command to cast a vote:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli proposal vote <msig_address> <proposal_id> <path_to_keyfile_or_seed_phrase>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of judge wallet."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<proposal_id>")," - proposal transaction ID."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},'"<seed_phrase>"')," - path to key file or seed phrase for the judge wallet. Seed phrase should be enclosed in double quotes."),(0,l.kt)("p",null,"Once the proposal transaction receives the required amount of votes (depends on judge wallet configuration), the transaction is executed and the proposal is considered approved."),(0,l.kt)("h2",{id:"83-decode-proposal-comment"},"8.3. Decode proposal comment"),(0,l.kt)("p",null,"Use the following command to read the proposal comment added when the proposal transaction was created:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli proposal decode <msig_address> <proposal_id>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<msig_address>")," - address of judge wallet."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<proposal_id>")," - proposal transaction ID."),(0,l.kt)("h1",{id:"9-supplementary-commands"},"9. Supplementary commands"),(0,l.kt)("h2",{id:"91-convert-tokens-to-nanotokens"},"9.1. Convert tokens to nanotokens"),(0,l.kt)("p",null,"Transaction amounts in ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli")," are indicated in nanotokens. To convert tokens to nanotokens use the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli convert tokens <amount>\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli convert tokens 125.8\nConfig: /home/user/tonos-cli.conf.json\n125800000000\n")),(0,l.kt)("h2",{id:"92-get-global-config"},"9.2. Get global config"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli getconfig <index>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<index>")," - number of the ",(0,l.kt)("a",{parentName:"p",href:"https://docs.ton.dev/86757ecb2/v/0/p/35a3f3-field-descriptions"},"global config parameter")," (equals the numeric part of the config parameter field name)."),(0,l.kt)("p",null,"Example (requesting the maximum and minimum numbers of validators on the blockchain):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli getconfig 16\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n   index: 16\nConnecting to net.ton.dev\nConfig p16: {\n  "max_validators": 1000,\n  "max_main_validators": 100,\n  "min_validators": 13\n}\n')),(0,l.kt)("h2",{id:"93-nodeid"},"9.3. NodeID"),(0,l.kt)("p",null,"The following command calculates node ID from validator public key:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli nodeid --pubkey <validator_public_key> | --keypair <path_to_key_or_seed_phrase>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<validator_public_key>")," - public key of the validator wallet."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<path_to_key_or_seed_phrase>")," - path to validator wallet keyfile or the corresponding seed phrase in quotes."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli nodeid ---keypair "dizzy modify exotic daring gloom rival pipe disagree again film neck fuel"\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n     key: None\n keypair: dizzy modify exotic daring gloom rival pipe disagree again film neck fuel\n50232655f2ad44f026b03ec1834ae8316bfa1f3533732da1e19b3b31c0f04143\n')),(0,l.kt)("h2",{id:"94-dump-blockchain-config"},"9.4. Dump blockchain config"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli dump config <path>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<path>")," - path where to save the blockchain config dump."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli dump config config.boc\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\n    path: config.boc\nConnecting to main.ton.dev\nConfig successfully saved to config.boc\n")),(0,l.kt)("h2",{id:"95-dump-several-account-states"},"9.5. Dump several account states"),(0,l.kt)("p",null,"Dumps the list of accounts. Files will have address without workchain id as a name."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli dump account <list_of_addresses> [--path <dir_path>]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<list_of_addresses>")," - list of account addresses. Addresses should be specified separately with space delimiter.\nExample: ",(0,l.kt)("inlineCode",{parentName:"p"},"0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13 0:14014af4a374bdd13dae2379063ea2597634c2c2fc8e99ca9eab431a7ab6f566  f89d946b5b4b8a06f01dc20dceef30caff844d5285abea8a21ad3730c0f3dd12 3333333333333333333333333333333333333333333333333333333333333333"),"."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<dir_path>")," - path to the directory where to save dumps. Defaults to current directory."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli dump account 0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13 0:14014af4a374bdd13dae2379063ea2597634c2c2fc8e99ca9eab431a7ab6f566  f89d946b5b4b8a06f01dc20dceef30caff844d5285abea8a21ad3730c0f3dd12 3333333333333333333333333333333333333333333333333333333333333333\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\naddresses: 0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13, 0:14014af4a374bdd13dae2379063ea2597634c2c2fc8e99ca9eab431a7ab6f566, 0:f89d946b5b4b8a06f01dc20dceef30caff844d5285abea8a21ad3730c0f3dd12, 0:3333333333333333333333333333333333333333333333333333333333333333\n    path: None\nConnecting to net.ton.dev\nProcessing...\n./2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13.boc successfully dumped.\n./14014af4a374bdd13dae2379063ea2597634c2c2fc8e99ca9eab431a7ab6f566.boc successfully dumped.\n0:f89d946b5b4b8a06f01dc20dceef30caff844d5285abea8a21ad3730c0f3dd12 was not found.\n0:3333333333333333333333333333333333333333333333333333333333333333 was not found.\nSucceeded.\n")),(0,l.kt)("h2",{id:"96-wait-for-account-change"},"9.6. Wait for account change"),(0,l.kt)("p",null,"The command ",(0,l.kt)("inlineCode",{parentName:"p"},"account-wait")," waits for the change of the ",(0,l.kt)("inlineCode",{parentName:"p"},"last_trans_lt")," account field. It exits with zero exit code upon success (the field has changed before timeout). Otherwise, it exits with non-zero code."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli account-wait <address> [--timeout <timeout_in_secs>]\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<address>")," - address of account to wait for."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<timeout_in_secs>")," - timeout in seconds (the default is 30)."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli account-wait --timeout 10 0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13\n...\nSucceeded.\n$ echo $?\n0\n")),(0,l.kt)("h2",{id:"97-make-a-raw-graphql-query"},"9.7. Make a raw GraphQL query"),(0,l.kt)("p",null,"The command ",(0,l.kt)("inlineCode",{parentName:"p"},"query-raw")," executes a raw network query by directly calling the ",(0,l.kt)("inlineCode",{parentName:"p"},"ton_client::net::query_collection")," SDK interface."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli query-raw <collection> <result> [--filter <filter>] [--limit <limit>] [--order <order>]\n")),(0,l.kt)("p",null,"See relevant SDK documentation to learn about the command's parameters."),(0,l.kt)("p",null,"Examples:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli --json query-raw accounts "id bits cells" --filter \'{ "id": { "eq": "0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13" } }\'\n[\n  {\n    "id": "0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13",\n    "bits": "0x20bc",\n    "cells": "0x25"\n  }\n]\n\n$ tonos-cli --json query-raw accounts "id bits cells" --order \'[ { "path": "balance", "direction": "DESC" } ]\' --limit 3\n[\n  {\n    "id": "-1:7777777777777777777777777777777777777777777777777777777777777777",\n    "bits": "0xe635",\n    "cells": "0x6f"\n  },\n  {\n    "id": "0:5a70f26b94d500a5dc25c6f1b19d802beb97b89f702001dc46bfaf08922d4a6f",\n    "bits": "0x87",\n    "cells": "0x1"\n  },\n  {\n    "id": "0:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13",\n    "bits": "0x20ba",\n    "cells": "0x25"\n  }\n]\n')),(0,l.kt)("p",null,"For more information and syntax read docs section on ",(0,l.kt)("a",{parentName:"p",href:"https://ever-live-playground.web.app/"},"playground"),"."),(0,l.kt)("h2",{id:"10-fetch-and-replay"},"10. Fetch and replay"),(0,l.kt)("p",null,"These two commands are commonly used in pairs to recover a state of the account at the specific point before a given transaction."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("p",null,"1) Dump blockchain config history to the file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli fetch -- -1:5555555555555555555555555555555555555555555555555555555555555555 config.txns\n")),(0,l.kt)("p",null,"2) Dump account transactions from the network to the file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli fetch 0:570ddeb8f632e5f9fde198dd4a799192f149f01c8fd360132b38b04bb7761c5d 570ddeb8.txns\n")),(0,l.kt)("p",null,"where ",(0,l.kt)("inlineCode",{parentName:"p"},"0:570ddeb8f632e5f9fde198dd4a799192f149f01c8fd360132b38b04bb7761c5d")," is an example of account address, ",(0,l.kt)("inlineCode",{parentName:"p"},"570ddeb8.txns")," - name of the output file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli replay [-e] [-c config.txns] 570ddeb8.txns 197ee1fe7876d4e2987b5dd24fb6701e76d76f9d08a5eeceb7fe8ca73d9b8270\n")),(0,l.kt)("p",null,"Transaction can be replayed with config using option ",(0,l.kt)("inlineCode",{parentName:"p"},"-c")," or with the current network config (option ",(0,l.kt)("inlineCode",{parentName:"p"},"-e"),")."),(0,l.kt)("p",null,"where ",(0,l.kt)("inlineCode",{parentName:"p"},"197ee1fe7876d4e2987b5dd24fb6701e76d76f9d08a5eeceb7fe8ca73d9b8270")," is a txn id before which account state should be restored."),(0,l.kt)("p",null,"Note 1: last command generates 3 files. The file with the longest name in the form of ",(0,l.kt)("inlineCode",{parentName:"p"},"<addr>-<txn_id>.boc")," is a replayed and serialized Account state."),(0,l.kt)("p",null,"Note 2: to get StateInit (tvc) from Account state use ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli decode account boc")," command with ",(0,l.kt)("inlineCode",{parentName:"p"},"--dumptvc")," option."),(0,l.kt)("h3",{id:"101-how-to-unfreeze-account"},"10.1. How to unfreeze account"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"1) Dump Account state before transaction in which account changed state from Active to Frozen.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"2) Extract tvc from the generated Account state."))),(0,l.kt)("p",null,"1) Use contract deployer (address in mainnet: ",(0,l.kt)("inlineCode",{parentName:"p"},"0:51616debd4296a4598530d57c10a630db6dc677ecbe1500acaefcfdb9c596c64"),") to deploy the extracted tvc to the frozen account. Send 1 ton to its address and then run its ",(0,l.kt)("inlineCode",{parentName:"p"},"deploy")," method."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'Example:\n`tonos-cli --url main.ton.dev call 0:51616debd4296a4598530d57c10a630db6dc677ecbe1500acaefcfdb9c596c64 deploy --abi deployer.abi.json "{\\"stateInit\\":\\"$(cat state.tvc | base64 -w 0)\\",\\"value\\":500000000,\\"dest\\":\\"-1:618272d6b15fd8f1eaa3cdb61ab9d77ae47ebbfcf7f28d495c727d0e98d523eb\\"}"`\nwhere `dest` - an address of frozen account, `state.tvc` - extracted account StateInit in step 2.\n')),(0,l.kt)("p",null,"Deployer.abi.json:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "ABI version": 2,\n    "header": ["time", "expire"],\n    "functions": [\n        {\n            "name": "deploy",\n            "inputs": [\n                {"name":"stateInit","type":"cell"},\n                {"name":"value","type":"uint128"},\n                {"name":"dest","type":"address"}\n            ],\n            "outputs": [\n            ]\n        },\n        {\n            "name": "constructor",\n            "inputs": [\n            ],\n            "outputs": [\n            ]\n        }\n    ],\n    "data": [\n    ],\n    "events": [\n    ]\n}\n')),(0,l.kt)("h1",{id:"11-debug-commands"},"11. Debug commands"),(0,l.kt)("p",null,"Debug commands allow user to replay transaction locally or execute a function call locally and obtain TVM trace."),(0,l.kt)("h2",{id:"111-debug-transaction"},"11.1. Debug transaction"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli debug transaction [FLAGS] [OPTIONS] <tx_id>\n")),(0,l.kt)("p",null,"FLAGS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"dump_config")," - Dump the replayed config contract account state."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"dump_contract")," - Dump the replayed target contract account state."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"e"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"empty_config")," - Replay transaction without full dump of the config contract."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"min_trace")," - Flag that changes trace to minimal version."),(0,l.kt)("p",null,"OPTIONS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-c"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--config <CONFIG_PATH>"),' - Path to the file with saved config contract transactions. If not set transactions will be fetched to file "config.txns".'),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-t"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--contract <CONTRACT_PATH>"),' - Path to the file with saved target contract transactions. If not set transactions - will be fetched to file "contract.txns".'),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-d"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--dbg_info <DBG_INFO>")," - Path to the file with debug info."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--decode_abi <DECODE_ABI>")," - Path to the ABI file used to decode output messages."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-o"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--output <LOG_PATH>"),' - Path where to store the trace. Default path is "./trace.log". Note: old file will be removed.'),(0,l.kt)("p",null,"ARGUMENTS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"tx_id")," - ID of the transaction that should be replayed."),(0,l.kt)("p",null,"This command allows user to replay remote transaction locally and obtain TVM trace.\nFull replay requires transactions dump of the debugged contract and of the config contract."),(0,l.kt)("p",null,"This command fetches them automatically, but config contract may have too many transactions and full dump of them can\ntake a very long time, that's why user can use option ",(0,l.kt)("inlineCode",{parentName:"p"},"--empty-config")," to limit number of the queried transactions and\nspeed up the execution if the debugged contract doesn't check network configuration parameters. Another way to speed up\nexecution if the contract needs config is to reuse dump of config transactions by passing the file with ",(0,l.kt)("inlineCode",{parentName:"p"},"--config <CONFIG_PATH>")," option."),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli debug transaction -o tvm_trace.log 74acbd354e605519d799c7e1e90e52030e8f9e781453e48ecad18bb035fe1586 --empty-config\nConfig: /home/user/TONLabs/sol2tvm/scripts/tonos-cli.conf.json\nInput arguments:\n address: 0:e5b3856d4d6b45f33ea625b9c4d949c601b8b6fb60fe6b968c5c0e5000a6aa78\n   tx_id: 74acbd354e605519d799c7e1e90e52030e8f9e781453e48ecad18bb035fe1586\ntrace_path: tvm_trace.log\nconfig_path: None\ncontract_path: None\nFetching config contract transactions...\nFetching contract transactions...\nReplaying the last transactions...\nDONE\nLog saved to tvm_trace.log.\n")),(0,l.kt)("h2",{id:"112-debug-call"},"11.2. Debug call"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli debug call [FLAGS] [OPTIONS] <address> <method> <params>\n")),(0,l.kt)("p",null,"FLAGS:\n",(0,l.kt)("inlineCode",{parentName:"p"},"--boc"),"- Flag that changes behavior of the command to work with the saved account state (account BOC)."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--min_trace")," - Flag that changes trace to minimal version."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--tvc")," - Flag that changes behavior of the command to work with the saved contract state (stateInit TVC)."),(0,l.kt)("p",null,"OPTIONS:\n",(0,l.kt)("inlineCode",{parentName:"p"},"--abi <ABI>")," - Path to the contract ABI file. Can be specified in the config file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--tvc_address <ACCOUNT_ADDRESS>")," - Account address for account constructed from TVC.\n",(0,l.kt)("inlineCode",{parentName:"p"},"-c, --config <CONFIG_PATH>")," - Path to the file with saved config contract state."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-d, --dbg_info <DBG_INFO>")," - Path to the file with debug info."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--decode_abi <DECODE_ABI>")," - Path to the ABI file used to decode output messages."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-o, --output <LOG_PATH>"),' - Path where to store the trace. Default path is "./trace.log". Note: old file will be removed.'),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--now <NOW>")," - Now timestamp (in milliseconds) for execution. If not set it is equal to the current timestamp."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--sign <SIGN>")," - Seed phrase or path to the file with keypair used to sign the message. Can be specified in the config."),(0,l.kt)("p",null,"ARGUMENTS:"),(0,l.kt)("p",null,"  ",(0,l.kt)("inlineCode",{parentName:"p"},"<address>")," - Contract address or path the file with saved contract state if corresponding flag is used."),(0,l.kt)("p",null,"  ",(0,l.kt)("inlineCode",{parentName:"p"},"<method>")," - Name of the function being called."),(0,l.kt)("p",null,"  ",(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - Function arguments. Can be specified with a filename, which contains json data."),(0,l.kt)("p",null,"This command allows user locally emulate contract call and obtain TVM trace.\nCommand can work with contract in the network by querying its boc and running message on it or with saved account state\nin format of account BOC or pure StateInit TVC. If contract is passed via TVC file, contract address can be specified\nwith ",(0,l.kt)("inlineCode",{parentName:"p"},"--address <tvc_address>")," option. Also, execution timestamp can be specified with option ",(0,l.kt)("inlineCode",{parentName:"p"},"--now <timestamp>"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli debug call --abi ../samples/1_Accumulator.abi.jso\nn --sign keys/key0 0:e5b3856d4d6b45f33ea625b9c4d949c601b8b6fb60fe6b968c5c0e5000a6aa78 add2 \'{"value":1}\'\nConfig: /home/user/TONLabs/sol2tvm/scripts/tonos-cli.conf.json\nInput arguments:\n   input: 0:e5b3856d4d6b45f33ea625b9c4d949c601b8b6fb60fe6b968c5c0e5000a6aa78\n  method: add2\n  params: {"value":1}\n    sign: keys/key0\n     abi: ../samples/1_Accumulator.abi.json\n  output: ./trace.log\nExecution finished.\nLog saved to ./trace.log\n')),(0,l.kt)("h2",{id:"113-debug-run"},"11.3. Debug run"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli debug run [FLAGS] [OPTIONS] <address> <method> <params>\n")),(0,l.kt)("p",null,"FLAGS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--boc")," - Flag that changes behavior of the command to work with the saved account state (account BOC)."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--min_trace")," - Flag that changes trace to minimal version."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--tvc")," - Flag that changes behavior of the command to work with the saved contract state (stateInit TVC)."),(0,l.kt)("p",null,"OPTIONS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--abi <ABI>")," - Path to the contract ABI file. Can be specified in the config file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--tvc_address <ACCOUNT_ADDRESS>")," - Account address for account constructed from TVC."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-c"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--config <CONFIG_PATH>")," - Path to the file with saved config contract state."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-d"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--dbg_info <DBG_INFO>")," - Path to the file with debug info."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--decode_abi <DECODE_ABI>")," - Path to the ABI file used to decode output messages."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-o"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--output <LOG_PATH>"),' - Path where to store the trace. Default path is "./trace.log". Note: old file will be removed.'),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--now <NOW>")," - Now timestamp (in milliseconds) for execution. If not set it is equal to the current timestamp."),(0,l.kt)("p",null,"ARGUMENTS:"),(0,l.kt)("p",null,"  ",(0,l.kt)("inlineCode",{parentName:"p"},"<address>")," - Contract address or path the file with saved contract state if corresponding flag is used."),(0,l.kt)("p",null,"  ",(0,l.kt)("inlineCode",{parentName:"p"},"<method>")," - Name of the function being called."),(0,l.kt)("p",null,"  ",(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - Function arguments. Can be specified with a filename, which contains json data."),(0,l.kt)("p",null,"  This command is similar to ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli debug call")," but allows user to debug get methods."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli debug run --abi ../sol2tvm/samples/1_Accumulator.abi.json 0:04a12b2e001a4144b70ddb244838f8627f8d11cade399dc0892aded7b82d6d68 sum '{}'\nConfig: /home/user/TONLabs/tonos-cli/tonos-cli.conf.json\nInput arguments:\n   input: 0:04a12b2e001a4144b70ddb244838f8627f8d11cade399dc0892aded7b82d6d68\n  method: sum\n  params: {}\n    sign: None\n opt_abi: ../sol2tvm/samples/1_Accumulator.abi.json\n  output: ./trace.log\ndebug_info: None\nExecution finished.\nLog saved to ./trace.log\n")),(0,l.kt)("h2",{id:"114-debug-replay-transaction-on-the-saved-account-state"},"11.4. Debug replay transaction on the saved account state"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"    tonos-cli debug replay [FLAGS] [OPTIONS] <TX_ID> <INPUT>\n")),(0,l.kt)("p",null,"FLAGS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--min_trace")," - Flag that changes trace to minimal version."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--update_state")," - Update state of the contract."),(0,l.kt)("h2",{id:"115-debug-deploy"},"11.5 Debug deploy"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli debug deploy [FLAGS] [OPTIONS] <tvc> <params>\n")),(0,l.kt)("p",null,"FLAGS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--full_trace")," - Flag that changes trace to full version."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--init_balance")," - Do not fetch account from the network, but create dummy account with big balance."),(0,l.kt)("p",null,"OPTIONS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--abi <ABI>")," - Path to the contract ABI file. Can be specified in the config file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-c, --config <CONFIG_PATH>")," - Path to the file with saved config contract state."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-d, --dbg_info <DBG_INFO>")," - Path to the file with debug info."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--decode_abi <DECODE_ABI>")," - Path to the ABI file used to decode output messages. Can be specified in the config file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-o, --output <LOG_PATH>"),' - Path where to store the trace. Default path is "./trace.log". Note: old file will be removed.'),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--now <NOW>")," - Now timestamp (in milliseconds) for execution. If not set it is equal to the current timestamp."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--sign <SIGN>")," - Seed phrase or path to the file with keypair used to sign the message. Can be specified in the config."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--wc <WC>")," - Workchain ID."),(0,l.kt)("p",null,"ARGUMENTS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<tvc>")," - Path to the tvc file with contract StateInit."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<params>")," - Constructor arguments."),(0,l.kt)("p",null,"This command allows user locally emulate contract deploy.\nCommand can work with prepared network account or create a dummy one with big balance (if --init_balance flag is\nspecified)."),(0,l.kt)("h1",{id:"116-debug-message"},"11.6 Debug message"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli debug message [--boc] <address_or_path> [-u] [-o <log_path>] <message_in_base64_or_path_to_file>\n")),(0,l.kt)("p",null,"FLAGS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--boc")," - Flag that changes behavior of the command to work with the saved account state (account BOC)."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--full_trace")," - Flag that changes trace to full version."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-u"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--update")," - Update contract BOC after execution."),(0,l.kt)("p",null,"OPTIONS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-c, --config <CONFIG_PATH>"),"- Path to the file with saved config contract state."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-d"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--dbg_info <DBG_INFO>")," - Path to the file with debug info."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--decode_abi <DECODE_ABI>")," - Path to the ABI file used to decode output messages. Can be specified in the config file."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"-o"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"--output <LOG_PATH>"),' - Path where to store the trace. Default path is "./trace.log". Note: old file will be removed.'),(0,l.kt)("p",null,"ARGUMENTS:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<address_or_path>"),"- Contract address or path the file with saved contract state if corresponding flag is used."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<message_in_base64_or_path_to_file>")," - Message in Base64 or path to fil with message."),(0,l.kt)("p",null,"This command allows to play message on the contract state locally with trace.\nIt can be useful when user wants to play contract interaction locally. User can call one contract locally with ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli debug call")," and find output messages in trace log:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-log"},'Output messages:\n----------------\n\n{\n  "Type": "internal message",\n  "Header": {\n    "ihr_disabled": "true",\n    "bounce": "true",\n    "bounced": "false",\n    "source": "0:c015125ec7788fe31c8ff246ad58ca3dda476f74d544f6b161535b7e8ad995e3",\n    "destination": "0:9677580d26bd9d316323470526d94186354698092f62ea63e65cebcd5c6ad7a8",\n    "value": "9000000",\n    "ihr_fee": "0",\n    "fwd_fee": "666672",\n    "created_lt": "4786713000003",\n    "created_at": "1652270294"\n  },\n  "Body": "te6ccgEBAQEAJgAASEhEWrgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3g==",\n  "BodyCall": "Undefined",\n  "Message_base64": "te6ccgEBAQEAfgAA92gBgCokvY7xH8Y5H+SNWrGUe7SO3umqie1iwqa2/RWzK8cAJZ3WA0mvZ0xYyNHBSbZQYY1RpgJL2LqY+Zc681cateoOJVEABhRYYAAACLT8p/CGxPdJrCQiLVwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb0A="\n}\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Message_base64")," then can be passed to ",(0,l.kt)("inlineCode",{parentName:"p"},"tonos-cli debug message")," to play it on another account."))}f.isMDXComponent=!0}}]);