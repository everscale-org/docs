"use strict";(self.webpackChunkeverscale_docs_website=self.webpackChunkeverscale_docs_website||[]).push([[9220],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>b});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=d(a),u=r,b=m["".concat(s,".").concat(u)]||m[u]||c[u]||i;return a?n.createElement(b,o(o({ref:t},p),{},{components:a})):n.createElement(b,o({ref:t},p))}));function b(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},3559:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const i={title:"1. EVER payment link",sidebar_position:1,slug:"/standard/TIP-5.1"},o="EVER payment link (TIP-5.1)",l={unversionedId:"standard/TIP-5/1",id:"standard/TIP-5/1",title:"1. EVER payment link",description:"Abstract",source:"@site/../../src/standard/TIP-5/1.md",sourceDirName:"standard/TIP-5",slug:"/standard/TIP-5.1",permalink:"/standard/TIP-5.1",draft:!1,editUrl:"https://github.com/everscale-org/docs/edit/main/.build/website/../../src/standard/TIP-5/1.md",tags:[],version:"current",lastUpdatedAt:1712027538,formattedLastUpdatedAt:"Apr 2, 2024",sidebarPosition:1,frontMatter:{title:"1. EVER payment link",sidebar_position:1,slug:"/standard/TIP-5.1"},sidebar:"tutorialSidebar",previous:{title:"Core description",permalink:"/standard/TIP-5"},next:{title:"Architecture",permalink:"/arch"}},s={},d=[{value:"Abstract",id:"abstract",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Specification",id:"specification",level:2},{value:"General rules for handling",id:"general-rules-for-handling",level:3},{value:"Operating system integration",id:"operating-system-integration",level:3},{value:"EBNF grammar",id:"ebnf-grammar",level:3},{value:"Query Keys",id:"query-keys",level:3},{value:"Transfer amount/size",id:"transfer-amountsize",level:4},{value:"Forward compatibility",id:"forward-compatibility",level:4},{value:"Appendix",id:"appendix",level:2},{value:"Simpler syntax",id:"simpler-syntax",level:3},{value:"Examples",id:"examples",level:3},{value:"Just address (in different formats)",id:"just-address-in-different-formats",level:4},{value:"<code>ever:</code> protocol",id:"ever-protocol",level:5},{value:"<code>everscale:</code> protocol",id:"everscale-protocol",level:5},{value:"<code>tvm:42:</code> protocol",id:"tvm42-protocol",level:5},{value:"URL-like link",id:"url-like-link",level:5},{value:"Address with name",id:"address-with-name",level:5},{value:"Request 100.2 EVER",id:"request-1002-ever",level:5},{value:"Payment with comment",id:"payment-with-comment",level:5},{value:"Some future version that has variables that are (currently) not understood and required and thus invalid",id:"some-future-version-that-has-variables-that-are-currently-not-understood-and-required-and-thus-invalid",level:5},{value:"Some future version that has variables that are (currently) not understood but not required and thus valid",id:"some-future-version-that-has-variables-that-are-currently-not-understood-but-not-required-and-thus-valid",level:5},{value:"Reserved standard extensions",id:"reserved-standard-extensions",level:2}],p={toc:d},m="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(m,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"ever-payment-link-tip-51"},"EVER payment link (TIP-5.1)"),(0,r.kt)("h2",{id:"abstract"},"Abstract"),(0,r.kt)("p",null,"This TIP proposes a URI scheme for making EVER payments."),(0,r.kt)("h2",{id:"motivation"},"Motivation"),(0,r.kt)("p",null,"Payment URIs has become widely adopted since the introduction of Bitcoin\u2019s improvement proposals ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bitcoin/bips/blob/master/bip-0020.mediawiki"},"BIP-20"),", ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bitcoin/bips/blob/master/bip-0021.mediawiki"},"21"),", ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bitcoin/bips/blob/master/bip-0070.mediawiki"},"70"),", ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bitcoin/bips/blob/master/bip-0071.mediawiki"},"71"),", and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bitcoin/bips/blob/master/bip-0072.mediawiki"},"72"),". For instance, most modern mobile wallets support the scanning of QR codes containing encoded bitcoin payment links."),(0,r.kt)("p",null,"The purpose of this URI scheme is to enable users to easily make payments in EVER by simply clicking links on web pages or scanning QR Codes."),(0,r.kt)("h2",{id:"specification"},"Specification"),(0,r.kt)("p",null,'The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119.'),(0,r.kt)("p",null,"All symbols in the payment link MUST be encoded following the guidelines set out in RFC 3986."),(0,r.kt)("h3",{id:"general-rules-for-handling"},"General rules for handling"),(0,r.kt)("p",null,"Everscale clients MUST NOT act on URIs without getting the user\u2019s authorization. They SHOULD require the user to manually approve each payment individually, though in some cases, they MAY allow the user to make this decision automatically."),(0,r.kt)("h3",{id:"operating-system-integration"},"Operating system integration"),(0,r.kt)("p",null,"Graphical Everscale clients SHOULD register themselves as the handler for the URI scheme by default if no other handler is already registered. If a registered handler is already present, they MAY prompt the user to change it once they first run the client."),(0,r.kt)("h3",{id:"ebnf-grammar"},"EBNF grammar"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ebnf"},'everurn = protocol, ":", ["//"], everaddress, ["?", everparams];\n\nprotocol = "everscale" | "ever" | "tvm:42";\n\neveraddress = rawaddress | base64 | base64url;\n\nrawaddress = chainnumber, ":", {letter | digit};\nchainnumber = ["-"], digit, digit*;\n\nbase64 = base64character, {base64character};\nbase64character = letter | digit | base64symbol;\nbase64symbol = "/" | "+";\n\nbase64url = base64urlcharacter, {base64urlcharacter};\nbase64urlcharacter = letter | digit | base64urlsymbol;\nbase64urlsymbol = "-" | "_";\n\neverparams = everparam, ["&", everparams*];\neverparam = amountparam | labelparam | commentparam | versionparam | otherparam | reqparam | netparam;\namountparam = amountnotation, "=", digit, digit*, [".", digit*];\namountnotation = "amount" | "a";\nlabelparam = labelnotation, "=", labelcharacter*;\nlabelnotation = "label" | "l";\ncommentparam = commentnotation, "=", labelcharacter*;\ncommentnotation = "comment" | "c";\nversionparam = versionnotation, "=", digit, digit*, [".", digit, digit*];\nversionnotation = "version" | "v";\notherparam = labelcharacter, labelcharacter*, "=", labelcharacter*;\nreqparam = "req-", otherparam;\nnetparam = netnotation, "=", labelcharacter*;\nnetnotation = "net" | "n";\n\nlabelcharacter = letter | digit | urisymbol;\n\nletter = "A" | "B" | "C" | "D" | "E" | "F" | "G"\n| "H" | "I" | "J" | "K" | "L" | "M" | "N"\n| "O" | "P" | "Q" | "R" | "S" | "T" | "U"\n| "V" | "W" | "X" | "Y" | "Z" | "a" | "b"\n| "c" | "d" | "e" | "f" | "g" | "h" | "i"\n| "j" | "k" | "l" | "m" | "n" | "o" | "p"\n| "q" | "r" | "s" | "t" | "u" | "v" | "w"\n| "x" | "y" | "z" ;\ndigit = "0" | "1" | "2" | "3" | "4" | "5" | "6"\n| "7" | "8" | "9";\nurisymbol = ":" | "/" | "?" | "#" | "[" | "]" | "@"\n| "!" | "$" | "\'" | "(" | ")" | "*" | "+"\n| "," | ";" | "%" | "." ;\n')),(0,r.kt)("p",null,"You can validate your payment link for validity at the ",(0,r.kt)("a",{parentName:"p",href:"https://mdkrajnak.github.io/ebnftest/"},"EBNF evaluator"),"."),(0,r.kt)("p",null,"The scheme component (",(0,r.kt)("inlineCode",{parentName:"p"},"ever:"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"everscale:"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"tvm:42:"),") is case-insensitive, and implementations must accept any combination of uppercase and lowercase letters. The rest of the URI is case-sensitive, including the query parameter keys."),(0,r.kt)("h3",{id:"query-keys"},"Query Keys"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"label")," or ",(0,r.kt)("inlineCode",{parentName:"strong"},"l"),":")," Label for that address (e.g. name of receiver or order number);"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"address"),":")," Everscale address in raw or packed (base64 / base64url) representation;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"comment")," or ",(0,r.kt)("inlineCode",{parentName:"strong"},"c"),":")," message to attach to the transaction while sending it to the network;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"amount")," or ",(0,r.kt)("inlineCode",{parentName:"strong"},"a"),":")," amount of base currency units (see below);"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"version")," or ",(0,r.kt)("inlineCode",{parentName:"strong"},"v"),":")," applicable standard version. If omitted, version 1 will apply;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"net")," or ",(0,r.kt)("inlineCode",{parentName:"strong"},"n"),":")," network to perform operation, e.g. \u201cmain\u201d or \u201cdev\u201d;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"(other):")," optional, for future extensions.")),(0,r.kt)("h4",{id:"transfer-amountsize"},"Transfer amount/size"),(0,r.kt)("p",null,"If an amount is provided, it MUST be specified in decimal EVER. All amounts MUST contain no commas and use a period (",(0,r.kt)("inlineCode",{parentName:"p"},"."),") as the separating character to separate whole numbers and decimal fractions. I.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"amount=50.00")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"amount=50")," is treated as 50 EVER, and ",(0,r.kt)("inlineCode",{parentName:"p"},"amount=50,000.00")," is invalid."),(0,r.kt)("p",null,"Everscale clients MAY display the amount in any format that is not intended to deceive the user. However, they SHOULD choose a foremost least confusing format, and only after that most reasonable given the amount requested. Thus, for example, so long as most users work in EVER units, values should always be displayed in EVER by default, even if mEVER or kEVER would otherwise be a more logical interpretation of the amount."),(0,r.kt)("h4",{id:"forward-compatibility"},"Forward compatibility"),(0,r.kt)("p",null,"Variables that are prefixed with a ",(0,r.kt)("inlineCode",{parentName:"p"},"req-")," are considered required. If a client does not implement any variables prefixed with ",(0,r.kt)("inlineCode",{parentName:"p"},"req-"),", it MUST consider the entire URI invalid. Any other variables that are not implemented but are not prefixed with a ",(0,r.kt)("inlineCode",{parentName:"p"},"req-")," can be safely ignored."),(0,r.kt)("h2",{id:"appendix"},"Appendix"),(0,r.kt)("h3",{id:"simpler-syntax"},"Simpler syntax"),(0,r.kt)("p",null,"This section is non-normative and does not cover all possible syntax. Please see the EBNF grammar above for the normative syntax.\n",(0,r.kt)("inlineCode",{parentName:"p"},"[foo]")," means optional, ",(0,r.kt)("inlineCode",{parentName:"p"},"<bar>")," are placeholders."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ever://<address>[?amount=<amount>][&label=<label>][&comment=<comment>]\n")),(0,r.kt)("h3",{id:"examples"},"Examples"),(0,r.kt)("p",null,"Characters must be URI encoded properly."),(0,r.kt)("h4",{id:"just-address-in-different-formats"},"Just address (in different formats)"),(0,r.kt)("h5",{id:"ever-protocol"},(0,r.kt)("inlineCode",{parentName:"h5"},"ever:")," protocol"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ever:0:e2b874ee05cd7e5d1475d90bab04d26974e67fe7aef97d730c2adcba5ea895c3\n")),(0,r.kt)("h5",{id:"everscale-protocol"},(0,r.kt)("inlineCode",{parentName:"h5"},"everscale:")," protocol"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"everscale:0:e2b874ee05cd7e5d1475d90bab04d26974e67fe7aef97d730c2adcba5ea895c3\n")),(0,r.kt)("h5",{id:"tvm42-protocol"},(0,r.kt)("inlineCode",{parentName:"h5"},"tvm:42:")," protocol"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"tvm:42:0:e2b874ee05cd7e5d1475d90bab04d26974e67fe7aef97d730c2adcba5ea895c3\n")),(0,r.kt)("h5",{id:"url-like-link"},"URL-like link"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ever://0:e2b874ee05cd7e5d1475d90bab04d26974e67fe7aef97d730c2adcba5ea895c3\n")),(0,r.kt)("h5",{id:"address-with-name"},"Address with name"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ever:0:e2b874ee05cd7e5d1475d90bab04d26974e67fe7aef97d730c2adcba5ea895c3?label=Mr.Skywalker\n")),(0,r.kt)("h5",{id:"request-1002-ever"},"Request 100.2 EVER"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ever:0:e2b874ee05cd7e5d1475d90bab04d26974e67fe7aef97d730c2adcba5ea895c3?label=Mr.Skywalker&amount=100.2\n")),(0,r.kt)("h5",{id:"payment-with-comment"},"Payment with comment"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ever:0:e2b874ee05cd7e5d1475d90bab04d26974e67fe7aef97d730c2adcba5ea895c3?label=Mr.Skywalker&amount=100.2&comment=hello%21\n")),(0,r.kt)("h5",{id:"some-future-version-that-has-variables-that-are-currently-not-understood-and-required-and-thus-invalid"},"Some future version that has variables that are (currently) not understood and required and thus invalid"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ever:0:e2b874ee05cd7e5d1475d90bab04d26974e67fe7aef97d730c2adcba5ea895c3?req-special1=abc&req-special2=123\n")),(0,r.kt)("h5",{id:"some-future-version-that-has-variables-that-are-currently-not-understood-but-not-required-and-thus-valid"},"Some future version that has variables that are (currently) not understood but not required and thus valid"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ever:0:e2b874ee05cd7e5d1475d90bab04d26974e67fe7aef97d730c2adcba5ea895c3?special1=abc&special2=123\n")),(0,r.kt)("h2",{id:"reserved-standard-extensions"},"Reserved standard extensions"),(0,r.kt)("p",null,"The future standard extensions are reserved:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TIP-5.2")," ","\u2014"," URI scheme (TIP-3 fungible token payment link)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TIP-5.3")," ","\u2014"," URI scheme (TIP-4 non-fungible token payment link)")))}c.isMDXComponent=!0}}]);